## for 循环优化
```javascript
var l = my_arr.length;
for (let i = 0; i < l; i++) {
    sum += my_arr[i];// 将数组中的数累加。
}
```
将数组长度赋予一个变量，将该变量作为 for 循环中的判断条件，

这样只需要计算一次数组长度，无需每次都计算，时间开销自然也就小了很多。

## 数字转字符串

```js
42 + ''
```

## 数字字符串转数字

```
+'42'
```


## 对象遍历

- for...in

使用 for...in 注意避免原型对象扩展方法带来的干扰来遍历一个对象的所有自身属性
```javascript
var buz = {
  fog: 'stack'
};

for (var name in buz) {
  if (buz.hasOwnProperty(name)) {
    
  }
  // else {
  //   console.log(name); // toString or something else
  // }
}
```

- Object.keys()

最好使用：
```javascript
Object.keys(obj).forEach(function(key) {
  console.log(key, obj[key]);
})
```
![20210405142006.jpg](https://cdn.nlark.com/yuque/0/2021/jpeg/1614731/1617603626502-600b70d3-3cbe-4311-97e0-ade959e038fa.jpeg)
> [https://juejin.cn/post/6900864318791761927](https://juejin.cn/post/6900864318791761927)
> [https://my.oschina.net/u/4302200/blog/4314690](https://my.oschina.net/u/4302200/blog/4314690)
> 数组遍历：[https://juejin.cn/post/6844903538175262734](https://juejin.cn/post/6844903538175262734)

## 三目运算符或短路表达式简化判断

使用三目运算符或短路表达式简化判断

```js
// 未经简化
if (store.checked) {
  store.refund(somemoney)
  user.love(1)
} else {
  user.love(-1)
}

// 简化后
store.checked && store.refund(somemoney)
user.love(store.checked ? 1 : -1)
```

## if 提前 return 掉无效条件，将 if else 的嵌套层次减少

```javascript
function supply(fruit, quantity) {
  const redFruits = ['apple', 'strawberry', 'cherry', 'cranberries'];
  // 条件 1: 水果存在
  if (fruit) {
    // 条件 2: 属于红色水果
    if (redFruits.includes(fruit)) {
      console.log('红色水果');
      // 条件 3: 水果数量大于 10 个
      if (quantity > 10) {
        console.log('数量大于 10 个');
      }
    }
  } else {
    throw new Error('没有水果啦!');
  }
}

```
优化后：
```javascript
function supply(fruit, quantity) {
  const redFruits = ['apple', 'strawberry', 'cherry', 'cranberries'];
  if (!fruit) throw new Error('没有水果啦'); // 条件 1: 当 fruit 无效时，提前处理错误
  if (!redFruits.includes(fruit)) return; // 条件 2: 当不是红色水果时，提前 return
  
  console.log('红色水果');
  
  // 条件 3: 水果数量大于 10 个
  if (quantity > 10) {
    console.log('数量大于 10 个');
  }
}

```
## 表驱动替代 switch

```js
const getFlow = (option) => {
    let flow = new Map()
        .set('increment', () => increment())
        .set('reduce', () => reduce())
        .set('info', () => output());
    return flow.has(option) ? flow.get(option)() : console.log("默认方法");
}

getFlow('increment')
getFlow('something') // 默认方法
```

优越性不言自明，少了很多行，而且不用写 `break;`，同时该有的都有，无疑是非常完美的方案。

用对象实现也很简洁

```js
const getFlow = (option) => {
    let flow = {
        1: "Monday",
        2: "Tuesday",
        3: "Wednesday",
        4: "Thursday",
        5: "Friday",
        6: "Saturday",
        0: "Sunday"
    }
    return flow[option] ?? "Unknown"
}
alert(getFlow(8))
```

把函数作为参数传递肯定也是可取的，而且同样很简洁

```js
const getFlow = (option) => {
    let flow = {
        1: () => alert(1),
        2: () => alert(2),
    }
    flow[option]?.() ?? alert(NaN)
}
getFlow(1) //1
getFlow(3) //NaN
```

## includes() 替代 ||

前面，我们讨论了如何优化一对一的选择结构，这里我们讨论如何优雅地实现一对多的选择结构。

```js
const getContinent = (option) => {
  if (option === "China" || option === "Japan") {
    return "Asia";
  }
  if (option === "Germany" || option === "France") {
    return "Europe";
  }
};

console.log(getContinent("China"));
```

现在看起来并没有那么糟糕，因为我还没有把所有的国家都加进去。

这当然是可以优化的，而且可以通过使用 Array 的 includes 方法轻松避免。

```js
const getContinent = (option) => {
  const Asia = ["China", "Japan"];
  const Europe = ["Germany", "Franch"];
  if (Asia.includes(option)) return "Asia";
  if (Europe.includes(option)) return "Europe";
  return "Unknown";
};

console.log(getContinent("China")); // Asia
```

经过这种优化，即使增加更多的国家，代码也不会变得杂乱无章。但它可以变得更好。

```js
const getContinent = (option) => {
  let [result, setResult] = ["unknown", (str) => (result = str)];
  const Asia = ["China", "Japan"];
  const Europe = ["Germany", "Franch"];
  Asia.includes(option) && setResult("Asia");
  Europe.includes(option) && setResult("Europe");
  return result;
};

console.log(getContinent("China"));
```

## 赋值优化 this

```js
const keys = ['XX', ...] keys.forEach(k => { this.form[k] = e[k] }) 

this.form ＝ { ...this.form, ...data.bike}
```

## 准确判断数据类型

```javascript
// 首字母大写，如 String 、Object
getType = (anyValue) => {
  return Object.prototype.toString.call(anyValue).replace(/^\[object (\S+)\]$/, '$1');  
}

// 另一种方式
getType = (anyValue)  => {
  return Object.prototype.toString.call(anyValue).slice(8, -1);
}

// 全小写，如 string 、object
getType = (anyValue) => {
  return Object.prototype.toString.call(anyValue).replace(/^\[object (\S+)\]$/, '$1').toLowerCase();  
}

// 同理
getType = (anyValue) => {
  return Object.prototype.toString.call(anyValue).slice(8,-1).toLowerCase(); 
}
```
## 判断字符串是否纯数字
```javascript
!isNaN(Number())

!isNaN(Number("1")) // true
```


```js
validateNumber(val) {
  return val.replace(/\D/g, '')
},
```



## 判断是否为数值类型

```javascript
function isNumber(obj) {
  return obj !== undefined && typeof(obj) === 'number' && !isNaN(obj);
}

isNumber = (obj) => obj !== undefined && typeof(obj) === 'number' && !isNaN(obj);


const isNumber = (value) => !isNaN(parseFloat(value)) && isFinite(value);
```
## 判断是否为数组
```javascript
Array.isArray()
```
## 数组是否为空

```js
const isEmpty = (arr) => Array.isArray(arr) && !arr.length;

isEmpty([]); // true
isEmpty([1, 2, 3]); // false
```

## 判断对象是否为空

```js
const isEmpty = (obj) => Reflect.ownKeys(obj).length === 0 && obj.constructor === Object;
```

```js
const isEmpty = (obj) => obj && Object.keys(obj).length === 0 && obj.constructor === Object
```

## 最简单的排序

```js
东半球最先进的排序算法，时间复杂度总是 O(n)

[3, 7, 2, 1].forEach(item => setTimeout(() => console.log(item), item))
```

## 打乱数组

```js
function shuffle(arr) {
    var len = arr.length;
    for (var i = 0; i < len - 1; i++) {
        var idx = Math.floor(Math.random() * (len - i));
        var temp = arr[idx];
        arr[idx] = arr[len - i - 1];
        arr[len - i -1] = temp;
    }
    return arr;
}

// ES6 版
function shuffle(a) {
    for (let i = a.length; i; i--) {
        let j = Math.floor(Math.random() * i);
        [a[i - 1], a[j]] = [a[j], a[i - 1]];
    }
    return a;
}
```

## isEmpty

```javascript
const isEmpty = (value) => {
  return (
    value === undefined ||
    value === null ||
    (typeof value === "object" && Object.keys(value).length === 0) ||
    (typeof value === "string" && value.trim().length === 0)
  );
}

isEmpty(); // true
isEmpty([]); // true
isEmpty({}); // true
isEmpty(''); // true
isEmpty([1, 2]); // false
isEmpty({ a: 1, b: 2 }); // false
isEmpty('text'); // false
isEmpty(123); // false
isEmpty(true); // false
isEmpty(false); // false
isEmpty(null); // true
isEmpty(undefined); // true
isEmpty(0) // false
```
## 过滤对象里的空值，包括空数组与空对象

```js
Object.keys(params).forEach(key => {
  if (params[key] === undefined || params[key] === null || params[key] === '' || params[key] === NaN) {
    delete params[key]
  }
  if (Array.isArray(params[key]) && !params[key].length) {
    delete params[key]
  }
  if (params[key] && Object.keys(params[key]).length === 0 && params[key].constructor === Object) {
    delete params[key]
  }
})
```

## 判断 url

```js
function isUrl(path) {
  const reg = /^http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;
  return reg.test(path);
}
```

## equals

对两个值进行深入比较，以确定它们是否相等

使用 Date.prototype.getTime() 检查两个值是否相同，是否都是相同时间的 Date 对象，或者是否都是具有相等值的非对象值（严格比较）。

检查是否只有一个值是 null 或 undefined，或者它们的原型是否不同。

如果以上条件均不满足，使用Object.keys() 检查两个值是否具有相同数量的键。

使用 Array.prototype.every（）通过递归调用 equals() 来检查 a 中的每个键是否存在于 b 中，以及它们是否等效。
```javascript
const equals = (a, b) => {
  if (a === b) return true;
  if (a instanceof Date && b instanceof Date)
    return a.getTime() === b.getTime();
  if (!a || !b || (typeof a !== 'object' && typeof b !== 'object'))
    return a === b;
  if (a.prototype !== b.prototype) return false;
  let keys = Object.keys(a);
  if (keys.length !== Object.keys(b).length) return false;
  return keys.every(k => equals(a[k], b[k]));
};

equals(
  { a: [2, { e: 3 }], b: [4], c: 'foo' },
  { a: [2, { e: 3 }], b: [4], c: 'foo' }
); // true
equals([1, 2, 3], { 0: 1, 1: 2, 2: 3 }); // true
```
## nthElement 

返回数组里第 n 个元素
```javascript
const nthElement = (arr, n = 0) =>
  (n === -1 ? arr.slice(n) : arr.slice(n, n + 1))[0];

nthElement(['a', 'b', 'c'], 1); // 'b'
nthElement(['a', 'b', 'b'], -3); // 'a'
```
## findLast

查找符合条件函数的最后一个元素
```javascript
const findLast = (arr, fn) => arr.filter(fn).pop();

findLast([1, 2, 3, 4], n => n % 2 === 1); // 3
```
## findLastIndex
```javascript
const findLastIndex = (arr, fn) =>
  (arr
    .map((val, i) => [i, val])
    .filter(([i, val]) => fn(val, i, arr))
    .pop() || [-1])[0];

findLastIndex([1, 2, 3, 4], n => n % 2 === 1); // 2 (index of the value 3)
findLastIndex([1, 2, 3, 4], n => n === 5); // -1 (default value when not found)
```
## indexOfAll 

查找数组中val的所有索引。如果val从未出现，则返回一个空数组。
```javascript
const indexOfAll = (arr, val) =>
  arr.reduce((acc, el, i) => (el === val ? [...acc, i] : acc), []);

indexOfAll([1, 2, 3, 1, 2, 3], 1); // [0, 3]
indexOfAll([1, 2, 3], 4); // []
```
## forEachRight

从数组的最后一个元素开始，为每个数组元素执行一次提供的函数
```javascript
const forEachRight = (arr, callback) =>
  arr
    .slice()
    .reverse()
    .forEach(callback);

forEachRight([1, 2, 3, 4], val => console.log(val)); // '4', '3', '2', '1'
```
## pluck
将对象数组转换为指定键对应值组成的新数组。
```javascript
const pluck = (arr, key) => arr.map(i => i[key]);

const simpsons = [
  { name: 'lisa', age: 8 },
  { name: 'homer', age: 36 },
  { name: 'marge', age: 34 },
  { name: 'bart', age: 10 }
];
pluck(simpsons, 'age'); // [8, 36, 34, 10]
```
## pull
改变原始数组来过滤掉指定的值
```javascript
const pull = (arr, ...args) => {
  let argState = Array.isArray(args[0]) ? args[0] : args;
  let pulled = arr.filter(v => !argState.includes(v));
  arr.length = 0;
  pulled.forEach(v => arr.push(v));
};

let myArray = ['a', 'b', 'c', 'a', 'b', 'c'];
pull(myArray, 'a', 'c'); // myArray = [ 'b', 'b' ]
```
## pullAtIndex 
```javascript
const pullAtIndex = (arr, pullArr) => {
  let removed = [];
  let pulled = arr
    .map((v, i) => (pullArr.includes(i) ? removed.push(v) : v))
    .filter((v, i) => !pullArr.includes(i));
  arr.length = 0;
  pulled.forEach(v => arr.push(v));
  return removed;
};

let myArray = ['a', 'b', 'c', 'd'];
let pulled = pullAtIndex(myArray, [1, 3]);
// myArray = [ 'a', 'c' ] , pulled = [ 'b', 'd' ]
```
## pullAtValue
```javascript
const pullAtValue = (arr, pullArr) => {
  let removed = [],
    pushToRemove = arr.forEach((v, i) =>
      pullArr.includes(v) ? removed.push(v) : v
    ),
    mutateTo = arr.filter((v, i) => !pullArr.includes(v));
  arr.length = 0;
  mutateTo.forEach(v => arr.push(v));
  return removed;
};

let myArray = ['a', 'b', 'c', 'd'];
let pulled = pullAtValue(myArray, ['b', 'd']);
// myArray = [ 'a', 'c' ] , pulled = [ 'b', 'd' ]
```
## shank
具有与 Array.prototype.splice（）相同的功能，但是返回一个新数组，不改变原数组。
```javascript
const shank = (arr, index = 0, delCount = 0, ...elements) =>
  arr
    .slice(0, index)
    .concat(elements)
    .concat(arr.slice(index + delCount));

const names = ['alpha', 'bravo', 'charlie'];
const namesAndDelta = shank(names, 1, 0, 'delta');
// [ 'alpha', 'delta', 'bravo', 'charlie' ]
const namesNoBravo = shank(names, 1, 1); // [ 'alpha', 'charlie' ]
console.log(names); // ['alpha', 'bravo', 'charlie']
```
## remove 
通过删除给定函数返回 false 的元素来改变数组。
```javascript
const remove = (arr, func) =>
  Array.isArray(arr)
    ? arr.filter(func).reduce((acc, val) => {
      arr.splice(arr.indexOf(val), 1);
      return acc.concat(val);
    }, [])
    : [];

remove([1, 2, 3, 4], n => n % 2 === 0); // [2, 4]
```
## compactObject

从对象或数组中删除所有错误值。

初始化可迭代数据，对数组使用 Array.isArray()，Array.prototype.filter() 和 Boolean 避免稀疏数组。

使用 Object.keys() 和 Array.prototype.reducc() 迭代具有适当初始值的每个键。

使用布尔值确定每个键值的真实性，如果为真，则将其添加到累加器中。

使用 typeof 确定给定值是否是对象，然后再次调用该函数以对其进行深度剔除。
```javascript
const compactObject = val => {
  const data = Array.isArray(val) ? val.filter(Boolean) : val;
  return Object.keys(data).reduce(
    (acc, key) => {
      const value = data[key];
      if (Boolean(value))
        acc[key] = typeof value === 'object' ? compactObject(value) : value;
      return acc;
    },
    Array.isArray(val) ? [] : {}
  );
};

const obj = {
  a: null,
  b: false,
  c: true,
  d: 0,
  e: 1,
  f: '',
  g: 'a',
  h: [null, false, '', true, 1, 'a'],
  i: { j: 0, k: false, l: 'a' }
};
compactObject(obj);
// { c: true, e: 1, g: 'a', h: [ true, 1, 'a' ], i: { l: 'a' } }
```
## takeRight

创建一个从末尾删除n个元素的数组。
```javascript
const takeRight = (arr, n = 1) => arr.slice(arr.length - n, arr.length);

takeRight([1, 2, 3], 2); // [ 2, 3 ]
takeRight([1, 2, 3]); // [3]
```
## sample
从数组中随机获取一个元素。
```javascript
const sample = arr => arr[Math.floor(Math.random() * arr.length)];

sample([3, 7, 9, 11]); // 9
```
## similarity

返回都出现在两个数组中的元素组成的数组。
```javascript
const similarity = (arr, values) => arr.filter(v => values.includes(v));

similarity([1, 2, 3], [1, 2, 4]); // [1, 2]
```
## uniqueElementsBy

根据提供的比较函数查找数组的所有唯一值。

根据比较函数 fn，将 Array.prototype.reduce（）和 Array.prototype.some（）用于包含每个值（唯一一次并且是第一次出现）的数组。

比较函数有两个参数：被比较的两个元素的值。
```javascript
const uniqueElementsBy = (arr, fn) =>
arr.reduce((acc, v) => {
  if (!acc.some(x => fn(v, x))) acc.push(v);
  return acc;
}, []);

uniqueElementsBy(
  [
    { id: 0, value: 'a' },
    { id: 1, value: 'b' },
    { id: 2, value: 'c' },
    { id: 1, value: 'd' },
    { id: 0, value: 'e' }
  ],
  (a, b) => a.id == b.id
); // [ { id: 0, value: 'a' }, { id: 1, value: 'b' }, { id: 2, value: 'c' } ]

// 去掉数组中后面出现的有相同 键（id） 且有相同 值 的对象

let arr = [
  {
    id: 1,
    name: '张三'
  },
  {
    id: 1,
    name: '李四'
  },
  {
    id: 2,
    name: '王五'
  },
  {
    id: 3,
    name: '赵六'
  }
];
const uniqueElementsBy = (arr) => {
  const res = new Map();
  return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1))
}
uniqueElementsBy(arr)
```
## reducedFilter

根据条件过滤对象数组，同时过滤掉未指定的 key

- 使用 Array.prototype.filter（）基于 fn 过滤数组，返回条件为 true 的对象组成的数组。

- 在过滤后的数组使用 Array.prototype.map（）遍历并返回新对象。

- 使用 Array.prototype.reduce（）筛选出未指定的 keys 参数。
```javascript
const reducedFilter = (data, keys, fn) =>
  data.filter(fn).map(el =>
    keys.reduce((acc, key) => {
      acc[key] = el[key];
      return acc;
    }, {})
  );

const data = [
  {
    id: 1,
    name: 'john',
    age: 24
  },
  {
    id: 2,
    name: 'mike',
    age: 50
  }
];

reducedFilter(data, ['id', 'name'], item => item.age > 24);
// [{ id: 2, name: 'mike'}]
```
可以改为
```javascript
const reducedFilter = (data, keys) =>
  data.map(el =>
    keys.reduce((acc, key) => {
      acc[key] = el[key];
      return acc;
    }, {})
  );
```
应用
```javascript
const res = {
  "items": [
    {
      "id": "10225",
      "siteId": "42",
      "market_name": "泓发",
      "alias_name": "泓发",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 1,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "10212",
      "siteId": "42",
      "market_name": "国泰",
      "alias_name": "国泰",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 2,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "73",
      "siteId": "42",
      "market_name": "女人街",
      "alias_name": "女人街",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "0",
      "provinceId": "0",
      "sortIndex": 3,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:23+08:00"
    },
    {
      "id": "10297",
      "siteId": "42",
      "market_name": "鸿胜",
      "alias_name": "鸿胜",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 4,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "868",
      "siteId": "42",
      "market_name": "国投",
      "alias_name": "国投",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "197",
      "provinceId": "19",
      "sortIndex": 5,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:33+08:00"
    },
    {
      "id": "102",
      "siteId": "42",
      "market_name": "新金马",
      "alias_name": "新金马",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 6,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:25+08:00"
    },
    {
      "id": "953",
      "siteId": "42",
      "market_name": "新塘",
      "alias_name": "新塘",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 6,
      "isFormal": 1,
      "status": 0,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:35+08:00"
    },
    {
      "id": "64",
      "siteId": "42",
      "market_name": "大西豪",
      "alias_name": "大西豪",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 7,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:22+08:00"
    },
    {
      "id": "350",
      "siteId": "42",
      "market_name": "国大",
      "alias_name": "国大",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 8,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:28+08:00"
    },
    {
      "id": "971",
      "siteId": "42",
      "market_name": "圣迦",
      "alias_name": "圣迦",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 9,
      "isFormal": 1,
      "status": 0,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:36+08:00"
    },
    {
      "id": "464",
      "siteId": "42",
      "market_name": "佰润",
      "alias_name": "佰润",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 9,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:29+08:00"
    },
    {
      "id": "573",
      "siteId": "42",
      "market_name": "非凡",
      "alias_name": "非凡",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "0",
      "provinceId": "0",
      "sortIndex": 10,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:30+08:00"
    },
    {
      "id": "112",
      "siteId": "42",
      "market_name": "大时代",
      "alias_name": "大时代",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "197",
      "provinceId": "19",
      "sortIndex": 11,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:26+08:00"
    },
    {
      "id": "89",
      "siteId": "42",
      "market_name": "新潮都",
      "alias_name": "新潮都",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 12,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:24+08:00"
    },
    {
      "id": "97",
      "siteId": "42",
      "market_name": "金富丽",
      "alias_name": "金富丽",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 12,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:25+08:00"
    },
    {
      "id": "170",
      "siteId": "42",
      "market_name": "宝华",
      "alias_name": "宝华",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 13,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:27+08:00"
    },
    {
      "id": "989",
      "siteId": "42",
      "market_name": "景叶",
      "alias_name": "景叶",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 14,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:37+08:00"
    },
    {
      "id": "603",
      "siteId": "42",
      "market_name": "跨客城",
      "alias_name": "跨客城",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "197",
      "provinceId": "19",
      "sortIndex": 15,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:30+08:00"
    },
    {
      "id": "84",
      "siteId": "42",
      "market_name": "富壹商场",
      "alias_name": "富壹商场",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 16,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:23+08:00"
    },
    {
      "id": "542",
      "siteId": "42",
      "market_name": "柏美",
      "alias_name": "柏美",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 17,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:29+08:00"
    },
    {
      "id": "920",
      "siteId": "42",
      "market_name": "欣欣网批",
      "alias_name": "欣欣网批",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 17,
      "isFormal": 1,
      "status": 0,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:34+08:00"
    },
    {
      "id": "10218",
      "siteId": "42",
      "market_name": "拼商城",
      "alias_name": "拼商城",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 18,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "10228",
      "siteId": "42",
      "market_name": "东街",
      "alias_name": "东街",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 19,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "10239",
      "siteId": "42",
      "market_name": "大利广场",
      "alias_name": "大利广场",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 20,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "10241",
      "siteId": "42",
      "market_name": "国马",
      "alias_name": "国马",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 21,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "1154",
      "siteId": "42",
      "market_name": "华创城",
      "alias_name": "华创城",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 21,
      "isFormal": 1,
      "status": 0,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:37+08:00"
    },
    {
      "id": "662",
      "siteId": "42",
      "market_name": "十三行",
      "alias_name": "十三行",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 22,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:31+08:00"
    },
    {
      "id": "959",
      "siteId": "42",
      "market_name": "国大金纱",
      "alias_name": "国大金纱",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 22,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:36+08:00"
    },
    {
      "id": "877",
      "siteId": "42",
      "market_name": "三晟",
      "alias_name": "三晟",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "197",
      "provinceId": "19",
      "sortIndex": 23,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:34+08:00"
    },
    {
      "id": "672",
      "siteId": "42",
      "market_name": "益民",
      "alias_name": "益民",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 23,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:31+08:00"
    },
    {
      "id": "811",
      "siteId": "42",
      "market_name": "西苑鞋汇",
      "alias_name": "西苑鞋汇",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "197",
      "provinceId": "19",
      "sortIndex": 24,
      "isFormal": 1,
      "status": 0,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:32+08:00"
    },
    {
      "id": "10186",
      "siteId": "42",
      "market_name": "西街",
      "alias_name": "西街",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 24,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "604",
      "siteId": "42",
      "market_name": "鞋城",
      "alias_name": "鞋城",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 25,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 9999,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:31+08:00"
    },
    {
      "id": "813",
      "siteId": "42",
      "market_name": "沙河周边",
      "alias_name": "沙河周边",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "197",
      "provinceId": "19",
      "sortIndex": 26,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:32+08:00"
    },
    {
      "id": "106",
      "siteId": "42",
      "market_name": "南城",
      "alias_name": "南城",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 27,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:26+08:00"
    },
    {
      "id": "357",
      "siteId": "42",
      "market_name": "新百佳",
      "alias_name": "新百佳",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 28,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:28+08:00"
    },
    {
      "id": "942",
      "siteId": "42",
      "market_name": "老金马",
      "alias_name": "老金马",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 29,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:35+08:00"
    },
    {
      "id": "856",
      "siteId": "42",
      "market_name": "新天地",
      "alias_name": "新天地",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "197",
      "provinceId": "19",
      "sortIndex": 30,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:33+08:00"
    },
    {
      "id": "10272",
      "siteId": "42",
      "market_name": "东金网批",
      "alias_name": "东金网批",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 36,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "10274",
      "siteId": "42",
      "market_name": "国润",
      "alias_name": "国润",
      "market_level": 1,
      "img_url": "",
      "fatherId": "0",
      "cityId": "199",
      "provinceId": "20",
      "sortIndex": 38,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "0001-01-01T00:00:00Z"
    },
    {
      "id": "116",
      "siteId": "42",
      "market_name": "更多",
      "alias_name": "更多",
      "market_level": 1,
      "img_url": "",
      "fatherId": "63",
      "cityId": "1",
      "provinceId": "1",
      "sortIndex": 40,
      "isFormal": 1,
      "status": 1,
      "outId": "0",
      "goodsSortIndex": 0,
      "deleteTime": "0001-01-01T00:00:00Z",
      "updateTime": "2017-12-05T19:57:27+08:00"
    }
  ]
}


const reducedFilter = (data, keys) =>
  data.map(el =>
    keys.reduce((acc, key) => {
      if (key === "id") {
        acc["mid"] = el[key];
      }
      if (key === "market_name") {
        acc["displayName"] = el[key];
      }
      return acc;
    }, {})
);

const data = reducedFilter(res.items, ['id', 'market_name'])

console.log("data", data);

// [
//   { "mid": "10225", "displayName": "泓发" },
//   { "mid": "10212", "displayName": "国泰" },
//   { "mid": "73", "displayName": "女人街" },
//   { "mid": "10297", "displayName": "鸿胜" },
//   { "mid": "868", "displayName": "国投" },
//   { "mid": "102", "displayName": "新金马" },
//   { "mid": "953", "displayName": "新塘" },
//   { "mid": "64", "displayName": "大西豪" },
//   { "mid": "350", "displayName": "国大" },
//   { "mid": "971", "displayName": "圣迦" },
//   { "mid": "464", "displayName": "佰润" },
//   { "mid": "573", "displayName": "非凡" },
//   { "mid": "112", "displayName": "大时代" },
//   { "mid": "89", "displayName": "新潮都" },
//   { "mid": "97", "displayName": "金富丽" },
//   { "mid": "170", "displayName": "宝华" },
//   { "mid": "989", "displayName": "景叶" },
//   { "mid": "603", "displayName": "跨客城" },
//   { "mid": "84", "displayName": "富壹商场" },
//   { "mid": "542", "displayName": "柏美" },
//   { "mid": "920", "displayName": "欣欣网批" },
//   { "mid": "10218", "displayName": "拼商城" },
//   { "mid": "10228", "displayName": "东街" },
//   { "mid": "10239", "displayName": "大利广场" },
//   { "mid": "10241", "displayName": "国马" },
//   { "mid": "1154", "displayName": "华创城" },
//   { "mid": "662", "displayName": "十三行" },
//   { "mid": "959", "displayName": "国大金纱" },
//   { "mid": "877", "displayName": "三晟" },
//   { "mid": "672", "displayName": "益民" },
//   { "mid": "811", "displayName": "西苑鞋汇" },
//   { "mid": "10186", "displayName": "西街" },
//   { "mid": "604", "displayName": "鞋城" },
//   { "mid": "813", "displayName": "沙河周边" },
//   { "mid": "106", "displayName": "南城" },
//   { "mid": "357", "displayName": "新百佳" },
//   { "mid": "942", "displayName": "老金马" },
//   { "mid": "856", "displayName": "新天地" },
//   { "mid": "10272", "displayName": "东金网批" },
//   { "mid": "10274", "displayName": "国润" },
//   { "mid": "116", "displayName": "更多" }
// ]


return [
  {
    mid: 0,
    id: 0,
    displayName: '全部',
  }, 
  ...data
];
```

## reduceWhich

在使用设置比较规则的函数之后，返回数组的最小值/最大值

将 Array.prototype.reduce（）与 comparator 函数结合使用，以获取数组中的适当元素。

忽略第二个参数 comparator ，默认返回数组中的最小元素。
```javascript
const reduceWhich = (arr, comparator = (a, b) => a - b) =>
  arr.reduce((a, b) => (comparator(a, b) >= 0 ? b : a));

reduceWhich([1, 3, 2]); // 1
reduceWhich([1, 3, 2], (a, b) => b - a); // 3
reduceWhich(
  [
    { name: 'Tom', age: 12 },
    { name: 'Jack', age: 18 },
    { name: 'Lucy', age: 9 }
  ],
  (a, b) => a.age - b.age
); // {name: 'Lucy', age: 9}
```
## frequencies

创建一个以数组的唯一值作为键、以频率作为值的对象
```javascript
const frequencies = arr =>
  arr.reduce((a, v) => {
    a[v] = a[v] ? a[v] + 1 : 1;
    return a;
  }, {});

frequencies(['a', 'b', 'a', 'c', 'a', 'a', 'b']); // { a: 4, b: 2, c: 1 }
frequencies([...'ball']); // { b: 1, a: 1, l: 2 }
```
## countBy 

根据给定的函数对数组的元素进行分组，并返回每个组中元素的计数。

使用 Array.prototype.map（）将一个数组的值映射到一个函数或一个属性名。

使用 Array.prototype.reduce（）创建一个对象，该对象从映射结果中生成键。
```javascript
const countBy = (arr, fn) =>
  arr.map(typeof fn === 'function' ? fn : val => val[fn]).reduce((acc, val) => {
    acc[val] = (acc[val] || 0) + 1;
    return acc;
  }, {});

countBy([6.1, 4.2, 6.3], Math.floor); // {4: 1, 6: 2}
countBy(['one', 'two', 'three'], 'length'); // {3: 2, 5: 1} 字符串长度:长度出现次数
countBy([{ count: 5 }, { count: 10 }, { count: 5 }], x => x.count)
// {5: 2, 10: 1} 数组中所有对象某一属性值出现的次数
```
## groupBy

根据给定的函数对数组的元素进行分组

使用 Array.prototype.map（）将数组的值映射到函数或属性名称。

使用 Array.prototype.reduce（）创建一个对象，该对象从映射结果中生成键。
```javascript
const groupBy = (arr, fn) =>
  arr
    .map(typeof fn === 'function' ? fn : val => val[fn])
    .reduce((acc, val, i) => {
      acc[val] = (acc[val] || []).concat(arr[i]);
      return acc;
    }, {});

groupBy([6.1, 4.2, 6.3], Math.floor); // {4: [4.2], 6: [6.1, 6.3]}
groupBy(['one', 'two', 'three'], 'length'); // {3: ['one', 'two'], 5: ['three']} 字符串长度:对应长度字符串数组
```
## unionBy

将提供的函数应用于两个数组的每个数组元素之后，形成两个数组（之后去掉两个数组都有的重复元素）

只返回两个数组都存在的元素一次，形成一个新数组
```javascript
const unionBy = (a, b, fn) => {
  const s = new Set(a.map(fn));
  return Array.from(new Set([...a, ...b.filter(x => !s.has(fn(x)))]));
};

unionBy([2.1], [1.2, 2.3], Math.floor); // [2.1, 1.2]
unionBy([{ id: 1 }, { id: 2 }], [{ id: 2 }, { id: 3 }], x => x.id)
// [{ id: 1 }, { id: 2 }, { id: 3 }]
```
## chunk

将数组分块为指定大小的较小数组
```javascript
const chunk = (arr, size) =>
  Array.from({ length: Math.ceil(arr.length / size) }, (v, i) =>
    arr.slice(i * size, i * size + size)
  );

chunk([1, 2, 3, 4, 5], 2); // [[1, 2], [3, 4], [5]]
```
## combine

组合两个对象数组，使用指定的键匹配对象。
```javascript
const combine = (a, b, prop) =>
  Object.values(
    [...a, ...b].reduce((acc, v) => {
      if (v[prop])
        acc[v[prop]] = acc[v[prop]]
          ? { ...acc[v[prop]], ...v }
          : { ...v };
      return acc;
    }, {})
  );

const x = [
  { id: 1, name: 'John' },
  { id: 2, name: 'Maria' }
];
const y = [
  { id: 1, age: 28 },
  { id: 3, age: 26 },
  { age: 3}
];
combine(x, y, 'id');

// [
//  { id: 1, name: 'John', age: 28 },
//  { id: 2, name: 'Maria' },
//  { id: 3, age: 26 }
// ]
```
## orderBy

按属性和顺序对对象数组进行排序

```javascript
const orderBy = (arr, props, orders) =>
  [...arr].sort((a, b) =>
    props.reduce((acc, prop, i) => {
      if (acc === 0) {
        const [p1, p2] =
          orders && orders[i] === 'desc'
            ? [b[prop], a[prop]]
            : [a[prop], b[prop]];
        acc = p1 > p2 ? 1 : p1 < p2 ? -1 : 0;
      }
      return acc;
    }, 0)
  );

const users = [
  { name: 'fred', age: 48 },
  { name: 'barney', age: 36 },
  { name: 'fred', age: 40 },
];
orderBy(users, ['name', 'age'], ['asc', 'desc']);
// [{name: 'barney', age: 36}, {name: 'fred', age: 48}, {name: 'fred', age: 40}]
orderBy(users, ['name', 'age']);
// [{name: 'barney', age: 36}, {name: 'fred', age: 40}, {name: 'fred', age: 48}]
```

## 判断数组元素是否有重复元素（数字数组）
```javascript
isRepeat = (arr) => {
  let obj = {};
  for (let i of arr) {
    if (obj[arr[i]]){
      return true; 
    }
    obj[arr[i]] = true;
  }
  return false;
}
```
```javascript
const hasDuplicates = arr => new Set(arr).size !== arr.length;

hasDuplicates([0, 1, 1, 2]); // true
hasDuplicates([0, 1, 2, 3]); // false
```
## 取出所有不重复元素形成新数组（数字数组）
```javascript
const filterNonUnique = arr =>
  [...new Set(arr)].filter(i => arr.indexOf(i) === arr.lastIndexOf(i));

filterNonUnique([1, 2, 2, 3, 4, 4, 5]); // [1, 3, 5]
```
## 获取 URL 参数
```javascript
const getURLParameters = url =>
  (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(
    (a, v) => (
      (a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1)), a
    ),
    {}
  );

getURLParameters('google.com'); // {}
getURLParameters('http://url.com/page?name=Adam&surname=Smith');
// {name: 'Adam', surname: 'Smith'}

const getQuerys = function (url) {
  if (!url) {
    return {};
  }
  const query = url.slice(url.indexOf('?') + 1);
  const parts = query.split('&').map((p) => {
    const pos = p.indexOf('=');
    return [p.slice(0, pos), p.slice(pos + 1)];
  });
  const querys = {};
  for (const [key, value] of parts) {
    querys[key] = decodeURIComponent(value);
  }
  return querys;
};

getQuerys('google.com')
// {google.co: "google.com"} 
getQuerys('http://url.com/page?name=Adam&surname=Smith');
// {name: 'Adam', surname: 'Smith'}
```


其它
```javascript
const all = (arr, fn = Boolean) => arr.every(fn);

all([4, 2, 3], x => x > 1); // true
all([1, 2, 3]); // true
```
```javascript
/** 给html中相对路径的a标签添加域名 */
function addDomain(content, domain) {
  var achorTagReg = /<a[^>]+href=([^>]+)>/gi;
  content = content.replace(achorTagReg, function(tag, url) {
    if (/https?:|^"\/\//.test(url)) return tag;
    var relativeUrl = url.replace(/"|'/g, "").split(" ")[0];
    if (!/\//.test(relativeUrl)) return tag;
    var absoluteUrl = domain.concat(relativeUrl);
    return tag.replace(relativeUrl, absoluteUrl);
  });
  return content;
}
```

## 验证中国所有手机和电话号码正则表达式

```js
var pattern = /^((0\d{2,3}-\d{7,8})|(1(3[0-9]|4[579]|5[0-35-9]|7[0135-8]|8[0-9])\d{8}))$/;

var phoneNumber = "021-12345678";

if (pattern.test(phoneNumber)) {
  console.log("Valid phone number");
} else {
  console.log("Invalid phone number");
}
```

## 二级联动

```js
function listToTree(list) {
  let map = {},
    node,
    i;
  // map 为一级 id 数组的 id 与 索引位置 { 12: 0, 6: 1, 7: 2, 9: 3, 11: 4 }
  for (i = 0; i < list.length; i++) {
    map[list[i].id] = i;
    list[i].children = [];
  }

  for (i = 0; i < parentIdArr.length; i++) {
    node = parentIdArr[i];
    // 在一级 id 数组中找到 id 与二级 id 数组 parentId 匹配对应项的索引位置
    if (list[map[node.parentId]]) {
      list[map[node.parentId]].children.push(node);
    }
  }

  list.forEach((item) => {
    if (item.children.length === 0) {
      delete item.children;
    }
  });
  return list;
}

// 一级 id 数组
const idArr = [
  {
    id: "12",
    parentId: "-1",
    level: "1"
  },
  {
    id: "6",
    parentId: "-1",
    level: "1"
  },
  {
    id: "7",
    parentId: "-1",
    level: "1"
  },
  {
    id: "9",
    parentId: "-1",
    level: "1"
  },
  {
    id: "11",
    parentId: "-1",
    level: "1"
  }
];

// 二级 id 数组
const parentIdArr = [
  {
    parentId: "0",
    text: "a",
    level: "2"
  },
  {
    parentId: "12",
    text: "b",
    level: "2"
  },
  {
    parentId: "12",
    text: "c",
    level: "2"
  },
  {
    parentId: "9",
    text: "d",
    level: "2"
  },
  {
    parentId: "9",
    text: "e",
    level: "2"
  },
  {
    parentId: "7",
    text: "f",
    level: "2"
  }
];

console.log(listToTree(idArr));
```

