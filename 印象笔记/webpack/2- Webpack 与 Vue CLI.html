<html>
<head>
  <title>2- Webpack 与 Vue CLI</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606060 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="638"/>
<h1>2- Webpack 与 Vue CLI</h1>

<div><span><div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Webpack </span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">前端工程化</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">● 自动化</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">模块化</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">性能优化</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">使用 webpack，再也不用像以前一样到处找 npm 包，通过大量的命令行才能完成下载安装流程</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">Webpack 是德国开发者 Tobias Koppers 开发的</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">如何看 Webpack 文档（其实 Vue Cli3 把 Webpack 配置封装得很好了，用的时候看 Vue Cli 文档配置 vue.config.js。如果学 React 则更需要懂 Webpack 配置）： </span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">concepts 是要求掌握的基础概念 </span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">configuration 是 查看别人的配置是干什么的</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">API （比如 Loader 和 Plugin 的 API）和 Guides 是自己怎么去配置</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Loader 和 Plugin 是查找解决方案用的</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(118, 0, 216); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">npm install</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;"> （npm5 之后，相当于 npm install --save，包可以放在线上环境）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">写不写 --save 包都会保存在 &quot;dependencies&quot; 里</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">使用后， package.json 的 属性 &quot;</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">dependencies</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">&quot; 中会有这个包</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">（dep 线上环境）</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">什么是生产环境（</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">线上环境</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">）？</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">生产环境是服务器计算机提供的环境，您可以在其中运行网站，以供外部使用。环境包括：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● 网站运行的计算机硬件。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 操作系统（例如Linux或Windows）。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 编程语言运行库和框架库，在其上编写您的网站。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> Web 服务器基础结构，可能包含Web服务器，反向代理，负载平衡器等。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 您的网站所依赖的数据库。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">安装一个要打包到生产环境（线上用户使用的环境）的安装包时，使用 npm install --save  可以简化为:</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#000000" style="font-size: 12pt;">npm i -S</font></div></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">如果你在安装一个用于开发环境（开发者</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">开发时使用</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">的环境</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）的安装包（例如，linter, 测试库等），</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">使用后， package.json 的 属性 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">&quot;</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">devDependencies&quot; 会有这个包，表示</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这些依赖是开发用依赖库，这些库在发布的时候不用一起发布</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">（dev 开发环境）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">npm install --save-dev，可以简化为：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#000000" style="font-size: 12pt;">npm i -D</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">npm install 可以同时安装多个包：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm i 包1 包2</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第一节 webpack究竟是什么</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">创建文件夹 lesson 作为项目</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">面向过程的方式</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">缺点：</span></div><div><br/></div><div><span style="font-size: 12pt;">面向过程的写法，代码非常长，所有逻辑堆在一个 index.js 文件，最终难以维护。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">index.html</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;!DOCTYPE html&gt;</span></div><div><span style="font-size: 12pt;">&lt;html lang=&quot;en&quot;&gt;</span></div><div><span style="font-size: 12pt;">&lt;head&gt;</span></div><div><span style="font-size: 12pt;">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></div><div><span style="font-size: 12pt;">    &lt;title&gt;这是最原始的网页开发&lt;/title&gt;</span></div><div><span style="font-size: 12pt;">&lt;/head&gt;</span></div><div><span style="font-size: 12pt;">&lt;body&gt;</span></div><div><span style="font-size: 12pt;">    &lt;p&gt;这是我们的网页内容&lt;/p&gt;</span></div><div><span style="font-size: 12pt;">    &lt;div id='root'&gt;&lt;/div&gt;</span></div><div><span style="font-size: 12pt;">    &lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;</span></div><div><span style="font-size: 12pt;">&lt;/body&gt;</span></div><div><span style="font-size: 12pt;">&lt;/html&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3.jpg" type="image/jpeg" data-filename="3.jpg" width="658"/><br/></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [1].jpg" type="image/jpeg" data-filename="3.jpg" width="634"/><br/></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">面向对象</span><span style="font-size: 12pt; font-weight: bold;">的方式</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">优点：</span></div><div><br/></div><div><span style="font-size: 12pt;">逻辑分别放在不同的文件</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">缺点：</span></div><div><br/></div><div><span style="font-size: 12pt;">1、在 </span><span style="font-size: 12pt;">index.html 引入多个 js 文件，产生更多的HTTP请求，页面加载速度变慢。</span></div><div><br/></div><div><span style="font-size: 12pt;">2、在 index.js 中不能看出类（如Header、Content）对应的文件在哪，看不出文件之间的关系，如果报错不容易维护。</span></div><div><br/></div><div><span style="font-size: 12pt;">3、多个 js 文件顺序颠倒，容易出错而且令人困惑。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">4、如果 </span><span style="font-size: 12pt;">js 文件 </span><span style="font-size: 12pt;">被引入但是并没有使用，浏览器将被迫下载无用代码。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">index.html</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;!DOCTYPE html&gt;</span></div><div><span style="font-size: 12pt;">&lt;html lang=&quot;en&quot;&gt;</span></div><div><span style="font-size: 12pt;">&lt;head&gt;</span></div><div><span style="font-size: 12pt;">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></div><div><span style="font-size: 12pt;">    &lt;title&gt;这是最原始的网页开发&lt;/title&gt;</span></div><div><span style="font-size: 12pt;">&lt;/head&gt;</span></div><div><span style="font-size: 12pt;">&lt;body&gt;</span></div><div><span style="font-size: 12pt;">    &lt;p&gt;这是我们的网页内容&lt;/p&gt;</span></div><div><span style="font-size: 12pt;">    &lt;div id='root'&gt;&lt;/div&gt;</span></div><div><span style="font-size: 12pt;">    &lt;script src=&quot;./header.js&quot;&gt;&lt;/script&gt;</span></div><div><span style="font-size: 12pt;">    &lt;script src=&quot;./sidebar.js&quot;&gt;&lt;/script&gt;</span></div><div><span style="font-size: 12pt;">    &lt;script src=&quot;./content.js&quot;&gt;&lt;/script&gt;</span></div><div><span style="font-size: 12pt;">    &lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;</span></div><div><span style="font-size: 12pt;">&lt;/body&gt;</span></div><div><span style="font-size: 12pt;">&lt;/html&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Header.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function Header() {</span></div><div><span style="font-size: 12pt;">    var dom = document.getElementById('root');</span></div><div><span style="font-size: 12pt;">    var header = document.createElement('div');</span></div><div><span style="font-size: 12pt;">    header.innerText = 'header';</span></div><div><span style="font-size: 12pt;">    dom.append(header);</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Sidebar.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function Sidebar() {</span></div><div><span style="font-size: 12pt;">    var dom = document.getElementById('root');</span></div><div><span style="font-size: 12pt;">    var sidebar = document.createElement('div');</span></div><div><span style="font-size: 12pt;">    sidebar.innerText = 'sidebar';</span></div><div><span style="font-size: 12pt;">    dom.append(sidebar);</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Content.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function Content() {</span></div><div><span style="font-size: 12pt;">    var dom = document.getElementById('root');</span></div><div><span style="font-size: 12pt;">    var content = document.createElement('div');</span></div><div><span style="font-size: 12pt;">    content.innerText = 'content';</span></div><div><span style="font-size: 12pt;">    dom.append(content);</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var dom = document.getElementById('root');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">new Header();</font></div><div><font style="font-size: 12pt;">new SideBar();</font></div><div><font style="font-size: 12pt;">new Content();</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">ES Module 模块化的方式（三个js文件变成面向对象的写法，然后导出为模块）</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">优点：</span></div><div><br/></div><div><span style="font-size: 12pt;">1、index.html 只引入一个 index.js 文件。</span></div><div><br/></div><div><span style="font-size: 12pt;">2、文件之间的依赖关系非常明确，目录结构一目了然。</span></div><div><br/></div><div><span style="font-size: 12pt;">3、不用关心依赖模块顺序颠倒的问题，运行 index.js 之前会确保将</span><span style="font-size: 12pt;">模块</span><span style="font-size: 12pt;">全部引入。</span></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import Header from './header.js'</font></div><div><font style="font-size: 12pt;">import Sidebar from './sidebar.js'</font></div><div><font style="font-size: 12pt;">import Content from './content.js'</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var dom = document.getElementById('root');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">new Header()</font></div><div><font style="font-size: 12pt;">new SideBar()</font></div><div><font style="font-size: 12pt;">new Content()</font></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">浏览器不支持 import 语句，无法识别：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">Uncaught SyntaxError: Unexpected identifier</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">但是，</span><span style="font-size: 12pt; font-weight: bold;">webpack可以翻译</span> <span style="font-size: 16px; font-weight: bold;">import 语句，让浏览器可以识别：</span></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [2].jpg" type="image/jpeg" data-filename="3.jpg" width="759"/><br/></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">index.html（修改路径）</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;!DOCTYPE html&gt;</span></div><div><span style="font-size: 12pt;">&lt;html lang=&quot;en&quot;&gt;</span></div><div><span style="font-size: 12pt;">&lt;head&gt;</span></div><div><span style="font-size: 12pt;">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></div><div><span style="font-size: 12pt;">    &lt;title&gt;这是最原始的网页开发&lt;/title&gt;</span></div><div><span style="font-size: 12pt;">&lt;/head&gt;</span></div><div><span style="font-size: 12pt;">&lt;body&gt;</span></div><div><span style="font-size: 12pt;">    &lt;p&gt;这是我们的网页内容&lt;/p&gt;</span></div><div><span style="font-size: 12pt;">    &lt;div id='root'&gt;&lt;/div&gt;</span></div><div><span style="font-size: 12pt;">    </span><span style="font-size: 12pt; font-weight: bold;">&lt;script src='./dist/main.js'&gt;&lt;/script&gt;</span></div><div><span style="font-size: 12pt;">&lt;/body&gt;</span></div><div><span style="font-size: 12pt;">&lt;/html&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">index.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">// ES Moudule 模块引入方式，下面如：Header、Sidebar、Content都是模块，代表了各自的js文件</span></div><div><span style="font-size: 12pt;"><b>import Header from './header.js';</b></span></div><div><span style="font-size: 12pt;"><b>import Sidebar from './sidebar.js';</b></span></div><div><span style="font-size: 12pt;"><b>import Content from './content.js';</b></span></div><div><br/></div><div><span style="font-size: 12pt;">var dom = document.getElementById('root');</span></div><div><br/></div><div><span style="font-size: 12pt;">new Header();</span></div><div><span style="font-size: 12pt;">new Sidebar();</span></div><div><span style="font-size: 12pt;">new Content();</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">header.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">// ES Moudule 必须先 export 导出才能 import 引入</span></div><div><span style="font-size: 12pt;">function Header() {</span></div><div><span style="font-size: 12pt;">    var dom = document.getElementById('root');</span></div><div><span style="font-size: 12pt;">    var header = document.createElement('div');</span></div><div><span style="font-size: 12pt;">    header.innerText = 'header';</span></div><div><span style="font-size: 12pt;">    dom.append(header);</span></div><div><span style="font-size: 12pt;">}</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">export default Header;</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">sidebar.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function Sidebar() {</span></div><div><span style="font-size: 12pt;">    var dom = document.getElementById('root');</span></div><div><span style="font-size: 12pt;">    var sidebar = document.createElement('div');</span></div><div><span style="font-size: 12pt;">    sidebar.innerText = 'sidebar';</span></div><div><span style="font-size: 12pt;">    dom.append(sidebar);</span></div><div><span style="font-size: 12pt;">}</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">export default Sidebar;</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">content.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function Content() {</span></div><div><span style="font-size: 12pt;">    var dom = document.getElementById('root');</span></div><div><span style="font-size: 12pt;">    var content = document.createElement('div');</span></div><div><span style="font-size: 12pt;">    content.innerText = 'content';</span></div><div><span style="font-size: 12pt;">    dom.append(content);</span></div><div><span style="font-size: 12pt;">}</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">export default Content;</span></div></div><div><br/></div><div><span style="font-size: 12pt;">打开Git Bash（或终端）：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">cd lesson // lesson为当前项目文件夹</font></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">npm init -y</span></div><div><br/></div><div><span style="font-size: 12pt;">// 一直回车，yes </span></div><div><br/></div><div><span style="font-size: 12pt;">// 按默认条件在</span><span style="font-size: 12pt;">lesson中</span><span style="font-size: 12pt;">初始化一个包，</span><span style="font-size: 12pt;">创建package.json文件</span></div><div><br/></div><div><span style="font-size: 12pt;">npm webpack-cli --save-dev </span></div><div><br/></div><div><font style="font-size: 12pt;">npm webpack --save  // 通常 webpack-cli 会顺便安装 webpack，这是为了保证安装好 webpack </font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><font>// 可使用 </font>npm install webpack webpack-cli -D 代替上面两条命令</font></div><div><br/></div><div><span style="font-size: 12pt;"><b>npx webpack index.js // 使用 webpack 翻译 index.js</b></span></div><div><br/></div><div><span style="font-size: 12pt;"><b>// webpack 翻译完成后，会创建一个 dist 文件夹 和 main.js 文件，</b></span><span style="font-size: 12pt;"><b>main.js 就是 webpack 翻译后的文件</b></span></div></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [3].jpg" type="image/jpeg" data-filename="3.jpg" width="777"/><br/></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [4].jpg" type="image/jpeg" data-filename="3.jpg" width="774"/><br/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">浏览器成功识别：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [5].jpg" type="image/jpeg" data-filename="3.jpg" width="634"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">打包 index.js 文件完成！</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">虽然 Webpack 可以翻译 import 等语句，但是其他高级语法一概不认，所以它并不是 JS 翻译器（高看了 Webpack）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">课后作业：看文档</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/concepts/modules/" style="font-size: 12pt;">https://webpack.js.org/concepts/modules/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/api/" style="font-size: 12pt;">https://webpack.js.org/api/</a> </span><span style="font-size: 12pt;">Modules Methods、</span><span style="font-size: 12pt;">Modules</span> <span style="font-size: 12pt;">Variables</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第2节 Bundler：模块打包工具</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">打包 CommonJS 形式的模块</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>const Header = require('./header.js');</b></font></div><div><font style="font-size: 12pt;"><b>const Sidebar = require('./sidebar.js');</b></font></div><div><font style="font-size: 12pt;"><b>const Content = require('./content.js');</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var dom = document.getElementById('root');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">new Header();</font></div><div><font style="font-size: 12pt;">new Sidebar();</font></div><div><font style="font-size: 12pt;">new Content();</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">Header.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">// ES Moudule </span></div><div><span style="font-size: 12pt;">function Header() {</span></div><div><span style="font-size: 12pt;">    var dom = document.getElementById('root');</span></div><div><span style="font-size: 12pt;">    var header = document.createElement('div');</span></div><div><span style="font-size: 12pt;">    header.innerText = 'header';</span></div><div><span style="font-size: 12pt;">    dom.append(header);</span></div><div><span style="font-size: 12pt;">}</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;">// 必须先 exports 导出才能 import 引入</font></div><div><span style="font-weight: bold;"><font style="font-size: 12pt;">module.exports = Header;</font></span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Sidebar.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function Sidebar() {</span></div><div><span style="font-size: 12pt;">    var dom = document.getElementById('root');</span></div><div><span style="font-size: 12pt;">    var sidebar = document.createElement('div');</span></div><div><span style="font-size: 12pt;">    sidebar.innerText = 'sidebar';</span></div><div><span style="font-size: 12pt;">    dom.append(sidebar);</span></div><div><span style="font-size: 12pt;">}</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><b>module.exports = Sidebar;</b></font></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Content.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function Content() {</span></div><div><span style="font-size: 12pt;">    var dom = document.getElementById('root');</span></div><div><span style="font-size: 12pt;">    var content = document.createElement('div');</span></div><div><span style="font-size: 12pt;">    content.innerText = 'content';</span></div><div><span style="font-size: 12pt;">    dom.append(content);</span></div><div><span style="font-size: 12pt;">}</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><b>module.exports = Content;</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack index.js // 使用 webpack 翻译 index.js</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">浏览器依然可以成功识别</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [6].jpg" type="image/jpeg" data-filename="3.jpg" width="634"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">打包后的 main.js 文件会按照我们的配置放在 dist 目录下，这时，需要 index.html 文件引用打包好的 main.js 文件。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.html</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [7].jpg" type="image/jpeg" data-filename="3.jpg" width="706"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">webpack 1 需要特定的 loader 来转换 ES 2015 import，然而从 webpack 2 开始就可以开箱即用。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">但是注意，如果使用其他的 ES6+ 特性，仍然需要引入 babel。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Webpack是项目模块打包工具，这是核心！</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">发展到现在，Webpack已经</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">不仅可以打包JS文件，还可以打包CSS文件，甚至可以打包图片。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">它在内部构建了一个模块的依赖关系图，该关系图包含了项目需要的每个模块，然后将每个模块打包成一个或多个 bundle。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">webpack 模块能够以各种方式表达模块的依赖关系，几个模块的例子如下：</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">● ES2015     </span>      </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">export 和 import 语句</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 导出</font></div><div><font style="font-size: 12pt;">export function hello() {};</font></div><div><font style="font-size: 12pt;">export default {</font></div><div><font style="font-size: 12pt;">  // ...</font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// 导入</font></div><div><font style="font-size: 12pt;">import { readFile } from 'fs';</font></div><div><font style="font-size: 12pt;">import React from 'react';</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">●</span><span style="font-size: 12pt; font-weight: bold;"> CommonJS     </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 70, 53); font-weight: bold;">CommonJS 通常指 CommonJS2</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">exports、</span><span style="font-size: 12pt; font-weight: bold;">module.exports</span><span style="font-size: 12pt; font-weight: bold;"> 和 require() 语句</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">核心思想是通过 require 方法来同步地加载依赖的其他模块，通过 module.exports 导出需要暴露的接口。 </span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 导出</font></div><div><font style="font-size: 12pt;">module.exports = moduleA.someFunc;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// 导入</font></div><div><font style="font-size: 12pt;">const moduleA = require('./moduleA');</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">CommonJS1 只能通过 exports.XX = XX 的方式导出，CommonJS2 在 CommonJS1 的基础上加入了 module.exports = XX 的导出方式。</span><span style="font-size: 12pt; font-weight: bold;"> </span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">●</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;"> AMD     </span>          </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">define 和 require 语句</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">●</span><span style="font-size: 12pt; font-weight: bold;"> CSS/ Sass / Less  </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">@import 语句</span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">前端开发里的样式文件也支持模块化。</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">以 SCSS 为例，把一些常用的样式片段放进一个通用的文件里，再在另一个文件里通过 @import 语句去导入和使用这些样式片段。</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// util.scss 文件</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// 定义样式片段</font></div><div><font style="font-size: 12pt;">@mixin center {</font></div><div><font style="font-size: 12pt;">  // 水平竖直居中</font></div><div><font style="font-size: 12pt;">  position: absolute;</font></div><div><font style="font-size: 12pt;">  left: 50%;</font></div><div><font style="font-size: 12pt;">  top: 50%;</font></div><div><font style="font-size: 12pt;">  transform: translate(-50%,-50%);</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// main.scss 文件</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// 导入和使用 util.scss 中定义的样式片段</font></div><div><font style="font-size: 12pt;">@import &quot;util&quot;;</font></div><div><font style="font-size: 12pt;">#box{</font></div><div><font style="font-size: 12pt;">  @include center;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><br/></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 样式（url(...)） 或 HTML 文件(&lt;img src=...&gt;)中的图片链接（image url=...）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">webpa</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">ck 通过 loader 可以支持 各种语言 和 预处理器 编写的模块，loader 解释了 webpack 如何处理 非JavaScript 的模块 ，如何在 bundle 中引入这些</span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">dependencies。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">webpack 社区已经为各种流行语言和语言处理器构建了 loader，包括：</span></div><div><br/></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;">CoffeeScript</span></div><div><br/></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;"> TypeScript</span></div><div><br/></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;"> ESNext (Babel)</span></div><div><br/></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;"> Sass</span></div><div><br/></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;"> Less</span></div><div><br/></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;"> Stylus</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">总的来说，webpack</span><span style="font-size: 12pt; font-weight: bold;">允许任何技术栈使用 </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">构建的意思就是把源代码转换成发布到线上的可执行 JavaScrip、CSS、HTML 代码，</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">包括如下内容：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">● 代码转换：TypeScript 编译成 JavaScript、SCSS 编译成 CSS 等。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> 文件优化：压缩 JavaScript、CSS、HTML 代码，压缩合并图片等。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> 代码分割：提取多个页面的公共代码、提取首屏不需要执行部分的代码让其异步加载。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> 模块合并：在采用模块化的项目里会有很多个模块和文件，需要构建功能把模块分类合并成一个文件。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> 自动刷新：监听本地源代码的变化，自动重新构建、刷新浏览器。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> 代码校验：在代码被提交到仓库前需要校验代码是否符合规范，以及单元测试是否通过。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> 自动发布：更新完代码后，自动构建出线上发布代码并传输给发布系统。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">历史上先后出现一系列构建工具，它们各有其优缺点。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">由于前端工程师很熟悉 JavaScript ，Node.js 又可以胜任所有构建需求，所以大多数构建工具都是用 Node.js 开发的。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">构建工具</span><span style="font-size: 12pt; font-weight: bold;">是时代的产物，侧面反映出 Web 开发的发展趋势如下：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">1. 在 Npm Script 和 Grunt 时代，Web 开发要做的事情变多，流程复杂，自动化思想被引入，用于简化流程；</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">2. 在 Gulp 时代开始出现一些新语言用于提高开发效率，流式处理思想的出现是为了简化文件转换的流程，例如将 ES6 转换成 ES5。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">3.</span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">在 Webpack 时代由于单页应用的流行，一个网页的功能和实现代码变得庞大，Web 开发向模块化改进。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [8].jpg" type="image/jpeg" data-filename="3.jpg" width="769"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">一切文件：JavaScript、CSS、SCSS、图片、模板，在 Webpack 眼中都是一个个模块。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这样的好处是能清晰的描述出各个模块之间的依赖关系，以方便 Webpack 对模块进行组合和打包。 </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">经过 Webpack 的处理，最终会输出浏览器能使用的静态资源。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  // 所有模块的入口，Webpack 从入口开始递归解析出所有依赖的模块</font></div><div><font style="font-size: 12pt;">  entry: './app.js',</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    // 把入口所依赖的所有模块打包成一个文件 bundle.js 输出</font></div><div><font style="font-size: 12pt;">    filename: 'bundle.js'</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Webpack的优点是：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">专注于处理模块化的项目，能做到开箱即用一步到位；</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 通过 Plugin 扩展，完整好用又不失灵活；</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;">使用场景不仅限于 Web 开发；</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;">社区庞大活跃，经常引入紧跟时代发展的新特性，能为大多数场景找到已有的开源扩展；</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;"> 良好的开发体验。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Webpack的缺点是：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;">  </span><span style="font-size: 12pt;">只能用于采用模块化开发的项目</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Webpack 的核心概念</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● entry： 入口                           </span><span style="font-size: 12pt;">Webpack 执行构建的第一步将从 Entry 开始，可抽象成输入。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">output：输出                         </span><span style="font-size: 12pt;">输出结果，在 Webpack 经过一系列处理并得出最终想要的代码后输出结果。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> loader： 模块转换器               用于把模块原内容按照需求转换成新内容</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 插件(plugins)： 扩展插件        在 Webpack 构建流程中的特定时机注入扩展逻辑来改变构建结果或做你想要做的事情</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">Module：模块                        在 Webpack 里一切皆模块，一个模块对应着一个文件。Webpack 会从配置的 Entry 开始递归找出所有依赖的模块。</span></div><div><br/></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">Chunk：代码块                       一个 Chunk 由多个模块组合而成，用于代码合并与分割。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">第3节 </span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">搭建Webpack环境</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Webpack 本质是由 Node 实现的，所以首先必须安装 Node 环境</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Node 版本越新，Webpack 的打包速度会越快</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">新建项目目录</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">mkdir webpack-demo</font></div><div><font style="font-size: 12pt;">cd webpack-demo</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">安装Node包文件</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm init -y</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [9].jpg" type="image/jpeg" data-filename="3.jpg" width="946"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">package.json 描述了 node 项目或 node包 的信息，这个包的名字就是 webpack-demo。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">添加&quot;private&quot;，这个项目只是自己用，不用向外暴露一个index.js文件，所以&quot;main&quot;属性可以去掉，</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">确保我们安装包是私有的(private)，并且移除 main 入口，这可以防止意外发布代码。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">&quot;scripts&quot;的值也可以去掉</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [10].jpg" type="image/jpeg" data-filename="3.jpg" width="357"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">项目初始化完成</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">全局安装webpack（不推荐）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">npm install webpack webpack-cli g</span></div></div><div><br/></div><div><span style="font-size: 12pt;">不推荐全局安装 w</span><span style="font-size: 12pt;">ebpack</span><span style="font-size: 12pt;">，</span><span style="font-size: 12pt;">这会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">因为如果打包时项目是通过 webpack3 配置的，webpack版本低于全局安装的版本，就无法启动</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">npm uninstall webpack webpack-cli g</span></div></div><div><br/></div><div><span style="font-size: 12pt;">全局安装 </span><span style="font-size: 12pt;">webpack </span><span style="font-size: 12pt;">无法启动 webpack版本低 的项目</span></div><div><br/></div><div><span style="font-size: 12pt;">只能卸载全局安装的 webpack，然后安装 webpack3</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">局部安装webpack（推荐）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install webpack webpack-cli --save-dev</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">或</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install webpack webpack-cli -D</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"># npm i -D 是 npm install --save-dev 的简写，是指安装模块并保存到 package.json 的 devDependencies# 安装最新稳定版</font></div><div><font style="font-size: 12pt;">npm i -D webpack</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"># 安装指定版本</font></div><div><font style="font-size: 12pt;">npm i -D webpack@&lt;version&gt;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"># 安装最新体验版本</font></div><div><font style="font-size: 12pt;">npm i -D webpack@beta</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">推荐局部安装，原因是可防止不同项目依赖不同版本的 Webpack 而导致冲突。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">安装完后可以通过这些途径运行安装到本项目的 Webpack：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● 在项目根目录下对应的命令行里通过 node_modules/.bin/webpack 运行 Webpack 可执行文件。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 在 Npm Script 里定义的任务会优先使用本项目下的 Webpack，代码如下：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&quot;scripts&quot;: {</font></div><div><font style="font-size: 12pt;">  &quot;start&quot;: &quot;webpack --config webpack.config.js&quot;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [11].jpg" type="image/jpeg" data-filename="3.jpg" width="518"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">不能使用以下命令查看版本</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">webpack -v</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">因为 Node.j s会去全局的模块目录中找 webpack，webpack 没有安装在全局，而是安装在项目中，所以找不到 webpack 命令</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack -v</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">4.26.0</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">npx 会去当前文件夹下的 node_modules 下找 webpack 这个包（文件夹）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">所以通过 npx 可以运行存在当前文件夹 </span><span style="font-size: 12pt;">node_modules </span><span style="font-size: 12pt;">的包</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">npx的好处</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">mkdir webpack-demo2</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">cd webpack-demo2</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">npm init -y</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">安装比当前 webpack 4.2.6 更低版本</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [12].jpg" type="image/jpeg" data-filename="3.jpg" width="357"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">查看 </span><span style="font-size: 12pt; font-weight: bold;">webpack </span><span style="font-size: 12pt; font-weight: bold;">历史版本</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm info webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [13].jpg" type="image/jpeg" data-filename="3.jpg" width="550"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">安装 4.16.5 版本（老版本）</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install webpack@4.16.5 webpack-cli -D</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack -v</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">4.16.5</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">说明局部安装webpack时，不同项目中可以使用不同 webpack 版本</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">注意</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">上传时删除node_modules，等文件下载到本地后再 npm install</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">第4节 webpack 配置文件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">当 index.js 引入的是一个图片文件时，只需要拿到图片地址就可以了，并不需要把图片打包到 js 文件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">所以图片文件打包和 js 文件肯定是不同的</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">webpack 需要一个配置文件，把一个文件作为入口文件，另一个文件作为出口文件才能打包</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack index.js // 使用 webpack 翻译 index.js</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">之前可以打包是因为使用了 webpack 开发者为使用者设计的默认配置</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">编写 webpack 配置文件</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Webpack 在执行构建时默认会从项目根目录下的 webpack.config.js 文件读取配置</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在 lesson 目录下新建 webpack.config.js 文件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">webpack.config.js是 webpack 默认的配置文件名</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">如果是使用如下命令</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [14].jpg" type="image/jpeg" data-filename="3.jpg" width="662"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [15].jpg" type="image/jpeg" data-filename="3.jpg" width="901"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">报错：找不到入口文件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">而之前</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack index.js</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">会把 index.js 作为</span><span style="font-size: 12pt;">入口文件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">编写 webpack.config.js（需要使用 CommonJS 语法，因为 webpack 基于Node）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  entry: './src/index.js',</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;"><font>     </font> <font>publicPath: __dirname + &quot;/dist/&quot;,     </font></font></div><div><font style="font-size: 12pt;">      pat</font><font style="font-size: 12pt;"><font>h: path.resolve(__dirname, 'dist'), </font></font></div><div><font style="font-size: 12pt;">      filename:'bundle.js' </font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {},</font></div><div><font style="font-size: 12pt;">  plugins: [],</font></div><div><font style="font-size: 12pt;">  devServer: {}</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">{} 里的 属性 都是webpack提供的配置接口</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">entry             表示入口文件，从哪个文件开始打包</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">output         </span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">表示输出</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">打包文件，这是要在浏览器运行的文件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">filename       </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">把所有依赖的模块合并输出到一个 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">取名为 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">bundle.js</span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">文件，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">取代默认配置的 main.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">path             </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">打包好的文件的输出目录</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">path 后面必须跟一个绝对路径，所以需要引入 Node 的 path 核心模块，调用 </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">path </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">模块的 resolve 方法，</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">resolve 是 解析的意思</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">__dirname</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">变量</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">表示 </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">webpack.config.js 所在目录的当前路径，第二个参数为打包后该文件的目录名</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">publicPath    </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">js 文件内部引用其他文件的路径或者CDN地址</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">从 Webpack2 开始，已经内置了对 ES6、CommonJS、AMD 模块化语句的支持。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">注意，当在 windows 中通过调用路径去调用 webpack 时，必须使用反斜线()。例如 node_modules\.bin\webpack --config webpack.config.js。</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">现在使用</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">流程：</span></span></div><div><br/></div><div><span style="font-size: 12pt;">npx webpack 运行时，</span><span style="font-size: 12pt;">webpack 并不知道如何打包</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Webpack 寻找默认配置文件 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">webpack.config.js 才知道如何打包，如何输出，完成打包流程。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Webpack会从 index.js 出发，识别出源码中的模块化导入语句， 递归的寻找出入口文件的所有依赖，把入口和其所有依赖打包到一个单独的文件中。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">bundle.js 文件是一个可执行的 JavaScript 文件，它包含页面所依赖的三个模块 header.js 、 content.js 和 sidebar.js 及内置的 webpackBootstrap 启动函数。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">生成 bunle.js 打包文件</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [16].jpg" type="image/jpeg" data-filename="3.jpg" width="610"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [17].jpg" type="image/jpeg" data-filename="3.jpg" width="1024"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">webpack.config.js 不能重命名（例如命名为</span> <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">webpackconfig.js</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> </span><span style="font-size: 12pt; font-weight: bold;">），否则</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [18].jpg" type="image/jpeg" data-filename="3.jpg" width="903"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">报错：找不到入口文件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">假如必须要以重命名的文件 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">webpackconfig.js 为webpack的配置文件，则需要</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack --config webpackconfig.js</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">结构优化，把源代码放到src目录下</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [19].jpg" type="image/jpeg" data-filename="3.jpg" width="180"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [20].jpg" type="image/jpeg" data-filename="3.jpg" width="1017"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [21].jpg" type="image/jpeg" data-filename="3.jpg" width="610"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">npm scripts（使用npm run 打包）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在 package.json 会有一个标签配置项 &quot;scripts&quot;，可以在对象里配置命令</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [22].jpg" type="image/jpeg" data-filename="3.jpg" width="820"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Npm Script 则是 Npm 内置的一个功能，是任务的执行者。</span></div><div><br/></div><div><span style="font-size: 12pt;">里面的 scripts 字段是一个对象，每个属性对应一段 Shell 脚本，以上代码定义了一个任务 bundle。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">其底层实现原理是通过调用 Shell 去运行脚本命令，例如执行 npm run bundle 命令等同于执行命令 webpack。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run bundle</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">npm run bunle 实际上是在运行 package.json 的 bundle 命令，也就相当于运行webpack命令，会到当前项目的node_module目录下找webpack文件夹，与 npx webpack 类似</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [23].jpg" type="image/jpeg" data-filename="3.jpg" width="610"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">把 index.html 放进 dist 打包目录下</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [24].jpg" type="image/jpeg" data-filename="3.jpg" width="774"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [25].jpg" type="image/jpeg" data-filename="3.jpg" width="1307"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">加载不了main.js，把原来的 src 路径改为 bundle.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [26].jpg" type="image/jpeg" data-filename="3.jpg" width="678"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">正常执行</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [27].jpg" type="image/jpeg" data-filename="3.jpg" width="634"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">三种运行webpack方式</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 全局</font></div><div><font style="font-size: 12pt;">webpack index.js</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// 局部</font></div><div><font style="font-size: 12pt;">npx webpack index.js</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// npm scripts</font></div><div><font style="font-size: 12pt;">npm run bundle --&gt; webapck</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">都是在命令行运行webpack命令</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">之前安装的 webpack-cli 的作用就是使我们</span><span style="font-size: 12pt;">可以</span><span style="font-size: 12pt;">在命令行运行 webpack 命令</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">课后作业：看文档，巩固知识点</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/guides/" style="font-size: 12pt;">https://webpack.js.org/guides/</a> Getting Started的内容</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">前4节 总流程</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">mkdir webpack-demo  </font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">cd webpack-demo           </font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">npm init -y             // --&gt; 修改package.json</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">npm install webpack webpack-cli -D  //</font> --&gt; <font style="font-size: 12pt;">目录优化</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">touch webpack.config.js // --&gt; 编写webpack.config.js</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">npx webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第5节 浅析 Webpack 打包输出内容</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">打包输出提示如下：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [28].jpg" type="image/jpeg" data-filename="3.jpg" width="863"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Hash：本次打包对应的唯一值</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Version：这次打包的webpack版本</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Time：打包耗时</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Asset： 打包出来的文件名</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Size：文件大小</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Chunks： 该文件</span><span style="font-size: 12pt;">（</span><span style="font-size: 12pt;">与其他文件</span><span style="font-size: 12pt;">）</span><span style="font-size: 12pt;">的ID值</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Chunk Name：该文件对应的名字，在 entry 里为文件配置的名字</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  <b>entry: './src/index.js' // 是 entry: {main: './src/index.js'} 的简写</b></font></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco;"><font style="font-size: 12pt;">}</font></span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">之后是打包顺序</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [29].jpg" type="image/jpeg" data-filename="3.jpg" width="691"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这个警告的意思是没有指定打包的 模式 / 环境</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;"><font>  <b>mode: 'production' // 默认环境为生产环境，即</b></font><b>线上用户会使用的环境，打包的代码会压缩优化</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">只要匹配了 mode 警告就会消除，虽然底层已经</span><span style="font-size: 12pt;">默认环境为生产环境</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  <b>mode: 'development' // 打包的代码不会压缩优化</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第二章 Webpack的核心概念</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第一节 loader是什么？</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">index.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><b style="font-size: 12pt;">import avatar from './avartar.jpg';</b></div><div><b><br/></b></div><div><font style="font-size: 12pt;"><b><font>console.log(avartar); // </font>e49823921af3dad34a48ed93700b95ac.jpg</b></font></div><div><br/></div><div><span style="font-size: 12pt;">var dom = document.getElementById('root');</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [30].jpg" type="image/jpeg" data-filename="3.jpg" width="822"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">file-loader</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: 'production',</font></div><div><font style="font-size: 12pt;">  entry: {main: './src/index.js'},</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, 'dist'),</font></div><div><font style="font-size: 12pt;">    filename: 'bundle.js'</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  <b>module: {</b></font></div><div><font style="font-size: 12pt;"><b>    rules: [{</b></font></div><div><font style="font-size: 12pt;"><b>      test: /\.jpg$/,</b></font></div><div><font style="font-size: 12pt;"><b>      use: {</b></font></div><div><font style="font-size: 12pt;"><b>        loader: 'file-loader'</b></font></div><div><font style="font-size: 12pt;"><b>      }</b></font></div><div><font style="font-size: 12pt;"><b>    }]</b></font></div><div><font style="font-size: 12pt;"><b>  }</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">webpack 默认知道如何打包处理 JS 文件的，但它不知道该怎么打包图片文件，这时就要告诉 webpack 这个模块该怎么办</span></div><div><br/></div><div><span style="font-size: 12pt;">所以要在 webpack.config.js 配置文件中告诉 webpack 怎么做</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">webpack 会去 module 配置找才知道怎么做</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">module   决定如何处理项目的模块</span></font></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">rules        </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">配置</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">规则</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，它是一个数组，写法固定，表示</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">一组规则，告诉 Webpack 在遇到哪些文件时使用哪些 Loader 去加载和转换</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">test          表示用正则去匹配要用该 loader 转换的文件</span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">use           </span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">use 属性的值需要是一个由 Loader （默认配置为字符串形式 或 自定义配置为对象形式）组成的（一个Loader为对象形式 或 多</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">个Loader为</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">数组形式）</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">              </span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这里的 use 表示</span></span><b style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold; color: rgb(255, 0, 0);">求助 file-loader 完成打包</span></b></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install file-loader -D</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">npx webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">file-loader 原理：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">发现引入图片模块，把图片移动到 dist 目录下，得到图片相对 dist 目录的名称作为返回值，返回到引入模块 index.js 中，变成 avatar 的 值</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var avatar = e49823921af3dad34a48ed93700b95ac.jpg // dist目录下的</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">loader 是一个打包方案</span></font><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">允许打包除 JavaScript 之外的任何静态资源，</span><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">使得webpack能针对特定文件进行打包</span></font></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">vue-loader</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import avatar from &quot;./avatar.jpg&quot;;</font></div><div><font style="font-size: 12pt;"><b>import Header from &quot;./header.vue&quot;;</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var img = new Img();</font></div><div><font style="font-size: 12pt;">img.src = avatar;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var root = document.getElementById('root');</font></div><div><font style="font-size: 12pt;">root.append(img);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;production&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;file-loader&quot;</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      <b>{</b></font></div><div><font style="font-size: 12pt;"><b>        test: /\.vue$/,</b></font></div><div><font style="font-size: 12pt;"><b>        use: {</b></font></div><div><font style="font-size: 12pt;"><b>          loader: &quot;vue-loader&quot;</b></font></div><div><font style="font-size: 12pt;"><b>        }</b></font></div><div><font style="font-size: 12pt;"><b>      }</b></font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install vue-loader -D</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">npx webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第二节 使用 loader 打包静态资源（图片篇）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">使用 loader 打包图片</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">如何使打包后的图片文件名不变？</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>import avatar from &quot;./avatar.jpg&quot;;</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var img = new Img();</font></div><div><font style="font-size: 12pt;">img.src = avatar;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var root = document.getElementById('root');</font></div><div><font style="font-size: 12pt;">root.append(img);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">为 file-loader 额外配置参数，放到 options 配置项里</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;production&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        <b>test: /\.jpg|png|gif$/,</b></font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;file-loader&quot;,</font></div><div><font style="font-size: 12pt;">          <b>options: {</b></font></div><div><font style="font-size: 12pt;"><b>            // 占位符语法 </b></font></div><div><font style="font-size: 12pt;"><b>            name: &quot;[name]_[hash].[ext]&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>            outputPath: &quot;images/&quot;</b></font></div><div><font style="font-size: 12pt;"><b>          }</b></font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">解释说明：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">test: /\.jpg|png|gif$/      // 打包多种格式图片文件，正则表达式</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">options: {}                 // 通过 Object 给 Loader 传入属性</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">name: &quot;[name]_[hash].[ext]&quot; // name为打包后文件的名字格式，是原图的名字和后缀（这里加了_ 和 hash值 作为名字）</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">outputPath: &quot;images/&quot;       // 打包到某个目录下，指定图片打包目录，而不是 dist 目录</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">执行命令：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npx webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [31].jpg" type="image/jpeg" data-filename="3.jpg" width="345"/><br/></span></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">url-loader（与 file-loader 类似）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          <b>loader: &quot;url-loader&quot;,</b></font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install url-loader -D</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">npx webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [32].jpg" type="image/jpeg" data-filename="3.jpg" width="339"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">bundle.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [33].jpg" type="image/jpeg" data-filename="3.jpg" width="876"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [34].jpg" type="image/jpeg" data-filename="3.jpg" width="711"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">发现图片被打包到 bundle.js 里了，虽然减少了一次HTTP请求，如果图片特别大 bundle.js 也会特别大，</span><span style="font-size: 12pt;">影响页面</span><span style="font-size: 12pt;">加载</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">在图片小的时候可以使用 url-loader 打包，否则使用file-loader</span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">打包到 dist 目录下，页面才能更快加载</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;url-loader&quot;,</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;,</font></div><div><font style="font-size: 12pt;">           <b> limit: 10240</b></font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>limit: 10240 // 表示大于10KB以图片形式打包到image目录下，小于10KB以Base64形式打包到bunle.js</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [35].jpg" type="image/jpeg" data-filename="3.jpg" width="343"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">课后作业：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">文档的 file-loader 和 url-loader API</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><a href="https://webpack.js.org/loaders/file-loader/" style="font-size: 12pt;">https://webpack.js.org/loaders/file-loader/</a></div><div><br/></div><div><a href="https://webpack.js.org/loaders/url-loader/" style="font-size: 12pt;">https://webpack.js.org/loaders/url-loader/</a></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第3节 使用 Loader 打包静态资源（样式篇）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">css 的打包</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">需求：把图片变成 150 x 150</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import avatar from './avatar.jpg';</font></div><div><font style="font-size: 12pt;"><b>import './index.css';</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var img = new Image();</font></div><div><font style="font-size: 12pt;">img.src = avatar;</font></div><div><font style="font-size: 12pt;">img.classList.add('avatar');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var root = document.getElementById(&quot;root&quot;);</font></div><div><font style="font-size: 12pt;">root.append(img);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">让 index.js 拥有有类名变量 avatar，为 img 元素添加类名</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.css</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">@import './avatar.css'</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">avatar.css</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">.avatar {</font></div><div><font style="font-size: 12pt;">  width: 150px;</font></div><div><font style="font-size: 12pt;">  height: 150px;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">发现无法打包 CSS（注意：没安装或者模块的路径错误也会出现打包错误）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [36].jpg" type="image/jpeg" data-filename="3.jpg" width="796"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">webpack.config.js 需要使用相应的 loader 打包</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">打包CSS时必须要有两个 loder ： style-loader 和 css-loader</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;url-loader&quot;,</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;,</font></div><div><font style="font-size: 12pt;">            limit: 10240</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      <b>{</b></font></div><div><font style="font-size: 12pt;"><b>        test: /\.css$/,</b></font></div><div><font style="font-size: 12pt;"><b><font>        use: ['style-loader', 'css-loader?</font>minimize']   </b></font> <b style="font-size: 12pt;">     </b></div><div><font style="font-size: 12pt;"><b>      }</b></font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">通过 querystring </span><span style="font-size: 12pt; font-weight: bold;">给 Loader 传入属性</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">每一个 Loader 都可以通过 URL querystring 的方式传入参数，例如 css-loader?minimize 中的 minimize 告诉 css-loader 要开启 CSS 压缩。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">使用多个 Loader 时 </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">use 不能是一个对象，而是一个数组</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>npm install style-loader css-loader -D</b></font></div><div><font style="font-size: 12pt;"><b><br/></b></font></div><div><font style="font-size: 12pt;"><b>npm run bundle //或 npx webpack</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [37].jpg" type="image/jpeg" data-filename="3.jpg" width="350"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">流程：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">引入CSS =&gt; </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">style-loader 和 css-loader 打包 =&gt; JS有样式相关内容 =&gt; img添加类名应用样式</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">style-loader 和 css-loader 的作用</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">css-loader    负责分析多个CSS文件的关系，并合并成一段CSS</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">style-loader </span></span> <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(255, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">把 CSS 内容用 JavaScript 里的字符串存储起来， 在网页执行 JavaScript 时通过 DOM 操作动态地往 HTML &lt;head&gt; 标签里插入 HTML &lt;style &gt;标签。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">也许你认为这样做会导致 JavaScript 文件变大并导致加载网页时间变长，想让 Webpack 单独输出 CSS 文件（可以</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">通过 Webpack Plugin 机制来实现</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Sass 的打包</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">修改 index.css 为 </span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.scss</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">body{</font></div><div><font style="font-size: 12pt;">  .avatar {</font></div><div><font style="font-size: 12pt;">    width: 150px;</font></div><div><font style="font-size: 12pt;">    height: 150px;</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">sass-loader 依赖于 node-sass，所以要安装 node-sass（需要科学上网）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;url-loader&quot;,</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;,</font></div><div><font style="font-size: 12pt;">            limit: 10240</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      },</font></div><div><b><font style="font-size: 12pt;">      {</font></b></div><div><b><font style="font-size: 12pt;">        test: /\.scss$/,</font></b></div><div><b><font style="font-size: 12pt;">        use: ['style-loader', 'css-loader', 'sass-loader']         </font></b></div><div><b><font style="font-size: 12pt;">      }</font></b></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Loader 的执行顺序是：从下到上，从右到左的</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">sass-loade</span><span style="font-size: 12pt;">r 处理 =&gt; css-loader 处理 =&gt; style-loader 处理</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">添加厂商前缀的打包</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.scss</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">body{</font></div><div><font style="font-size: 12pt;">  .avatar {</font></div><div><font style="font-size: 12pt;">    width: 150px;</font></div><div><font style="font-size: 12pt;">    height: 150px;</font></div><div><font style="font-size: 12pt;">    transform: translate(100px, 100px);</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;url-loader&quot;,</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;,</font></div><div><font style="font-size: 12pt;">            limit: 10240</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.scss$/,</font></div><div><font style="font-size: 12pt;">        <b>use: [</b></font></div><div><font style="font-size: 12pt;"><b>          'style-loader',</b></font></div><div><font style="font-size: 12pt;"><b>          'css-loader',</b></font></div><div><font style="font-size: 12pt;"><b>          'sass-loader',</b></font></div><div><font style="font-size: 12pt;"><b>          'postcss-loader'</b></font></div><div><font style="font-size: 12pt;"><b>        ]    </b>     </font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>npm install autoprefixer -D</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">postcss.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    require('autoprefixer')</font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run bundle</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">给 css-loader 增加配置项</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">新建 avatar.scss</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">body {</font></div><div><font style="font-size: 12pt;">  .avatar {</font></div><div><font style="font-size: 12pt;">    background: red;</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.scss</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>@import './avatar.scss';</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">body {</font></div><div><font style="font-size: 12pt;">  .avatar {</font></div><div><font style="font-size: 12pt;">    width: 150px;</font></div><div><font style="font-size: 12pt;">    height: 150px;</font></div><div><font style="font-size: 12pt;">    transform: translate(100px, 100px);</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这里相当于有两个 scss 文件要处理，所以还要走一次 postcss-loader 和 sass-loader，保证在 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">@import 之前也要从下往上走两个 loader，需要额外配置 </span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">importLoaders: 2</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;url-loader&quot;,</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;,</font></div><div><font style="font-size: 12pt;">            limit: 10240</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.scss$/,</font></div><div><font style="font-size: 12pt;">        use: [</font></div><div><font style="font-size: 12pt;">          'style-loader',</font></div><div><font style="font-size: 12pt;">          <b>{</b></font></div><div><font style="font-size: 12pt;"><b>            loader: 'css-loader',</b></font></div><div><font style="font-size: 12pt;"><b>            options: {</b></font></div><div><font style="font-size: 12pt;"><b>              importLoaders: 2</b></font></div><div><font style="font-size: 12pt;"><b>            }</b></font></div><div><font style="font-size: 12pt;"><b>          }</b>,</font></div><div><font style="font-size: 12pt;">          'sass-loader',</font></div><div><font style="font-size: 12pt;">          'postcss-loader'</font></div><div><font style="font-size: 12pt;">        ]         </font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run bundle</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">CSS打包的模块化</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">新建 </span><span style="font-size: 12pt; font-weight: bold;">createAvatar.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>import avatar from './avatar.jpg';</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">function createAvatar() {</font></div><div><font style="font-size: 12pt;">  var img = new Image()</font></div><div><font style="font-size: 12pt;">  img.src = avatar</font></div><div><font style="font-size: 12pt;">  img.classList.add(&quot;avatar&quot;)</font></div><div><font style="font-size: 12pt;">  var root = document.getElementById(&quot;root&quot;)</font></div><div><font style="font-size: 12pt;">  root.append(img)</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><b><br/></b></font></div><div><font style="font-size: 12pt;"><b>export default createAvatar</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>import avatar from './avatar.jpg';</b></font></div><div><font style="font-size: 12pt;"><b>import './index.scss';</b></font></div><div><font style="font-size: 12pt;"><b>import createAvatar from &quot;./createAvatar.js&quot;</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>new createAvatar();</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var img = new Image();</font></div><div><font style="font-size: 12pt;">img.src = avatar;</font></div><div><font style="font-size: 12pt;">img.classList.add('avatar');</font></div><div><font style="font-size: 12pt;">var root = document.getElementById(&quot;root&quot;);</font></div><div><font style="font-size: 12pt;">root.append(img);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run bundle</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">两张图片样式相同，说明 </span><span style="font-size: 12pt;">import './index.scss' </span><span style="font-size: 12pt;">的样式</span><span style="font-size: 12pt;">; </span><span style="font-size: 12pt;"> 不仅作用于 </span><span style="font-size: 12pt;">index.js 文件 &lt;img&gt;标签 </span><span style="font-size: 12pt;">，还作用于  </span><span style="font-size: 12pt;">createAvatar.js 文件 </span> <span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;img&gt;标签</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;">：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [38].jpg" type="image/jpeg" data-filename="3.jpg" width="1295"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 16px; color: rgb(255, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">相当于样式是全局的，同时改两个文件的样式很容易出现样式冲突的问题</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;url-loader&quot;,</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;,</font></div><div><font style="font-size: 12pt;">            limit: 10240</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.scss$/,</font></div><div><font style="font-size: 12pt;">        use: [</font></div><div><font style="font-size: 12pt;">          'style-loader',</font></div><div><font style="font-size: 12pt;">          {</font></div><div><font style="font-size: 12pt;">            loader: 'css-loader',</font></div><div><font style="font-size: 12pt;">            options: {</font></div><div><font style="font-size: 12pt;">              importLoaders: 2,</font></div><div><font style="font-size: 12pt;">              <b>modules: true</b></font></div><div><font style="font-size: 12pt;">            }</font></div><div><font style="font-size: 12pt;">          },</font></div><div><font style="font-size: 12pt;">          'sass-loader',</font></div><div><font style="font-size: 12pt;">          'postcss-loader'</font></div><div><font style="font-size: 12pt;">        ]         </font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">modules: true 表示开启CSS模块化打包</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">修改 index.js</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import avatar from './avatar.jpg';</font></div><div><font style="font-size: 12pt;"><b>import style from './index.scss';</b></font></div><div><font style="font-size: 12pt;">import createAvatar from &quot;./createAvatar.js&quot;;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">new createAvatar();</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var img = new Image();</font></div><div><font style="font-size: 12pt;">img.src = avatar;</font></div><div><font style="font-size: 12pt;"><b>img.classList.add(style.avatar);</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var root = document.getElementById(&quot;root&quot;);</font></div><div><font style="font-size: 12pt;">root.append(img);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run bundle</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">new createAvatar() 的第一张图片什么样式都没有，CSS模块化保证了一个文件的独立，不会与其他文件耦合或冲突：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [39].jpg" type="image/jpeg" data-filename="3.jpg" width="1274"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">将以下代码放入 </span><span style="font-size: 12pt;">createAvatar.js 也可以使第一张图片变成 150 x 150</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import style from './index.scss';</font></div><div><font style="font-size: 12pt;">img.classList.add(style.avatar);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">字体文件的打包</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: { main: &quot;./src/index.js&quot; },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;bundle.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;url-loader&quot;,</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;,</font></div><div><font style="font-size: 12pt;">            limit: 10240</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.scss$/,</font></div><div><font style="font-size: 12pt;">        use: [</font></div><div><font style="font-size: 12pt;">          &quot;style-loader&quot;,</font></div><div><font style="font-size: 12pt;">          {</font></div><div><font style="font-size: 12pt;">            loader: &quot;css-loader&quot;,</font></div><div><font style="font-size: 12pt;">            options: {</font></div><div><font style="font-size: 12pt;">              importLoaders: 2</font></div><div><font style="font-size: 12pt;">            }</font></div><div><font style="font-size: 12pt;">          },</font></div><div><font style="font-size: 12pt;">          &quot;sass-loader&quot;,</font></div><div><font style="font-size: 12pt;">          &quot;postcss-loader&quot;</font></div><div><font style="font-size: 12pt;">        ]</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">     <b> {</b></font></div><div><font style="font-size: 12pt;"><b>        test: /\.eot|svg|ttf|woff|woff2$/,</b></font></div><div><font style="font-size: 12pt;"><b>        use: {</b></font></div><div><font style="font-size: 12pt;"><b>          loader: 'file-loader',</b></font></div><div><font style="font-size: 12pt;"><b>          options: {</b></font></div><div><font style="font-size: 12pt;"><b>            name: '[name].[ext]'</b></font></div><div><font style="font-size: 12pt;"><b>          }</b></font></div><div><font style="font-size: 12pt;"><b>        }</b></font></div><div><font style="font-size: 12pt;"><b>      }</b></font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">iconfont.scss 改为 index.scss</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">@font-face {font-family: &quot;iconfont&quot;;</font></div><div><font style="font-size: 12pt;">  src: url('./fonts/iconfont.eot?t=1590247624840'); /* IE9 */</font></div><div><font style="font-size: 12pt;">  src: url('./fonts/iconfont.eot?t=1590247624840#iefix') format('embedded-opentype'), /* IE6-IE8 */</font></div><div><font style="font-size: 12pt;">  url('data:application/x-font-woff2;charset=utf-8;base64,d09G=...') format('woff2'),</font></div><div><font style="font-size: 12pt;">  url('./fonts/iconfont.woff?t=1590247624840') format('woff'),</font></div><div><font style="font-size: 12pt;">  url('./fonts/iconfont.ttf?t=1590247624840') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+ */</font></div><div><font style="font-size: 12pt;">  url('./fonts/iconfont.svg?t=1590247624840#iconfont') format('svg'); /* iOS 4.1- */</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">.iconfont {</font></div><div><font style="font-size: 12pt;">  font-family: &quot;iconfont&quot; !important;</font></div><div><font style="font-size: 12pt;">  font-size: 16px;</font></div><div><font style="font-size: 12pt;">  font-style: normal;</font></div><div><font style="font-size: 12pt;">  -webkit-font-smoothing: antialiased;</font></div><div><font style="font-size: 12pt;">  -moz-osx-font-smoothing: grayscale;</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">.icon-all:before {</font></div><div><font style="font-size: 12pt;">  content: &quot;\e6ef&quot;;</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">.icon-gift:before {</font></div><div><font style="font-size: 12pt;">  content: &quot;\e6f9&quot;;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var root = document.getElementById('root');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">import './index.scss';</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">root.innerHTML = '&lt;div class=&quot;iconfont icon-gift&quot;&gt;&lt;/div&gt;'</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run bundle</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [40].jpg" type="image/jpeg" data-filename="3.jpg" width="372"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [41].jpg" type="image/jpeg" data-filename="3.jpg" width="344"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">课后作业：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">1、文档指南的资源管理部分</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/guides/asset-management/" style="font-size: 12pt;">https://webpack.js.org/guides/asset-management/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://www.webpackjs.com/guides/asset-management/" style="font-size: 12pt;">https://www.webpackjs.com/guides/asset-management/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">2、有关 loader 部分</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/loaders/css-loader/" style="font-size: 12pt;">https://webpack.js.org/loaders/css-loader/</a></span></div><div><br/></div><div><a href="https://webpack.js.org/loaders/style-loader/" style="font-size: 12pt;">https://webpack.js.org/loaders/style-loader/</a></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/loaders/file-loader/" style="font-size: 12pt;">https://webpack.js.org/loaders/file-loader/</a></span></div><div><br/></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/loaders/postcss-loader/" style="font-size: 12pt;">https://webpack.js.org/loaders/postcss-loader/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/loaders/sass-loader/" style="font-size: 12pt;">https://webpack.js.org/loaders/sass-loader/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第四节 使用 plugins 让打包更便捷</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Plugin 是用来扩展 Webpack 功能的，通过在构建流程里注入钩子实现，它给 Webpack 带来了很大的灵活性。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">之前需要在打包之前手动地 index.html 放进 dist 目录下，这样太麻烦了，</span><span style="font-size: 12pt;">html-webapack-plugin 就能解决这个问题</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">html-webapack-plugin 会在打包结束后，自动生成一个html文件，并把打包生成的 JS 引入到这个html文件</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install html-webpack-plugin -D</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">如果直接</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>var HtmlWebpackPlugin = require('html-webpack-plugin');</b></font></div><div><font style="font-size: 12pt;">var path = require('path');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  entry: 'index.js',</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, 'dist'),</font></div><div><font style="font-size: 12pt;">    filename: 'bundle.js'</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  <b>plugins: [new HtmlWebpackPlugin()]</b></font></div><div><font style="font-size: 12pt;">};</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">那么就会在 dist 目录下生成如下 html 文件：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.html</span></span><span style="font-size: 12pt; font-weight: bold;">（打包后）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;!DOCTYPE html&gt;</font></div><div><font style="font-size: 12pt;">&lt;html&gt;</font></div><div><font style="font-size: 12pt;">  &lt;head&gt;</font></div><div><font style="font-size: 12pt;">    &lt;meta charset=&quot;UTF-8&quot;&gt;</font></div><div><font style="font-size: 12pt;">    &lt;title&gt;webpack App&lt;/title&gt;</font></div><div><font style="font-size: 12pt;">  &lt;/head&gt;</font></div><div><font style="font-size: 12pt;">  &lt;body&gt;</font></div><div><font style="font-size: 12pt;">    <b>&lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;</b></font></div><div><font style="font-size: 12pt;">  &lt;/body&gt;</font></div><div><font style="font-size: 12pt;">&lt;/html&gt;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">问题：html文件 少了标签</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;"><b>const  HtmlWebpackPlugin = require('html-webpack-plugin');</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: 'development',</font></div><div><font style="font-size: 12pt;">  entry: './src/index.js',</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, 'dist'),</font></div><div><font style="font-size: 12pt;">    filename: 'bundle.js'</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: 'url-loader',</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: '[name]_[hash].[ext]',</font></div><div><font style="font-size: 12pt;">            outputPath: 'images/',</font></div><div><font style="font-size: 12pt;">            limit: 10240</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;"><b>  plugins: [</b></font></div><div><font style="font-size: 12pt;"><b>    new HtmlWebpackPlugin({</b></font></div><div><font style="font-size: 12pt;"><b>      template: './src/index.html'</b></font></div><div><font style="font-size: 12pt;"><b>    })</b></font></div><div><font style="font-size: 12pt;"><b>  ]</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">webpack // 之前使用npm rin bundle，可用 webpack 代替</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">index.html</span><span style="font-size: 12pt; font-weight: bold;">（打包后）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;!DOCTYPE html&gt;</font></div><div><font style="font-size: 12pt;">&lt;html&gt;</font></div><div><font style="font-size: 12pt;">  &lt;head&gt;</font></div><div><font style="font-size: 12pt;">    &lt;meta charset=&quot;UTF-8&quot;&gt;</font></div><div><font style="font-size: 12pt;">    <b>&lt;title&gt;这是最原始的网页开发&lt;/title&gt;</b></font></div><div><font style="font-size: 12pt;">  &lt;/head&gt;</font></div><div><font style="font-size: 12pt;">  &lt;body&gt;</font></div><div><font style="font-size: 12pt;">    <b>&lt;p&gt;这是我们的网页内容&lt;/p&gt;</b></font></div><div><font style="font-size: 12pt;"><b>    &lt;div id='root'&gt;&lt;/div&gt;</b></font></div><div><font style="font-size: 12pt;">    <b>&lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;</b></font></div><div><font style="font-size: 12pt;">  &lt;/body&gt;</font></div><div><font style="font-size: 12pt;">&lt;/html&gt;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">plugin 在webpack运行到某个时刻</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">自动帮你做一些事</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（这里是打包结束时</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">把打包生成的结果注入到 html</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，不同 plugin 不同时刻）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">问题2：如果 output 的 filename 只是改名，那么重复打包就会多出一个拥有相同代码的 JS 文件，只是不同名而已</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">要避免这个问题，就要</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">先把 dist 目录删除再打包，这时就需要</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> clean-webpack-plugin 的帮忙</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install clean-webpack-plugin -D</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require('html-webpack-plugin');</font></div><div><font style="font-size: 12pt;"><b>const { CleanWebpackPlugin } = require('clean-webpack-plugin');</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: &quot;./src/index.js&quot;,</font></div><div><font style="font-size: 12pt;"><b>  output: {</b></font></div><div><font style="font-size: 12pt;"><b>    path: path.resolve(__dirname, &quot;dist&quot;),</b></font></div><div><font style="font-size: 12pt;"><b>    filename: &quot;index.js&quot;</b></font></div><div><font style="font-size: 12pt;"><b>  }</b>,</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;url-loader&quot;,</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;,</font></div><div><font style="font-size: 12pt;">            limit: 10240</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: &quot;./src/index.html&quot;</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    <b>new CleanWebpackPlugin()</b></font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div><div><br/></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [42].jpg" type="image/jpeg" data-filename="3.jpg" width="205"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">clean-webpack-plugin </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">默认会将webpack的output.path目录中的所有文件将被删除一次，但是</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">目录本身不会</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（打包之前运行）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://github.com/johnagan/clean-webpack-plugin#options-and-defaults-optional" style="font-size: 12pt;">https://github.com/johnagan/clean-webpack-plugin#options-and-defaults-optional</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">问题3：使用 plugin 对 CSS 打包</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">使用 </span><span style="font-size: 12pt; font-weight: bold;">mini-css-extract-plugin</span> <span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">提取出 JavaScript 代码里的 CSS 到一个单独的文件，</span></span><span style="font-size: 12pt; font-weight: bold;">生成一个新的 CSS 文件，并在 HTML 文件中使用 &lt;link&gt; 引入</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js（打包前）</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import avatar from &quot;./avatar.jpg&quot;;</font></div><div><font style="font-size: 12pt;"><b>import './index.css';</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var root = document.getElementById(&quot;root&quot;);</font></div><div><font style="font-size: 12pt;">var img = new Image();</font></div><div><font style="font-size: 12pt;">img.src = avatar;</font></div><div><font style="font-size: 12pt;">root.append(img);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install mini-css-extract-plugin -D</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require('html-webpack-plugin');</font></div><div><font style="font-size: 12pt;">const { CleanWebpackPlugin } = require(&quot;clean-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;"><b>const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  entry: &quot;./src/index.js&quot;,</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;index.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.jpg|png|gif$/,</font></div><div><font style="font-size: 12pt;">        use: {</font></div><div><font style="font-size: 12pt;">          loader: &quot;url-loader&quot;,</font></div><div><font style="font-size: 12pt;">          options: {</font></div><div><font style="font-size: 12pt;">            name: &quot;[name]_[hash].[ext]&quot;,</font></div><div><font style="font-size: 12pt;">            outputPath: &quot;images/&quot;,</font></div><div><font style="font-size: 12pt;">            limit: 10240</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.css$/,</font></div><div><font style="font-size: 12pt;">        <b>use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;]</b></font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: &quot;./src/index.html&quot;</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new CleanWebpackPlugin(),</font></div><div><font style="font-size: 12pt;">    <b>new MiniCssExtractPlugin({filename: 'index.css'})</b></font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">webpack</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.html（打包后）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;!DOCTYPE html&gt;</font></div><div><font style="font-size: 12pt;">&lt;html&gt;</font></div><div><font style="font-size: 12pt;">&lt;head&gt;</font></div><div><font style="font-size: 12pt;">  &lt;meta charset=&quot;UTF-8&quot;&gt;</font></div><div><font style="font-size: 12pt;">  &lt;title&gt;这是最原始的网页开发&lt;/title&gt;</font></div><div><font style="font-size: 12pt;">  <b>&lt;link href=&quot;index.css&quot; rel=&quot;stylesheet&quot;&gt;</b></font></div><div><font style="font-size: 12pt;">&lt;/head&gt;</font></div><div><font style="font-size: 12pt;">&lt;body&gt;</font></div><div><font style="font-size: 12pt;">  &lt;p&gt;这是我们的网页内容&lt;/p&gt;</font></div><div><font style="font-size: 12pt;">  &lt;div id='root'&gt;&lt;/div&gt;</font></div><div><font style="font-size: 12pt;">  &lt;script src=&quot;index.js&quot;&gt;&lt;/script&gt;</font></div><div><font style="font-size: 12pt;">&lt;/body&gt;</font></div><div><font style="font-size: 12pt;">&lt;/html&gt;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [43].jpg" type="image/jpeg" data-filename="3.jpg" width="306"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">从以上代码可以看出，Webpack 是通过 plugins 属性来配置需要使用的插件列表的。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">plugins 属性是一个数组，里面的每一项都是插件的一个实例，在实例化一个组件时可以通过构造函数传入这个组件支持的配置属性。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">第五节 </span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Entry 与 Output 的基础配置</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">需求：反复打包 index.js 文件，打包后生成 main.js 和 sub.js 两个文件</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [44].jpg" type="image/jpeg" data-filename="3.jpg" width="336"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [45].jpg" type="image/jpeg" data-filename="3.jpg" width="490"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">报错：打包多个文件，多个文件最后都叫 bundle.js ，有冲突</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [46].jpg" type="image/jpeg" data-filename="3.jpg" width="1059"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [47].jpg" type="image/jpeg" data-filename="3.jpg" width="489"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">output 里的 [name] 的 name指的是 entry 里的 key 值</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">注意：之前代码引号没有一致，要统一使用单引号（除JSON外）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [48].jpg" type="image/jpeg" data-filename="3.jpg" width="294"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">index.html 打包给后端，作为后端的入口文件，但是如果 JS文件上传到 CDN， index.html 中必须对 JS 文件的引用路径必须加一个 CDN 的域名</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [49].jpg" type="image/jpeg" data-filename="3.jpg" width="730"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require('html-webpack-plugin');</font></div><div><font style="font-size: 12pt;">const { CleanWebpackPlugin } = require('clean-webpack-plugin');</font></div><div><font style="font-size: 12pt;">const MiniCssExtractPlugin = require('mini-css-extract-plugin');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: 'development',</font></div><div><font style="font-size: 12pt;">  entry: {</font></div><div><font style="font-size: 12pt;">    <b>main: './src/index.js',</b></font></div><div><font style="font-size: 12pt;"><b>    sub: './src/index.js'</b></font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    <b>publicPath: 'http:/www.cdn.com.cn',</b></font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, 'dist'),</font></div><div><font style="font-size: 12pt;">    <b>filename: '[name].js'</b></font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.css$/,</font></div><div><font style="font-size: 12pt;">        use: [MiniCssExtractPlugin.loader, 'css-loader']</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: './src/index.html'</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new CleanWebpackPlugin(),</font></div><div><font style="font-size: 12pt;">    new MiniCssExtractPlugin({filename: 'index.css'})</font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.html（打包后）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;!DOCTYPE html&gt;</font></div><div><font style="font-size: 12pt;">&lt;html lang=&quot;en&quot;&gt;</font></div><div><font style="font-size: 12pt;">  </font></div><div><font style="font-size: 12pt;">&lt;head&gt;</font></div><div><font style="font-size: 12pt;">  &lt;meta charset=&quot;UTF-8&quot;&gt;</font></div><div><font style="font-size: 12pt;">  &lt;title&gt;这是最原始的网页开发&lt;/title&gt;</font></div><div><font style="font-size: 12pt;">  &lt;link href=&quot;http:/www.cdn.com.cn/index.css&quot; rel=&quot;stylesheet&quot;&gt;</font></div><div><font style="font-size: 12pt;">&lt;/head&gt;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">&lt;body&gt;</font></div><div><font style="font-size: 12pt;">  &lt;p&gt;这是我们的网页内容&lt;/p&gt;</font></div><div><font style="font-size: 12pt;">  &lt;div id='root'&gt;&lt;/div&gt;</font></div><div><font style="font-size: 12pt;">  <b>&lt;script src=&quot;http:/www.cdn.com.cn/main.js&quot;&gt;&lt;/script&gt;</b></font></div><div><font style="font-size: 12pt;"><b>  &lt;script src=&quot;http:/www.cdn.com.cn/sub.js&quot;&gt;&lt;/script&gt;</b></font></div><div><font style="font-size: 12pt;">&lt;/body&gt;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">&lt;/html&gt;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">课后作业：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/guides/output-management/" style="font-size: 12pt;">https://webpack.js.org/guides/output-management/</a></span></div><div><br/></div><div><a href="https://webpack.js.org/configuration/output/" style="font-size: 12pt;">https://webpack.js.org/configuration/output/</a></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/configuration/entry-context/" style="font-size: 12pt;">https://webpack.js.org/configuration/entry-context/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/plugins/html-webpack-plugin/" style="font-size: 12pt;">https://webpack.js.org/plugins/html-webpack-plugin/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://github.com/jantimon/html-webpack-plugin#options" style="font-size: 12pt;">https://github.com/jantimon/html-webpack-plugin#options</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">第六节 </span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">SourceMap 的配置</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">SourceMap </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">是为了解决开发代码与实际运行代码不一致时帮助我们到原始开发代码 D</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">ebug </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">的技术。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">SourceMap就是一个文件，里面储存着位置信息，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">跟构建后的文件同在一个目录下。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">开发者模式里会默认把 </span><span style="font-size: 12pt;">SourceMap 配置进去，所以要关闭 </span><span style="font-size: 12pt;">SourceMap 配置</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">devtool: 'none'</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">当 index.js 文件报错时，如果不用 </span> <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;">SourceMap</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">consele.log('hello world');</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [50].jpg" type="image/jpeg" data-filename="3.jpg" width="1301"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">有时我们希望浏览器的开发者工具告诉我们是 src 目录下哪行代码出错了，而不是 dist 目录下哪行代码出错了</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">SourceMap 现在知道 dist 目录下 main.js 文件96行出错了</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">SourceMap 它是一个映射关系，它知道 dist 目录下 main.js 文件96行报错，实际上对应的是 src 目录下 index.js 文件中的第一行报错</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">当前其实是 index.js 中第一行代码出错了</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">devtool: 'sourceMap'</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [51].jpg" type="image/jpeg" data-filename="3.jpg" width="1302"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">其实使用 devtool，就是在使用 SourceMap</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">-- 表示打包速度</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">source-map                       打包后，dist 目录下多出一个 .js.map 文件 其实就是一个映射的对应关系，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">通过</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">VLQ编码集合在</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">源代码和打包的代码之间做一个映射</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">inline</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">                                  .js.map 文件变成Base64字符串放到打包的 JS 文件中的底部</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [52].jpg" type="image/jpeg" data-filename="3.jpg" width="771"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">cheap                                报错告诉我是业务代码的哪一行就好，不需要精确到哪一列，哪个字符，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">性能更好</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">module                             不仅</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">监控 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">源代码 的业务代码错误，还监控 Loader 等第三方模块的代码错误</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">eval                                   打包速度最快，执行效率最快，报错那行的代码以 eval() 方式执行，并且指向当前 src 的 index.js（如果是复杂代码，可能报错信息不全）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [53].jpg" type="image/jpeg" data-filename="3.jpg" width="755"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">development 模式的最佳实践</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">devtool: 'cheap-module-eval-source-map'</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">如果是线上的代码一般不配置 SourceMap</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">但是有时线上代码出现问题，希望也能够一个 </span><span style="font-size: 12pt;">SourceMap 快速定位问题</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">production 模式的最佳实践</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">devtool: 'cheap-module-source-map'</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">第七节 </span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">使用 Webpack Devserver 提升开发效率</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">三个简化开发的方式</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">每次都需要执行打包命令 webpack ，然后打开 html文件才可以看到预览效果，效率很低</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">所以需要一个自动打包的功能：只要源代码变化，Webpack </span><span style="font-size: 12pt;">就可以监听到，</span><span style="font-size: 12pt;">文件就自动重新打包，打包文件也就能随之变化了。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">方式一： --watch</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json 里修改</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&quot;scripts&quot;: {</font></div><div><font style="font-size: 12pt;">  &quot;bundle&quot;: &quot;webpack&quot;,</font></div><div><font style="font-size: 12pt;">  &quot;watch&quot;: &quot;webpack --watch&quot;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run watch</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">但这远远不够，还需要 浏览器自动打开 和 模拟服务器特性（接收Ajax请求）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">方式二：</span><span style="font-size: 12pt; font-weight: bold;">webpack-dev-server</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">安装 devServer</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install webpack-dev-server -D</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">package.json 里添加</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&quot;scripts&quot;: {</span></div><div><span style="font-size: 12pt;">  &quot;bundle&quot;: &quot;webpack&quot;,</span></div><div><span style="font-size: 12pt;">  &quot;watch&quot;: &quot;webpack --watch&quot;,</span></div><div><span style="font-size: 12pt;"> </span> <span style="font-size: 12pt; font-weight: bold;">&quot;start&quot;: &quot;webpack-dev-server&quot;</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js 的 module.exports 下添加</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>devServer: {</b></font></div><div><font style="font-size: 12pt;"><b>  contentBase: './dist',</b></font></div><div><font style="font-size: 12pt;"><b>  open: true,</b></font></div><div><font style="font-size: 12pt;"><b>  port: 8081</b></font></div><div><font style="font-size: 12pt;"><b>}</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">contenBase 表示服务器在哪个文件夹下启动，服务器的根路径</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">open            表示 npm run start 后  </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">webpack-dev-server 会自动打开浏览器，并且是一个 http 服务器（是 http 协议，而不是像 --watch 一样使用 flie 协议本地打开）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">port             表示端口号</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run start</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">webpack-dev-server 比 --watch 更方便： 不但可以自动重新打包（服务器启动的目录就是打包的目录），而且会</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">自动打开</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览器</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">并</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">刷新，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-family: Monaco; font-weight: bold;">发 Ajax 请求时也能实时接收</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">devServer的其他配置项</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">proxy 跨域时使用接口代理，转发请求</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">port  指定端口号</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">方式三：自己写一个服务器，在 node 中直接使用 webpack</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    <b>publicPath: '/',</b></font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, 'dist'),</font></div><div><font style="font-size: 12pt;">    filename: '[name].js',</font></div><div><font style="font-size: 12pt;">  }</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在 </span><span style="font-size: 12pt;">package.json 同级目录下创建 </span><span style="font-size: 12pt;">server.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">package.json 里添加</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&quot;scripts&quot;: {</span></div><div><span style="font-size: 12pt;">  &quot;bundle&quot;: &quot;webpack&quot;,</span></div><div><span style="font-size: 12pt;">  &quot;watch&quot;: &quot;webpack --watch&quot;,</span></div><div><span style="font-size: 12pt;">  &quot;start&quot;: &quot;webpack-dev-server&quot;,</span></div><div><span style="font-size: 12pt;">  <b>&quot;middleware&quot;: &quot;node server.js&quot;</b></span></div><div><span style="font-size: 12pt;">}</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">node server.js // 表示在 node 环境中执行 server.js </font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">首先需要安装 Express 或 Koa</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install express webpack-middleware -D</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">还要借助 webpack 开发中间件 </span><span style="font-size: 12pt;">webpack-middleware才能重新打包和刷新浏览器</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">server.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const express = require('express');</font></div><div><font style="font-size: 12pt;">const webpack = require('webpack');</font></div><div><font style="font-size: 12pt;">const webpackMiddleWare = require('webpack-middleware');</font></div><div><font style="font-size: 12pt;">const config = require('./webpack.config.js'); </font></div><div><font style="font-size: 12pt;">const compiler = webpack(config); // 使用 webpack 和 webpack配置 生成一个编译器 ，node.js提供了webpack()API，所以在 node环境中能运行 webpack()</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>const app = express(); // 创建 http 服务器</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>app.listen(8081, () =&gt;{</b></font></div><div><font style="font-size: 12pt;"><b>  console.log('server is running'); // 启动在8081端口</b></font></div><div><font style="font-size: 12pt;"><b>})</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>// 使用 webpack 中间件</b></span></div><div><font style="font-size: 12pt;"><b>app.use(webpackMiddleWare(compiler, {</b></font></div><div><font style="font-size: 12pt;"><b>  publicPath: config.output.publicPath</b></font></div><div><font style="font-size: 12pt;"><b>}))</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">compiler 随时进行编译，编译器执行一次就打包一次代码</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">有了这个编译器，通过app.use()使用中间件，并使用编译器</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">意思是只要文件发生改变了，complier就会重新打包， 重新打包生成的文件就会输出到一个目录（</span><span style="font-size: 12pt;">与 </span><span style="font-size: 12pt;">output 的 publicPath相同</span><span style="font-size: 12pt;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run middleware</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">但是只能手动刷新，如果想自己写出一个像 webpack-devserver 一样的服务器，还需要很多配置项，很耗费精力</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">命令行里使用 webpack（</span></span><span style="font-size: 12pt; font-weight: bold;">执行 </span><span style="font-size: 12pt; font-weight: bold;">webpack </span><span style="font-size: 12pt; font-weight: bold;">语法</span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">参考：<a href="https://webpack.js.org/api/cli/" style="font-size: 12pt;">https://webpack.js.org/api/cli/</a></span></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt;">Vue Cli3 之前版本不会配置 devserver，因为不太稳定</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">粗看一些，遇到问题再看</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/configuration/dev-server/" style="font-size: 12pt;">https://webpack.js.org/configuration/dev-server/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">课后作业：看文档</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/guides/development/" style="font-size: 12pt;">https://webpack.js.org/guides/development/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/configuration/devtool/" style="font-size: 12pt;">https://webpack.js.org/configuration/devtool/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/configuration/dev-server/" style="font-size: 12pt;">https://webpack.js.org/configuration/dev-server/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">第八节 </span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Hot Module Replacement（HMR 热模块替换，又叫热更新、热重载）</span></span></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [54].jpg" type="image/jpeg" data-filename="3.jpg" style="box-sizing: initial; -webkit-tap-highlight-color: transparent; cursor: -webkit-zoom-in; position: relative; display: inline-block; padding: 1px; margin: 0px; vertical-align: text-bottom; box-shadow: rgb(0, 129, 194) 0px 0px 0px 1px, rgb(0, 129, 194) 0px 0px 0px 1px inset; max-width: 100%; height: auto; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;" width="166"/><br/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require('html-webpack-plugin');</font></div><div><font style="font-size: 12pt;">const { CleanWebpackPlugin } = require('clean-webpack-plugin');</font></div><div><font style="font-size: 12pt;">const MiniCssExtractPlugin = require('mini-css-extract-plugin');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: 'development',</font></div><div><font style="font-size: 12pt;">  devtool: 'cheap-module-eval-source-map',</font></div><div><font style="font-size: 12pt;">  entry: {</font></div><div><font style="font-size: 12pt;">    main: './src/index.js',</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    publicPath: '/',</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, 'dist'),</font></div><div><font style="font-size: 12pt;">    filename: '[name].js',</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.css$/,</font></div><div><font style="font-size: 12pt;">        use: [MiniCssExtractPlugin.loader, 'css-loader'],</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: './src/index.html',</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new CleanWebpackPlugin(),</font></div><div><font style="font-size: 12pt;">    new MiniCssExtractPlugin({ filename: 'index.css' }),</font></div><div><font style="font-size: 12pt;">  ],</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">  &quot;scripts&quot;: {</span></div><div><span style="font-size: 12pt;">    &quot;start&quot;: &quot;webpack-dev-server&quot;</span></div><div><span style="font-size: 12pt;">  }</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">npm run start</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">运行 </span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">npm run start，</span></span><b style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold; color: rgb(255, 0, 0);">发现没有生成 dist 目录，之前使用 webpack 进行打包时会生成 dist 目录，这是为什么？</span></b></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">实际上， webpack-dev-server 会对 src 目录打包，但是不会像 webpack 命令一样把打包文件放入 dist 目录，而是放在电脑的内存中</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">style.css</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">div:nth-of-type(odd) {</font></div><div><font style="font-size: 12pt;">  background: yellow;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>import './style.css';</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var btn = document.createElement('button');</font></div><div><font style="font-size: 12pt;">btn.innerHTML = '新增';</font></div><div><font style="font-size: 12pt;">document.body.appendChild(btn);</font></div><div><font style="font-size: 12pt;">btn.onclick = function() {</font></div><div><font style="font-size: 12pt;">  var div = document.createElement(&quot;div&quot;);</font></div><div><font style="font-size: 12pt;">  div.innerHTML = 'item';</font></div><div><font style="font-size: 12pt;">  document.body.appendChild(div);</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3.gif" type="image/gif" data-filename="3.gif" width="951"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">如果改变 style.css，则会刷新浏览器，造成之前的背景清空，需要重新点击来测试代码</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">div:nth-of-type(odd) {</font></div><div><font style="font-size: 12pt;">  background: blue;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [55].jpg" type="image/jpeg" data-filename="3.jpg" width="392"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">通过HMR简化流程</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: 'development',</font></div><div><font style="font-size: 12pt;">  devtool: 'cheap-module-eval-source-map',</font></div><div><font style="font-size: 12pt;">  devServer: {</font></div><div><font style="font-size: 12pt;">    contentBase: './dist',</font></div><div><font style="font-size: 12pt;">    port: 8081,</font></div><div><font style="font-size: 12pt;">    open: true,</font></div><div><font style="font-size: 12pt;">    <b>hot: true,    // 开启 HMR</b></font></div><div><font style="font-size: 12pt;"><b>    hotOnly: true // 即便 HMR 失效，浏览器也不会自动刷新，可配可不配</b></font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">引入 webpack 自带插件</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>const webpack = require('webpack');</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: './src/index.html',</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new CleanWebpackPlugin(),</font></div><div><font style="font-size: 12pt;">    new MiniCssExtractPlugin({ filename: 'index.css' }),</font></div><div><font style="font-size: 12pt;">    <b>new webpack.HotModuleReplacementPlugin()</b></font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">修改 webpack 配置后就要重启一次服务器，不然会按之前的配置执行</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run start</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [1].gif" type="image/gif" data-filename="3.gif" width="951"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览器不刷新，CSS文件做了修改只会修改CSS内容，不会修改JS</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">index.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>import counter from &quot;./counter.js&quot;;</b></font></div><div><b><br/></b></div><div><span style="font-size: 12pt;"><b>counter();</b></span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">counter.js</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function counter() {</span></div><div><span style="font-size: 12pt;">  var div = document.createElement(&quot;div&quot;);</span></div><div><span style="font-size: 12pt;">  div.setAttribute(&quot;id&quot;, &quot;counter&quot;);</span></div><div><span style="font-size: 12pt;">  div.innerHTML = 1;</span></div><div><span style="font-size: 12pt;">  div.onclick = function () {</span></div><div><span style="font-size: 12pt;">    div.innerHTML = parseInt(div.innerHTML, 10) + 1;</span></div><div><span style="font-size: 12pt;">  }</span></div><div><span style="font-size: 12pt;">  document.body.appendChild(div);</span></div><div><span style="font-size: 12pt;">}</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>export default counter</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require('path');</font></div><div><font style="font-size: 12pt;">const webpack = require('webpack');</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require('html-webpack-plugin');</font></div><div><font style="font-size: 12pt;">const { CleanWebpackPlugin } = require('clean-webpack-plugin');</font></div><div><font style="font-size: 12pt;">const MiniCssExtractPlugin = require('mini-css-extract-plugin');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: 'development',</font></div><div><font style="font-size: 12pt;">  devtool: 'cheap-module-eval-source-map',</font></div><div><font style="font-size: 12pt;">  devServer: {</font></div><div><font style="font-size: 12pt;">    contentBase: './dist',</font></div><div><font style="font-size: 12pt;">    port: 8081,</font></div><div><font style="font-size: 12pt;">    open: true,</font></div><div><font style="font-size: 12pt;">    hot: true,</font></div><div><font style="font-size: 12pt;">    hotOnly: true</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  entry: {</font></div><div><font style="font-size: 12pt;">    <b>index: './src/index.js',</b></font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, 'dist'),</font></div><div><font style="font-size: 12pt;">   <b> filename: 'index.js',</b></font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.css$/,</font></div><div><font style="font-size: 12pt;">        use: [MiniCssExtractPlugin.loader, 'css-loader'],</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">    ],</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: './src/index.html',</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new CleanWebpackPlugin(),</font></div><div><font style="font-size: 12pt;">    new MiniCssExtractPlugin({ filename: 'index.css' }),</font></div><div><font style="font-size: 12pt;">    new webpack.HotModuleReplacementPlugin()</font></div><div><font style="font-size: 12pt;">  ],</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run start</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [2].gif" type="image/gif" data-filename="3.gif" width="558"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">改变 number() 会改变 counter() 里的代码</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">number.js</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">function number() {</font></div><div><font style="font-size: 12pt;">  var div = document.createElement(&quot;div&quot;);</font></div><div><font style="font-size: 12pt;">  div.setAttribute(&quot;id&quot;, &quot;number&quot;);</font></div><div><font style="font-size: 12pt;">  div.innerHTML = 1000;</font></div><div><font style="font-size: 12pt;">  document.body.appendChild(div);</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">export default number</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import counter from &quot;./counter.js&quot;;</font></div><div><font style="font-size: 12pt;">import number from './number.js';</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">counter();</font></div><div><font style="font-size: 12pt;">number();</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [3].gif" type="image/gif" data-filename="3.gif" width="989"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">只要 number() 变了，counter() 保存的数据就会变成默认值 1，我们希望 2000 这个数据变，只把那块内容更新就行，不去管上面的内容 </span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">改变 number() 不改变 counter() 里的代码</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  devServer: {</font></div><div><font style="font-size: 12pt;">    contentBase: './dist',</font></div><div><font style="font-size: 12pt;">    port: 8081,</font></div><div><font style="font-size: 12pt;">    open: true,</font></div><div><font style="font-size: 12pt;">    <b>hot: true,</b></font></div><div><font style="font-size: 12pt;"><b>    hotOnly: true</b></font></div><div><font style="font-size: 12pt;"><font>  }</font>,</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    <b>new webpack.HotModuleReplacementPlugin()</b></font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">只开启 HMR，会发现下面数据不会再改变</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">index.js</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import counter from &quot;./counter.js&quot;;</font></div><div><font style="font-size: 12pt;">import number from './number.js';</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">counter();</font></div><div><font style="font-size: 12pt;">number();</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>if (module.hot) { // 如果开启了 HMR</b></font></div><div><font style="font-size: 12pt;"><b>  module.hot.accept('./number.js', () =&gt; {</b></font></div><div><font style="font-size: 12pt;"><b>    document.body.removeChild(document.getElementById('number'));</b></font></div><div><font style="font-size: 12pt;"><b>    number();</b></font></div><div><font style="font-size: 12pt;"><b>  }) // 如果依赖的number.js发生变化，就执行函数</b></font></div><div><font style="font-size: 12pt;"><b>}</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [4].gif" type="image/gif" data-filename="3.gif" width="989"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这样，就完成了使用 HMR 只更新部分模块的代码，不会影响其他模块</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">引入 JS 文件需要写这些，才能完成 HMR</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">if (module.hot) { // 如果开启了 HMR</font></div><div><font style="font-size: 12pt;">  module.hot.accept('./number.js', () =&gt; {</font></div><div><font style="font-size: 12pt;">    document.body.removeChild(document.getElementById('number'));</font></div><div><font style="font-size: 12pt;">    number();</font></div><div><font style="font-size: 12pt;">  }) // 如果依赖的number.js发生变化，就执行函数</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">其他<span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">如CSS、Vue、React等文件不用写，是因为它们的 loader css-loader、vue-loader 和 babel-preset 内置了这些功能的编写，不需要写就能完成 HMR</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">但是如果项目引入一些数据文件，这些文件的loader没有内置这个功能，就需要手动写 </span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">module.hot.accept() 。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">课后作业</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/guides/hot-module-replacement/" style="font-size: 12pt;">https://webpack.js.org/guides/hot-module-replacement/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/api/hot-module-replacement/" style="font-size: 12pt;">https://webpack.js.org/api/hot-module-replacement/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/concepts/hot-module-replacement/" style="font-size: 12pt;">https://webpack.js.org/concepts/hot-module-replacement/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第九节 使用 Babel 处理 ES6 语法</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">let arr = [1, 2, 3, new Promise(() =&gt; {})];</font></div><div><font style="font-size: 12pt;">arr.map((item) =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(item)</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">直接写 ES6 语法并打包，Chrome 浏览器可以识别，但是一些版本的 IE 和 国产浏览器 无法识别</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">ES6 代码转换成 ES5代码（Webpack 虽然认识 ES6 并且可以打包，但是不会转换 ES6 代码）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install --save-dev babel-loader @babel/core</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babe/core 将 JS内容 转换成 AST抽象语法树</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module: { </font></div><div><font style="font-size: 12pt;"><b>  rules: [ </b></font></div><div><b><font style="font-size: 12pt;">    { test: /\.js$/, exclude: /node_modules/, loader: &quot;babel-loader&quot; </font><span style="font-size: 12pt;">} </span></b></div><div><span style="font-size: 12pt;"><b>  ] </b></span></div><div><span style="font-size: 12pt;">}</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">exclude 表示如果 JS文件在 node_modules 里就不使用 Babel 转换，</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">node_modules 下的文件已经是打包好了的，让 Babel 编译速度更快，Webpack 打包速度更快</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel-loader 只是 Webpack 和 Babel 之间的桥梁，实际上并不会转换ES6代码 ，需要借助其它模块</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install @babel/preset-env --save-dev</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.js$/,</font></div><div><font style="font-size: 12pt;">        exclude: /node_modules/,</font></div><div><font style="font-size: 12pt;">        loader: &quot;babel-loader&quot;,</font></div><div><font style="font-size: 12pt;">        <b>options: {</b></font></div><div><font style="font-size: 12pt;"><b>          &quot;presets&quot;: [&quot;@babel/preset-env&quot;]</b></font></div><div><font style="font-size: 12pt;"><b>        }</b></font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">    ],</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/preset-env 包含了所有转换 ES5 的规则</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">但是这样还不够，只转换了一部分，一些变量和函数（Promise 和 map）是没有的，需要补充实现：</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install --save @babel/polyfill</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>import &quot;@babel/polyfill&quot;;</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">let arr = [1, 2, 3, new Promise(() =&gt; {})];</font></div><div><font style="font-size: 12pt;">arr.map((item) =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(item)</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">没有 ployfill 的打包代码体积：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [56].jpg" type="image/jpeg" data-filename="3.jpg" width="973"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">有 ployfill 的打包</span></span><span style="font-size: 12pt; font-weight: bold;">代码体积</span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [57].jpg" type="image/jpeg" data-filename="3.jpg" width="1045"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">还有个问题：体积太大，把所有的补充实现都放进去了，我们只需要 Promise 和 map ，所以要对</span></span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/preset-env </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">额外配置（加个[]），让 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/pollyfill 按需引入</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">让 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/preset-env  指导如何处理 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/pollyfill</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module: {</font></div><div><font style="font-size: 12pt;">  rules: [</font></div><div><font style="font-size: 12pt;">    {</font></div><div><font style="font-size: 12pt;">      test: /\.js$/,</font></div><div><font style="font-size: 12pt;">      exclude: /node_modules/,</font></div><div><font style="font-size: 12pt;">      loader: &quot;babel-loader&quot;,</font></div><div><font style="font-size: 12pt;">      options: {</font></div><div><font style="font-size: 12pt;">        presets: [</font></div><div><font style="font-size: 12pt;">          <b>[</b></font></div><div><font style="font-size: 12pt;">            &quot;@babel/preset-env&quot;, <b>{ useBuiltIns: &quot;usage&quot;} </b></font></div><div><font style="font-size: 12pt;">          <b>]</b></font></div><div><font style="font-size: 12pt;">        ]</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">{useBuiltIns: &quot;usage&quot;} 表示根据业务代码加 ployfill，使用这个配置会自动地帮 index.js（打包入口文件） 引入 </span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">@babel/polyfill，不需要手动 import</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">代码体积明显变小：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [58].jpg" type="image/jpeg" data-filename="3.jpg" width="797"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">webpack.config.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module: {</font></div><div><font style="font-size: 12pt;">  rules: [</font></div><div><font style="font-size: 12pt;">    {</font></div><div><font style="font-size: 12pt;">      test: /\.js$/,</font></div><div><font style="font-size: 12pt;">      exclude: /node_modules/,</font></div><div><font style="font-size: 12pt;">      loader: &quot;babel-loader&quot;,</font></div><div><font style="font-size: 12pt;">      options: {</font></div><div><font style="font-size: 12pt;">        presets: [</font></div><div><font style="font-size: 12pt;">          [</font></div><div><font style="font-size: 12pt;">            &quot;@babel/preset-env&quot;, { <b>targets: { &quot;chrome&quot;: 67}</b>, useBuiltIns: &quot;usage&quot;} </font></div><div><font style="font-size: 12pt;">          ]</font></div><div><font style="font-size: 12pt;">        ]</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">targets 表示根据浏览器版本（以上）是否支持该特性来决定是否注入 ployfill</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">代码体积变成原来的 29.3KB，因为不再使用 ployfill 进行转换了:</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [59].jpg" type="image/jpeg" data-filename="3.jpg" width="797"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><b style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold; color: rgb(255, 0, 0);">这个方案只是适合业务代码，并不是所有场景都适用：</span></b></div><div><b style="font-size: 12pt;"><br/></b></div><div><span style="font-size: 12pt; font-weight: bold;">打包库代码时</span></div><div><b style="font-size: 12pt;"><br/></b></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">比如写的是一个库时，打包开发的类库、UI组件库、第三方模块时，ployfill会通过全局变量的形式注入，会污染全局环境</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这个时候就需要 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">plugin-transform-runtime，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">plugin-transform-runtime 会以闭包的形式注入，不会</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">污染全局环境</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install --save-dev @babel/plugin-transform-runtime</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install --save @babel/runtime</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">webpack.config.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module: {</font></div><div><font style="font-size: 12pt;">  rules: [</font></div><div><font style="font-size: 12pt;">    {</font></div><div><font style="font-size: 12pt;">      test: /\.js$/,</font></div><div><font style="font-size: 12pt;">      exclude: /node_modules/,</font></div><div><font style="font-size: 12pt;">      loader: &quot;babel-loader&quot;,</font></div><div><font style="font-size: 12pt;">      options: {</font></div><div><font style="font-size: 12pt;">        <b>&quot;plugins&quot;: [</b></font></div><div><font style="font-size: 12pt;"><b>          [</b></font></div><div><font style="font-size: 12pt;"><b>            &quot;@babel/plugin-transform-runtime&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>            {</b></font></div><div><font style="font-size: 12pt;"><b>              absoluteRuntime: false,</b></font></div><div><font style="font-size: 12pt;"><b>              corejs: 2,</b></font></div><div><font style="font-size: 12pt;"><b>              helpers: true,</b></font></div><div><font style="font-size: 12pt;"><b>              regenerator: true,</b></font></div><div><font style="font-size: 12pt;"><b>              useESModules: false,</b></font></div><div><font style="font-size: 12pt;"><b>              version: &quot;7.0.0-beta.0&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>            }</b></font></div><div><font style="font-size: 12pt;"><b>          ]</b></font></div><div><font style="font-size: 12pt;"><b>        ]</b></font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">如果</span><span style="font-size: 12pt; font-weight: bold;">&quot;</span><span style="font-size: 12pt; font-weight: bold;">corejs&quot;: false 必须</span><span style="font-size: 12pt; font-weight: bold;">设置 &quot;</span><span style="font-size: 12pt; font-weight: bold;">corejs&quot;: 2 才能把一些 ployfill 打包进来，而且需要额外安装一个包</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">npm install --save @babel/runtime-corejs2</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">配置 Babel 时，</span></span> <span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel-loader 的 </span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">options 内容会非常长，需要创建 .babelrc 这样的文件单独放置（不能写注释，要写双引号）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">.<span style="font-size: 12pt; font-weight: bold;">babelrc</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">{</font></div><div><font style="font-size: 12pt;">  &quot;plugins&quot;: [</font></div><div><font style="font-size: 12pt;">    [</font></div><div><font style="font-size: 12pt;">      &quot;@babel/plugin-transform-runtime&quot;,</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        &quot;absoluteRuntime&quot;: false,</font></div><div><font style="font-size: 12pt;">        &quot;corejs&quot;: 2,</font></div><div><font style="font-size: 12pt;">        &quot;helpers&quot;: true,</font></div><div><font style="font-size: 12pt;">        &quot;regenerator&quot;: true,</font></div><div><font style="font-size: 12pt;">        &quot;useESModules&quot;: false,</font></div><div><font style="font-size: 12pt;">        &quot;version&quot;: &quot;7.0.0-beta.0&quot;</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Vue、React 通过 </span><span style="font-size: 12pt;">Webpack 打包会生成浏览器识别的ES5代码，但是如何转换的呢？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">如果学习了 Bable，对抽象语法树都了解的话就能彻底明白</span><span style="font-size: 12pt;">如何转换的</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Babel</span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">实际上比</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Webpack 更深层次（进阶更高级前端，完全可以另开一门课）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://babeljs.io/docs/en/usage" style="font-size: 12pt;">https://babeljs.io/docs/en/usage</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://babeljs.io/docs/en/babel-preset-env#usebuiltins" style="font-size: 12pt;">https://babeljs.io/docs/en/babel-preset-env#usebuiltins</a></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Webpack 实现对 React 代码的打包</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install --save-dev @babel/preset-react</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">.babelrc</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">{</font></div><div><font style="font-size: 12pt;">  &quot;presets&quot;: [</font></div><div><font style="font-size: 12pt;">    [</font></div><div><font style="font-size: 12pt;">      &quot;@babel/preset-env&quot;,</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        &quot;targets&quot;: {</font></div><div><font style="font-size: 12pt;">          &quot;chrome&quot;: 67</font></div><div><font style="font-size: 12pt;">        },</font></div><div><font style="font-size: 12pt;">        &quot;useBuiltIns&quot;: &quot;usage&quot;</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ],</font></div><div><font style="font-size: 12pt;">    &quot;@babel/preset-react&quot;</font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">第十节 </span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Tree Shaking（摇树） 概念详解</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">math.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">export const add = (a, b) =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(a + b)</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">export const minus = (a, b) =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(a - b)</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import {add} from './math.js';</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">add(1, 2);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">index.js </span><span style="font-size: 12pt;">只导入 add()，但是查看打包后的 index.js 后发现 import{add} from './math.js'  实际上会把 </span><span style="font-size: 12pt;">add() 和 minus() 都引入到 index.js 中，这是多此一举</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Webpack 在2.0版本 以后 提供了 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Tree Shaking</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，引入什么就打包什么</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Tree Shaking 就是把一个模块里没用的东西摇晃掉，一个模块可以理解成一棵树，它可以导出很多内容，但这里只引入树的一部分，引入的打包，不引入的摇晃掉</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Tree Shaking 只支持 ES Module（静态引入），不支持 CommonJS（动态引入）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  devtool: &quot;cheap-module-eval-source-map&quot;,</font></div><div><font style="font-size: 12pt;">  <b>optimization: {</b></font></div><div><font style="font-size: 12pt;"><b>    usedExports: true // 表示哪个模块被使用就打包哪个</b></font></div><div><font style="font-size: 12pt;"><b>  }</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">假如在 index.js 中使用 import '@</span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/polly-fill</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">'，然而 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/polly-fill 没有导出任何内容（模块），实际上是在 window. 上绑定一些全局变量（比如 Promise） </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Tree Shaking 发现 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/polly-fill 没有导出任何内容，在打包的时候</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">会</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">直接忽略掉它，导致打包出错，但我们实际上需要 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/polly-fill，</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">所以对这种文件（</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">babel/polly-fill</span><span style="font-size: 12pt; font-weight: bold;"><span style="font-size: 12pt; font-weight: bold; color: rgb(255, 0, 0);">）需要在 package.json 中特殊设置</span> </span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&quot;sideEffects&quot;: [&quot;babel/polly-fill&quot;]</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">再比如 import &quot;./style.css&quot; 时也需要在</span> <span style="font-size: 12pt;">package.json 中</span><span style="font-size: 12pt;">特殊设置 </span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>&quot;sideEffects&quot;: [&quot;babel/polly-fill&quot;, &quot;*.css&quot;]</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">sideEffects 中文就是副作用的意思</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>&quot;sideEffects&quot;: false</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">表示不需要对引入的包并进行特殊处理</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">打包后查看 index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [60].jpg" type="image/jpeg" data-filename="3.jpg" width="444"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">上面代码表示提供了两个方法，但只使用 add()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">当 webpack.config.js 中使用 </span><span style="font-size: 12pt; font-weight: bold;">mode: &quot;production&quot; </span><span style="font-size: 12pt; font-weight: bold;">时</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;production&quot;,</font></div><div><font style="font-size: 12pt;">  devtool: &quot;cheap-module-source-map&quot;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">Tree Shaking 会默认启动，不需要</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">optimization: {</font></div><div><font style="font-size: 12pt;">  usedExports: true // 表示哪个模块被使用就打包哪个</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第十一节 Devlopment 和 Production 模式的区分打包</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Devlopment </span><span style="font-size: 12pt;">和 Production 两个环境在一个 webpack.config.js 文件切换很麻烦</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">所以需要分为两个文件，在根目录下创建： webpack.dev.js 和 webpack.prod.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&quot;scripts&quot;: {</font></div><div><font style="font-size: 12pt;"><b>  &quot;dev&quot;: &quot;webpack-dev-server --config webpack.dev.js&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>  &quot;build&quot;: &quot;webpack --config webpack.prod.js&quot;</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">但是问题：webpack.dev.js 和 webpack.prod.js 有相同的代码，会造成冗余</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">注：Devlopment 开发环境中可以不使用 </span><span style="font-size: 12pt;">CleanWebpackPlugin</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.common.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require(&quot;path&quot;);</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const { CleanWebpackPlugin } = require(&quot;clean-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  entry: {index: &quot;./src/index.js&quot;},</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;[name].js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.css$/,</font></div><div><font style="font-size: 12pt;">        use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;],</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.js$/,</font></div><div><font style="font-size: 12pt;">        exclude: /node_modules/,</font></div><div><font style="font-size: 12pt;">        loader: &quot;babel-loader&quot;,</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ],</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: &quot;./src/index.html&quot;,</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new CleanWebpackPlugin(),</font></div><div><font style="font-size: 12pt;">    new MiniCssExtractPlugin({ filename: &quot;index.css&quot; })</font></div><div><font style="font-size: 12pt;">  ],</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">但是这么拆，webpack.dev.js 就缺少一些东西了，所以需要将 </span><span style="font-size: 12pt;">webpack.common.js 和 </span><span style="font-size: 12pt;">webpack.dev.js 的代码进行合并</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>npm install webpack-merge -D</b></font></div></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.dev.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const webpack = require(&quot;webpack&quot;);</font></div><div><font style="font-size: 12pt;"><b>const merge = require(&quot;webpack-merge&quot;);</b></font></div><div><font style="font-size: 12pt;"><b>const commonConfig = require(&quot;./webpack.common.js&quot;);</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>const devConfig</b> = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  devtool: &quot;cheap-module-eval-source-map&quot;,</font></div><div><font style="font-size: 12pt;">  devServer: {</font></div><div><font style="font-size: 12pt;">    contentBase: &quot;./dist&quot;,</font></div><div><font style="font-size: 12pt;">    port: 8081,</font></div><div><font style="font-size: 12pt;">    open: true,</font></div><div><font style="font-size: 12pt;">    hot: true</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new webpack.HotModuleReplacementPlugin()</font></div><div><font style="font-size: 12pt;">  ],</font></div><div><font style="font-size: 12pt;">  optimization: {</font></div><div><font style="font-size: 12pt;">    usedExports: true</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>module.exports = merge(commonConfig, devConfig);</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.prod.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>const merge = require(&quot;webpack-merge&quot;);</b></font></div><div><font style="font-size: 12pt;"><b>const commonConfig = require(&quot;./webpack.common.js&quot;);</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>const prodConfig</b> = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;production&quot;,</font></div><div><font style="font-size: 12pt;">  devtool: &quot;cheap-module-source-map&quot;,</font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>module.exports = merge(commonConfig, prodConfig);</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run dev</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">如果一些框架把  </span><span style="font-size: 12pt;">webpack.common.js 、</span><span style="font-size: 12pt;">webpack.dev.js 和 </span><span style="font-size: 12pt;">webpack.prod.js 放在一个 build 文件夹里，那么就要修改</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&quot;scripts&quot;: {</font></div><div><font style="font-size: 12pt;">  &quot;dev&quot;: &quot;webpack-dev-server --config <b>./build/webpack.dev.js</b>&quot;,</font></div><div><font style="font-size: 12pt;">  &quot;build&quot;: &quot;webpack --config <b>./build/webpack.prod.js</b>&quot;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第十二节 Webpack 和 Code Splitting（代码分割）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [61].jpg" type="image/jpeg" data-filename="3.jpg" width="181"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">使用 webpack-dev-server 启动一个服务器的话就看不到打包的内容了，为了看到开发环境打包的形式，所以</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&quot;scripts&quot;: {</font></div><div><font style="font-size: 12pt;">  &quot;dev-build&quot;: &quot;webpack --config ./build/webpack.dev.js&quot;,</font></div><div><font style="font-size: 12pt;">  &quot;dev&quot;: &quot;webpack-dev-server --config ./build/webpack.dev.js&quot;,</font></div><div><font style="font-size: 12pt;">  &quot;build&quot;: &quot;webpack --config ./build/webpack.prod.js&quot;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run dev-build</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">问题一：打包的文件打包后不在项目的根目录下，而是在 build 目录下</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 .jpg" type="image/jpeg" data-filename="3 .jpg" width="175"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">解决：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  entry: &quot;./src/index.js&quot;,</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    <b>path: path.resolve(__dirname, &quot;../dist&quot;),</b></font></div><div><font style="font-size: 12pt;">    filename: &quot;index.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [62].jpg" type="image/jpeg" data-filename="3.jpg" width="162"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">问题二：在 dist 目录下新建 123 文件，clean-webpack-plugin 不会删除根目录下的 dist 目录而是删除 build/dist（过时，已更新修复）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">Code Splitting（代码分割）到底是什么？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install lodash --save</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import _ from  'lodash';</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">console.log(_.join(['a', 'd', 'c'], '**'));</font></div><div><font style="font-size: 12pt;">console.log(_.join(['a', 'b', 'c'], '**'))</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run dev-build</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第一种方式</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">首次访问页面时，加载main.js（2mb）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">当页面业务逻辑发生变化时，又要加载2mb的内容</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [63].jpg" type="image/jpeg" data-filename="3.jpg" width="814"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">那么如何解决呢？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">新建 lodash.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import _ from &quot;lodash&quot;;</font></div><div><font style="font-size: 12pt;">window._ = _;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">console.log(_.join(['a', 'd', 'c'], '**'));</font></div><div><font style="font-size: 12pt;">console.log(_.join(['a', 'b', 'c'], '**'))</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">打包后的 index.html</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [64].jpg" type="image/jpeg" data-filename="3.jpg" width="1002"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第二种方式</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">index.js 拆成 lodash.js</span><span style="font-size: 12pt;">（1Mb）</span> <span style="font-size: 12pt;">和 index.js（1Mb），浏览器可以并行加载文件，这样会更快</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">假设我们只修改</span> <span style="font-size: 12pt;">index</span><span style="font-size: 12pt;">.js，导致</span><span style="font-size: 12pt;">页面业务逻辑发生变化，只要加载</span> <span style="font-size: 12pt;">index</span><span style="font-size: 12pt;">.js 即可（1Mb）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">所以</span><span style="font-size: 12pt;">没有 Webpack 之前也可以 Code Spliting， Code Spliting 本质上是和 Webpack 没有任何关系的</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">为什么现在 Code Spliting 和 Webpack 有所绑定呢？这是因为 Webpack4 有个插件叫 SplitChunkPugin 可以非常简单地进行代码分割</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import _ from  'lodash';</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">console.log(_.join(['a', 'd', 'c'], '**'));</font></div><div><font style="font-size: 12pt;">console.log(_.join(['a', 'b', 'c'], '**'))</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.common.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require(&quot;path&quot;);</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const { CleanWebpackPlugin } = require(&quot;clean-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  entry: {</font></div><div><font style="font-size: 12pt;">    index: &quot;./src/index.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;../dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: '[name].js'</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;"><b>  optimization: {</b></font></div><div><font style="font-size: 12pt;"><b>    splitChunks: {</b></font></div><div><font style="font-size: 12pt;"><b>      chunks: &quot;all&quot;</b></font></div><div><font style="font-size: 12pt;"><b>    }</b></font></div><div><font style="font-size: 12pt;"><b><font>  } // 表示</font>我要帮你自动地做代码分割了</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run dev-build</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">vendors~index.js  单独提取了 lodash 类库</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><img src="2- Webpack 与 Vue CLI_files/3 [65].jpg" type="image/jpeg" data-filename="3.jpg" width="1208"/><br/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;">对于同步模块的引入（先加载模块再往下执行），处理同步的逻辑，借助刚才的配置，Webpack 会分析什么样的模块该如何进行代码分割</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第三种方式</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">function getComponent() {</font></div><div><font style="font-size: 12pt;">  return import('lodash').then(({default: _}) =&gt; {</font></div><div><font style="font-size: 12pt;">    var element = document.createElement('div');</font></div><div><font style="font-size: 12pt;">    element.innerHTML = _.join(['Hello', 'World'], '-');</font></div><div><font style="font-size: 12pt;">    return element;  </font></div><div><font style="font-size: 12pt;">  })  </font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">getComponent().then(element =&gt; {</font></div><div><font style="font-size: 12pt;">  document.body.appendChild(element);</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这里我们需要使用 default 的原因是，</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">从 webpack v4 开始，在 import CommonJS 模块时，不会再将导入模块解析为 module.exports 的值，</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">而是为 CommonJS 模块创建一个 artificial namespace object(人工命名空间对象)，</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">关于其背后原因的更多信息，请阅读 <a href="https://medium.com/webpack/webpack-4-import-and-commonjs-d619d626b655" style="font-size: 12pt;">webpack 4: import() 和 CommonJs</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">异步加载 lodash 库，加载完成后创建一个元素，import() 返回值又是一个 Promise，所以可以接收 return element；获取到 element 后挂载到页面上</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run dev-build</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [66].jpg" type="image/jpeg" data-filename="3.jpg" width="1216"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack中实现代码分割，两种方式</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">1. 同步代码：只需要在 webpack.common.js中 做optimization的配置</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">2. 异步代码（import）：异步代码，无需做任何配置，会自动进行代码分割</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第十三节 SplitChunksPlugin 配置参数详解</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">上一节异步模块打包后生成的 0.js 的 0 实际上是 CodeSpliting 产生的 ID 值，如何改为英文名呢？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">有一种语法叫魔法注释（magic comment）可以把 0.js 修改为 vendor~lodash.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">function getComponent() {</font></div><div><font style="font-size: 12pt;">  return import(<b>/* webpackChunkName: &quot;lodash&quot; */'</b>lodash').then(({default: _}) =&gt; {</font></div><div><font style="font-size: 12pt;">    var element = document.createElement('div');</font></div><div><font style="font-size: 12pt;">    element.innerHTML = _.join(['Hello', 'World'], '-');</font></div><div><font style="font-size: 12pt;">    return element;  </font></div><div><font style="font-size: 12pt;">  })  </font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">getComponent().then(element =&gt; {</font></div><div><font style="font-size: 12pt;">  document.body.appendChild(element);</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">魔法注释不被支持，还需安装</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install --save-dev @babel/plugin-syntax-dynamic-import</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">.babelrc</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">{</font></div><div><font style="font-size: 12pt;">  &quot;presets&quot;: [</font></div><div><font style="font-size: 12pt;">    [</font></div><div><font style="font-size: 12pt;">      &quot;@babel/preset-env&quot;,</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        &quot;targets&quot;: {</font></div><div><font style="font-size: 12pt;">          &quot;chrome&quot;: 67</font></div><div><font style="font-size: 12pt;">        },</font></div><div><font style="font-size: 12pt;">        &quot;corejs&quot;: &quot;3&quot;,</font></div><div><font style="font-size: 12pt;">        &quot;useBuiltIns&quot;: &quot;usage&quot;</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  ],</font></div><div><font style="font-size: 12pt;">  <b>&quot;plugins&quot;: [</b></font></div><div><font style="font-size: 12pt;"><b>    &quot;@babel/plugin-syntax-dynamic-import&quot;</b></font></div><div><font style="font-size: 12pt;"><b>  ]</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.common.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  optimization: {</font></div><div><font style="font-size: 12pt;">    splitChunks: {</font></div><div><font style="font-size: 12pt;">      chunks: &quot;all&quot;,</font></div><div><font style="font-size: 12pt;">      <b>cacheGroups: {</b></font></div><div><font style="font-size: 12pt;"><b>        vendors: false, // 禁止默认规则</b></font></div><div><font style="font-size: 12pt;"><b><font>        default: false  </font>// 禁止默认规则</b></font></div><div><font style="font-size: 12pt;"><b>      }</b></font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">命名 loadash.js 完成</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [67].jpg" type="image/jpeg" data-filename="3.jpg" width="1216"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">splitChunks 的默认配置</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">splitChunks: {</font></div><div><font style="font-size: 12pt;"><font>  chunks: 'async', </font></font></div><div><font style="font-size: 12pt;"><font>  // 1、打包进行代码分割时只对异步代码生效，initial表示同步代码，all表示同步代码和异步代码，</font>默认情况下，SplitChunks只对异步chunks生效，并且不需要配置</font></div><div><font style="font-size: 12pt;">  minSize: 30000,              // 大于 30kb 才进行代码分割</font></div><div><font style="font-size: 12pt;">  minRemainingSize: 0,</font></div><div><font style="font-size: 12pt;">  maxSize: 0,                  // 可配可不配，0 表示不进行二次拆分，例如 1Mb 拆分为 20个50Kb，很少改</font></div><div><font style="font-size: 12pt;">  minChunks: 1,                // 一个模块至少被其他模块使用（import）1 次才进行代码分割</font></div><div><font style="font-size: 12pt;">  maxAsyncRequests: 6,         // 同时加载模块数最多为 6 个</font></div><div><font style="font-size: 12pt;"><font>  maxInitialRequests: 4,       // 入口文件</font>加载时<font>引入的模块（库）做代码分割最多生成4个 JS 文件，一般不变</font></font></div><div><font style="font-size: 12pt;">  automaticNameDelimiter: '~', // 组名和入口文件名的连接符</font></div><div><font style="font-size: 12pt;"><font>  // 以上代码分割要求都满足时才能进入 </font>cacheGroups 缓存组，假如两个库都要做代码分割就要缓存为一组（一个文件）</font></div><div><font style="font-size: 12pt;">  cacheGroups: {</font></div><div><font style="font-size: 12pt;">     defaultVendors: {</font></div><div><font style="font-size: 12pt;"><font><font>       test: /[\\/]node_modules[\\/]/, </font></font></font></div><div><font style="font-size: 12pt;"><font><font>       // 2、检测引入的模块是否在 </font>node_modules 目录下，</font>提取所有node_modules中符合条件的模块，文件名 vendors 表示符合 vendors 这组的要求</font></div><div><font style="font-size: 12pt;">       priority: -10, // 当 vendors 和 default 两组条件都满足时指定优先级，值越大优先级越高</font></div><div><font style="font-size: 12pt;">       filename: 'vendors.js'</font> <font style="font-size: 12pt;"><font>// 把代码分割的模块命名为 </font>vendors~ 入口.js</font></div><div><font style="font-size: 12pt;">     },</font></div><div><font style="font-size: 12pt;">     default: {</font></div><div><font style="font-size: 12pt;">       minChunks: 2,</font></div><div><font style="font-size: 12pt;">       priority: -20,</font></div><div><font style="font-size: 12pt;">     </font> <font style="font-size: 12pt;"><font> reuseExistingChunk: true,</font></font></div><div><font style="font-size: 12pt;"><font>      // 假如 a模块 和 b模块 都会被打包到common.js，a 模块中已经引用了 b 模块，再打包 a 模块时，a模块用到的 b 代码不会打包到 </font>common.js，会复用之前的 b</font></div><div><font style="font-size: 12pt;">       filename: 'common.js'</font></div><div><font><font><span style="font-size: 12pt;">   </span> <font style="font-size: 12pt;"> } // 不符合vendors这组的条件时，</font></font></font><font style="font-size: 12pt;">代码分割的模块<font><font>就会去default这组，把</font>默认命名为 default~ 入口.js</font></font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.js.org/plugins/split-chunks-plugin/#defaults" style="font-size: 12pt;">https://webpack.js.org/plugins/split-chunks-plugin/#defaults</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第十四节 Lazy Loading 懒加载，Chunk 是什么？</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">Lazy Loading 懒加载</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">function getComponent() {</font></div><div><font style="font-size: 12pt;">  return import(/* webpackChunkName: &quot;lodash&quot; */'lodash').then(({default: _}) =&gt; {</font></div><div><font style="font-size: 12pt;">    var element = document.createElement('div');</font></div><div><font style="font-size: 12pt;">    element.innerHTML = _.join(['Hello', 'World'], '-');</font></div><div><font style="font-size: 12pt;">    return element;  </font></div><div><font style="font-size: 12pt;">  })  </font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">document.addEventListener('click', () =&gt; {</font></div><div><font style="font-size: 12pt;">  getComponent().then((element) =&gt; {</font></div><div><font style="font-size: 12pt;">    document.body.appendChild(element);</font></div><div><font style="font-size: 12pt;">  })</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">不知道</span><span style="font-size: 12pt;">到底什么时候才会执行加载就叫懒加载，此处为</span><span style="font-size: 12pt;">当页面刷新加载时不加载 </span><span style="font-size: 12pt;">lodash 模块，</span><span style="font-size: 12pt;">点击时才加载 lodash 模块</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [5].gif" type="image/gif" data-filename="3.gif" width="989"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">例如，路由访问不同地址时展示不同页面组件，访问首页时不加载详情页和列表页的代码，首页、详情页、列表页各自做一个代码分割，</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">当路由切换时，通过异步组件的形式再把对应页面代码载入进来执行就行了</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">import() 是ES6的概念，要使用它，记得使用 babel-plolly-fill。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js（使用 异步函数 代替 Promise）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">async function getComponent() {</font></div><div><font style="font-size: 12pt;">  const {default: _} = await import(/* webpackChunkName: &quot;lodash&quot; */'lodash');</font></div><div><font style="font-size: 12pt;">  const element = document.createElement(&quot;div&quot;);</font></div><div><font style="font-size: 12pt;">  element.innerHTML = _.join([&quot;Hello&quot;, &quot;World&quot;], &quot;-&quot;);</font></div><div><font style="font-size: 12pt;">  return element  </font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">document.addEventListener('click', () =&gt; {</font></div><div><font style="font-size: 12pt;">  getComponent().then((element) =&gt; {</font></div><div><font style="font-size: 12pt;">    document.body.appendChild(element);</font></div><div><font style="font-size: 12pt;">  })</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Chunk 是什么？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">做了代码分割，打包过后 index.js 会生成（拆分）两个 JS 文件，生成的每个 JS 文件就叫 Chunk，例如 main.js 、vendors~lodash.js。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [68].jpg" type="image/jpeg" data-filename="3.jpg" width="199"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第十五节 打包分析，Preloading, Prefetching</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">打包分析</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://github.com/webpack/analyse" style="font-size: 12pt;">https://github.com/webpack/analyse</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&quot;scripts&quot;: {</font></div><div><font style="font-size: 12pt;">  &quot;dev-build&quot;: &quot;webpack <b>--profile --json &gt; stats.json</b> --config ./build/webpack.dev.js&quot;,</font></div><div><font style="font-size: 12pt;">  &quot;dev&quot;: &quot;webpack-dev-server --config ./build/webpack.dev.js&quot;,</font></div><div><font style="font-size: 12pt;">  &quot;build&quot;: &quot;webpack --config ./build/webpack.prod.js&quot;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">--profile --json &gt; stats.json 表示</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">把打包过程的描述放入 stats.json文件（在根目录下生成）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">生成</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;">stats.json </span><span style="font-size: 12pt;">文件后可以借助一些工具分析 </span><span style="font-size: 12pt;">stats.json 的内容</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">可视化打包分析工具</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer" style="font-size: 12pt;">https://github.com/webpack-contrib/webpack-bundle-analyzer</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://webpack.github.io/analyse/" style="font-size: 12pt;">https://webpack.github.io/analyse/</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">document.addEventListener('click', () =&gt; {</font></div><div><font style="font-size: 12pt;">  const element = document.createElement('div');</font></div><div><font style="font-size: 12pt;"><font>  element.innerHTML = '</font>Hello World<font>';</font></font></div><div><font style="font-size: 12pt;">  document.body.appendChild(element)</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">这不是 webpack 推荐的写代码方式</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">打开开发者工具，Ctrl + Shift + P，输入 coverage 覆盖率，点击录制按钮查看代码利用率</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">发现利用率只有 74.7%，红色部分表示未利用</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [69].jpg" type="image/jpeg" data-filename="3.jpg" width="774"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">不会执行的代码让页面在加载时就把它下载下来实际上浪费页面执行的性能</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack 建议将交互的代码放到异步加载的模块中（所以 splitChuncks 的 chunks 默认值为 async）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">click.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">function handleClick() {</font></div><div><font style="font-size: 12pt;">  const element = document.createElement(&quot;div&quot;);</font></div><div><font style="font-size: 12pt;">  element.innerHTML = &quot;Hello World&quot;;</font></div><div><font style="font-size: 12pt;">  document.body.appendChild(element)</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;">export default handleClick;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">document.addEventListener('click', () =&gt; {</font></div><div><font style="font-size: 12pt;">  import('./click.js').then(({default: func}) =&gt; {</font></div><div><font style="font-size: 12pt;">    func();</font></div><div><font style="font-size: 12pt;">  })</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">发现代码利用率变成了 79.1%</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [70].jpg" type="image/jpeg" data-filename="3.jpg" width="1312"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这是因为 </span><span style="font-size: 12pt;">addEventListener 里的代码变少了（页面点击时才挂载业务逻辑）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [71].jpg" type="image/jpeg" data-filename="3.jpg" width="1310"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">如果代码全部利用的话，首屏时间会更快</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">Preloading 和 Prefetching</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">假设一个场景：点击登录按钮时才异步加载登录模态框，打开速度会比较慢，也就是懒加载会牺牲一部分用户体验</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">我们可以等首页逻辑全部加载出来，首页展示出来后，等带宽被释放出来，网络空闲了，偷偷地把</span><span style="font-size: 12pt;">登录</span><span style="font-size: 12pt;">模态框的代码下载下来</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">这时就需要依赖 </span><span style="font-size: 12pt;">Preloading 和 Prefetching 打包的特性</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">document.addEventListener('click', () =&gt; {</font></div><div><font style="font-size: 12pt;">  import(<b>/* webpackPrefetch: true */</b> './click.js').then(({default: func}) =&gt; {</font></div><div><font style="font-size: 12pt;">    func();</font></div><div><font style="font-size: 12pt;">  })</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">/* webpackPrefetch: true */  </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">表示</span><span style="font-size: 12pt;">当点击click事件的时候，会加载 click.js 文件，</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">不是非得等到点击页面时才去加载，而是首页主要的 js 文件加载完成后，网络带宽有空闲时就预先加载好 </span><span style="font-size: 12pt;">click.js 文件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">没加</span> <span style="font-size: 12pt; font-weight: bold;">/* webpackPrefetch: true */   </span><span style="font-size: 12pt; font-weight: bold;">点击之后</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [72].jpg" type="image/jpeg" data-filename="3.jpg" width="1307"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">加</span> <span style="font-size: 12pt; font-weight: bold;">/* webpackPrefetch: true */  </span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">点击之后，只需要 1 ms</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [73].jpg" type="image/jpeg" data-filename="3.jpg" width="1003"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">Preload 和 Prefetch 的区别：</span><span style="font-size: 12pt;">如果是 </span><span style="font-size: 12pt;">Preload 的话，就会和首页一起加载，而不是首页加载后加载，影响首页加载时间</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Prefetch 在某些浏览器有兼容性问题</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">也就是说不用关注怎么利用缓存特性了，因为缓存带来的性能提升是非常有限的，应该重点关注怎么使代码利用率最高</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><a href="https://webpack.js.org/guides/code-splitting/" style="font-size: 12pt;">https://webpack.js.org/guides/code-splitting/</a></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">第十六节 CSS 文件的代码分割</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">chunkFileName</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">document.addEventListener('click', () =&gt; {</font></div><div><font style="font-size: 12pt;">  import(</font></div><div><font style="font-size: 12pt;">    /* webpackPrefetch: true */</font></div><div><font style="font-size: 12pt;">    <b>/* webpackChunkName: &quot;click&quot; */</b></font></div><div><font style="font-size: 12pt;">    &quot;./click.js&quot;</font></div><div><font style="font-size: 12pt;">  ).then(({ default: func }) =&gt; {</font></div><div><font style="font-size: 12pt;">    func()</font></div><div><font style="font-size: 12pt;">  })</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.common.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  entry: {</font></div><div><font style="font-size: 12pt;">    index: &quot;./src/index.js&quot;,</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;../dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;[name].js&quot;,</font></div><div><font style="font-size: 12pt;">    <b>chunkFileName: &quot;[name].chunk.js&quot;</b></font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">chunkFileName 的意思</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">index.js 引入了 click.js，</span><span style="font-size: 12pt;">click.js 会被单独打包为 click.chunk.js ，</span><span style="font-size: 12pt;">打包过后 index.js 先加载执行，然后 </span><span style="font-size: 12pt;">index.js </span><span style="font-size: 12pt;">异步加载 click.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">index.js 的</span><span style="font-size: 12pt;">间接JS文件会走 </span><span style="font-size: 12pt;">chunkFileName: &quot;[name].chunk.js&quot; </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [74].jpg" type="image/jpeg" data-filename="3.jpg" width="1212"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">CSS 文件的代码分割</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.comman.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require(&quot;path&quot;);</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const { CleanWebpackPlugin } = require(&quot;clean-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;"><b>const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  entry: {</font></div><div><font style="font-size: 12pt;">    index: &quot;./src/index.js&quot;,</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;../dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;[name].js&quot;,</font></div><div><font style="font-size: 12pt;">    chunkFilename: &quot;[name].chunk.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.css$/,</font></div><div><font style="font-size: 12pt;">        use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;],</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.js$/,</font></div><div><font style="font-size: 12pt;">        exclude: /node_modules/,</font></div><div><font style="font-size: 12pt;">        loader: &quot;babel-loader&quot;,</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">    ],</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: &quot;./src/index.html&quot;,</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new CleanWebpackPlugin(),</font></div><div><font style="font-size: 12pt;"><b>    new MiniCssExtractPlugin({ </b></font></div><div><font style="font-size: 12pt;"><b>      filename: &quot;[name].css&quot;, </b></font></div><div><font style="font-size: 12pt;"><b>      chunkFilename: &quot;[name].chunk.css&quot; </b></font></div><div><font style="font-size: 12pt;"><b>    })</b>,</font></div><div><font style="font-size: 12pt;">  ],</font></div><div><font style="font-size: 12pt;"><b>  optimization: {</b></font></div><div><font style="font-size: 12pt;"><b>    usedExports: true,</b></font></div><div><font style="font-size: 12pt;"><b>    splitChunks: {</b></font></div><div><font style="font-size: 12pt;"><b>      chunks: &quot;all&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>      cacheGroups: {</b></font></div><div><font style="font-size: 12pt;"><b>        vendors: false,</b></font></div><div><font style="font-size: 12pt;"><b>        default: false</b></font></div><div><font style="font-size: 12pt;"><b>      }</b></font></div><div><font style="font-size: 12pt;"><b>    }    </b></font></div><div><font style="font-size: 12pt;"><b>  }</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.dev.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const webpack = require(&quot;webpack&quot;);</font></div><div><font style="font-size: 12pt;">const merge = require(&quot;webpack-merge&quot;);</font></div><div><font style="font-size: 12pt;">const commonConfig = require(&quot;./webpack.common.js&quot;);</font></div><div><font style="font-size: 12pt;">const devConfig = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  devtool: &quot;cheap-module-eval-source-map&quot;,</font></div><div><font style="font-size: 12pt;">  devServer: {</font></div><div><font style="font-size: 12pt;">    contentBase: &quot;./dist&quot;,</font></div><div><font style="font-size: 12pt;">    port: 8081,</font></div><div><font style="font-size: 12pt;">    open: true,</font></div><div><font style="font-size: 12pt;">    hot: true</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new webpack.HotModuleReplacementPlugin()</font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;">module.exports = merge(commonConfig, devConfig);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.prod.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const merge = require(&quot;webpack-merge&quot;);</font></div><div><font style="font-size: 12pt;">const commonConfig = require(&quot;./webpack.common.js&quot;);</font></div><div><font style="font-size: 12pt;">const prodConfig = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;production&quot;,</font></div><div><font style="font-size: 12pt;">  devtool: &quot;cheap-module-source-map&quot;</font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;">module.exports = merge(commonConfig, prodConfig);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">{</font></div><div><font style="font-size: 12pt;">  &quot;name&quot;: &quot;webpack-learn&quot;,</font></div><div><font style="font-size: 12pt;">  <b>&quot;sideEffects&quot;: [</b></font></div><div><font style="font-size: 12pt;"><b>    &quot;@babel/polly-fill&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>    &quot;*.css&quot;</b></font></div><div><font style="font-size: 12pt;"><b>  ]</b>,</font></div><div><font style="font-size: 12pt;">  &quot;version&quot;: &quot;1.0.0&quot;,</font></div><div><font style="font-size: 12pt;">  &quot;private&quot;: true,</font></div><div><font style="font-size: 12pt;">  &quot;description&quot;: &quot;&quot;,</font></div><div><font style="font-size: 12pt;">  &quot;scripts&quot;: {</font></div><div><font style="font-size: 12pt;">    &quot;dev-build&quot;: &quot;webpack --config ./build/webpack.dev.js&quot;,</font></div><div><font style="font-size: 12pt;">    &quot;dev&quot;: &quot;webpack-dev-server --config ./build/webpack.dev.js&quot;,</font></div><div><font style="font-size: 12pt;">    &quot;build&quot;: &quot;webpack --config ./build/webpack.prod.js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  &quot;keywords&quot;: [],</font></div><div><font style="font-size: 12pt;">  &quot;author&quot;: &quot;&quot;,</font></div><div><font style="font-size: 12pt;">  &quot;license&quot;: &quot;ISC&quot;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">style.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">body {</font></div><div><font style="font-size: 12pt;">  background: green;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">style2.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">body {</font></div><div><font style="font-size: 12pt;">  font-size: 85px;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>import './style.css';</b></font></div><div><font style="font-size: 12pt;"><b>import &quot;./style2.css&quot;;</b></font></div><div><font style="font-size: 12pt;">document.addEventListener('click', () =&gt; {</font></div><div><font style="font-size: 12pt;">  import(</font></div><div><font style="font-size: 12pt;">    /* webpackPrefetch: true */</font></div><div><font style="font-size: 12pt;">    /* webpackChunkName: &quot;click&quot; */</font></div><div><font style="font-size: 12pt;">    &quot;./click.js&quot;</font></div><div><font style="font-size: 12pt;">  ).then(({ default: func }) =&gt; {</font></div><div><font style="font-size: 12pt;">    func()</font></div><div><font style="font-size: 12pt;">  })</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run dev-build</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [75].jpg" type="image/jpeg" data-filename="3.jpg" width="1028"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">webpack.prod.js</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const merge = require(&quot;webpack-merge&quot;);</font></div><div><font style="font-size: 12pt;">const commonConfig = require(&quot;./webpack.common.js&quot;);</font></div><div><font style="font-size: 12pt;"><b>const OptimizeCSSAssetsPlugin = require(&quot;optimize-css-assets-webpack-plugin&quot;);</b></font></div><div><font style="font-size: 12pt;">const prodConfig = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;production&quot;,</font></div><div><font style="font-size: 12pt;">  devtool: &quot;cheap-module-source-map&quot;,</font></div><div><font style="font-size: 12pt;"> <b> optimization: {</b></font></div><div><font style="font-size: 12pt;"><b>    minimizer: [new OptimizeCSSAssetsPlugin({})]</b></font></div><div><font style="font-size: 12pt;"><b>  }</b></font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;">module.exports = merge(commonConfig, prodConfig);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">若想</span> <span style="font-size: 12pt;">OptimizeCSSAssetsPlugin </span><span style="font-size: 12pt;">优化生效，必须将 mode 改为 production 模式</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [76].jpg" type="image/jpeg" data-filename="3.jpg" width="1184"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">提取所有 CSS 文件到一个文件</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [77].jpg" type="image/jpeg" data-filename="3.jpg" width="488"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">splitChunks: {</font></div><div><font style="font-size: 12pt;">  cacheGroups: {</font></div><div><font style="font-size: 12pt;">    styles: {</font></div><div><font style="font-size: 12pt;">      name: 'styles',</font></div><div><font style="font-size: 12pt;">      test: /\.css$/,</font></div><div><font style="font-size: 12pt;">      chunks: 'all',</font></div><div><font style="font-size: 12pt;">      enforce: true</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">不管同步加载还是异步加载的，只要是 css 文件都统一打包到 styles 文件中 </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">enforce: true 表示忽略掉默认参数，如 minSize、maxSize</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">根据入口提取 CSS 文件</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">有两个入口文件，一个叫 foo，一个叫 bar，这两个 JS 文件引用的 CSS 样式都分别打包为 foo.css、bar.css</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [78].jpg" type="image/jpeg" data-filename="3.jpg" width="600"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第十六节 Webpack 与浏览器缓存( Caching )</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import _ from 'lodash';</font></div><div><font style="font-size: 12pt;">import $ from 'jquery';</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">const div = $('&lt;div&gt;');</font></div><div><font style="font-size: 12pt;">div.html(_.join(['Hello', 'World'], '--'));</font></div><div><font style="font-size: 12pt;">$('body').append(div)</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.common.js</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require(&quot;path&quot;);</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const { CleanWebpackPlugin } = require(&quot;clean-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  entry: {</font></div><div><font style="font-size: 12pt;">    index: &quot;./src/index.js&quot;,</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;../dist&quot;),</font></div><div><font style="font-size: 12pt;">    filename: &quot;[name].js&quot;,</font></div><div><font style="font-size: 12pt;">    chunkFilename: &quot;[name].chunk.js&quot;,</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.css$/,</font></div><div><font style="font-size: 12pt;">        use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;],</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.js$/,</font></div><div><font style="font-size: 12pt;">        exclude: /node_modules/,</font></div><div><font style="font-size: 12pt;">        loader: &quot;babel-loader&quot;,</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: &quot;./src/index.html&quot;,</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new CleanWebpackPlugin(),</font></div><div><font style="font-size: 12pt;">    new MiniCssExtractPlugin({</font></div><div><font style="font-size: 12pt;">      filename: &quot;[name].css&quot;,</font></div><div><font style="font-size: 12pt;">      chunkFilename: &quot;[name].chunk.css&quot;,</font></div><div><font style="font-size: 12pt;">    })</font></div><div><font style="font-size: 12pt;">  ],</font></div><div><font style="font-size: 12pt;">  optimization: {</font></div><div><font style="font-size: 12pt;">    usedExports: true,</font></div><div><font style="font-size: 12pt;">    splitChunks: {</font></div><div><font style="font-size: 12pt;">      chunks: &quot;all&quot;,</font></div><div><font style="font-size: 12pt;">      cacheGroups: {</font></div><div><font style="font-size: 12pt;">      <b>  vendors: {</b></font></div><div><font style="font-size: 12pt;"><b>          test: /[\\/]node_modules[\\/]/,</b></font></div><div><font style="font-size: 12pt;"><b>          priority: -10,</b></font></div><div><font style="font-size: 12pt;"><b>          name: &quot;vendors&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>        }</b></font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;"><font>  <b>performance: false // </b></font><b>去除性能警告</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run build</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [79].jpg" type="image/jpeg" data-filename="3.jpg" width="888"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js 修改了</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import _ from 'lodash';</font></div><div><font style="font-size: 12pt;">import $ from 'jquery';</font></div><div><font style="font-size: 12pt;">const div = $('&lt;div&gt;');</font></div><div><font style="font-size: 12pt;"><b>div.html(_.join(['Hello', 'World'], '...'));</b></font></div><div><font style="font-size: 12pt;">$('body').append(div)</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.dev.js</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const webpack = require(&quot;webpack&quot;);</font></div><div><font style="font-size: 12pt;">const merge = require(&quot;webpack-merge&quot;);</font></div><div><font style="font-size: 12pt;">const commonConfig = require(&quot;./webpack.common.js&quot;);</font></div><div><font style="font-size: 12pt;">const devConfig = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  devtool: &quot;cheap-module-eval-source-map&quot;,</font></div><div><font style="font-size: 12pt;">  devServer: {</font></div><div><font style="font-size: 12pt;">    contentBase: &quot;./dist&quot;,</font></div><div><font style="font-size: 12pt;">    port: 8081,</font></div><div><font style="font-size: 12pt;">    open: true,</font></div><div><font style="font-size: 12pt;">    hot: true,</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [new webpack.HotModuleReplacementPlugin()],</font></div><div><font style="font-size: 12pt;">  <b>output: {</b></font></div><div><font style="font-size: 12pt;"><b>    filename: &quot;[name].js&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>    chunkFilename: &quot;[name].js&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>  }</b></font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;">module.exports = merge(commonConfig, devConfig);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">webpack.prod.js</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const merge = require(&quot;webpack-merge&quot;);</font></div><div><font style="font-size: 12pt;">const commonConfig = require(&quot;./webpack.common.js&quot;);</font></div><div><font style="font-size: 12pt;">const OptimizeCSSAssetsPlugin = require(&quot;optimize-css-assets-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const prodConfig = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;production&quot;,</font></div><div><font style="font-size: 12pt;">  // devtool: &quot;cheap-module-source-map&quot;,</font></div><div><font style="font-size: 12pt;">  optimization: {</font></div><div><font style="font-size: 12pt;">    minimizer: [new OptimizeCSSAssetsPlugin({})],</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;"><b>  output: {</b></font></div><div><font style="font-size: 12pt;"><b>    filename: &quot;[name].[contenthash].js&quot;,</b></font></div><div><font style="font-size: 12pt;"><b>    chunkFilename: &quot;[name].[contenthash].js&quot;</b></font></div><div><font style="font-size: 12pt;"><b>  }</b></font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;">module.exports = merge(commonConfig, prodConfig);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [80].jpg" type="image/jpeg" data-filename="3.jpg" width="1226"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">只要文件源代码不改，文件名的哈希值就不会变，会使用浏览器的本地缓存</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">index.js 修改后，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">用户刷新（普通刷新，不是强制刷新）首页时</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">请求的 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">vendors.js </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">和之前请求的文件名字还是一样的，浏览器就会使用本地的缓存，而 index.js 对应的哈希值变了，就会到服务器上重新加载 main.js（而不是使用本地缓存）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">通过 contenthash 的方式可以做到代码上线时用户只需要更新有变化的代码，而没有变化的代码可以使用本地的缓存</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [81].jpg" type="image/jpeg" data-filename="3.jpg" width="849"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在老版本的webpack进行打包时，main.js 放的是业务逻辑，vendors.js 放的是库，它们之间是有关联的，关联逻辑处理内置的代码 webpack 管它叫 mainfest</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">mainfest 默认同时存在 </span><span style="font-size: 12pt;">main.js 和 v</span><span style="font-size: 12pt;">endors.js 中，在旧版中每次打包都会有差异，会导致 </span><span style="font-size: 12pt;">main.js 和 v</span><span style="font-size: 12pt;">endors.js 一起跟着变，</span><span style="font-size: 12pt;">contenthash 值也会跟着变</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">runtimeChunk 是把 </span><span style="font-size: 12pt;">mainfest 单独抽离出来放到 runtime.js 中，</span><span style="font-size: 12pt;">main.js 和 v</span><span style="font-size: 12pt;">endors.js 就不会再有 </span><span style="font-size: 12pt;">mainfest 代码了</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第十七节 Shimming（垫片） 的作用</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">对打包代码进行兼容时，需要借助 babel-plollyfill，但是兼容性问题不局限在浏览器版本高低</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [82].jpg" type="image/jpeg" data-filename="3.jpg" width="182"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">jquery.ui.js</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">export function ui() {</font></div><div><font style="font-size: 12pt;">  <b>$('body').css('background', _join(['green'], ''))</b></font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">index.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import _ from 'lodash';</font></div><div><font style="font-size: 12pt;">import $ from 'jquery';</font></div><div><font style="font-size: 12pt;"><b>import {ui}  from './jquery.ui.js';</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>ui();</b></font></div><div><font style="font-size: 12pt;">const div = $('&lt;div&gt;');</font></div><div><font style="font-size: 12pt;"><b>div.html(_join(['Hello', 'World'], '--'));</b></font></div><div><font style="font-size: 12pt;">$('body').append(div);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">运行报错：jquer.ui 的 $ 找不到</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [83].jpg" type="image/jpeg" data-filename="3.jpg" width="339"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">为什么找不到 </span><span style="font-size: 12pt; font-weight: bold;">jquer.ui 的 $ 呢？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">webpack是基于模块打包的，</span><span style="font-size: 12pt;">index.js </span><span style="font-size: 12pt;">模块里的变量只能在 </span><span style="font-size: 12pt;">index.js </span><span style="font-size: 12pt;">这个文件里使用， </span> <span style="font-size: 16px;">jquer.ui</span><span style="font-size: 16px;"> .js 想使用 </span><span style="font-size: 12pt;">index.js </span><span style="font-size: 12pt;">模块里的变量是不可能的！</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">变量隔离可以保证模块之间没有任何的耦合，一个模块一旦出了问题只需要在这个模块里找，出问题的这个模块不会影响另一个模块</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">如果想在业务代码里不想</span><span style="font-size: 12pt; font-weight: bold;">每次都</span><span style="font-size: 12pt; font-weight: bold;">使用 </span><span style="font-size: 12pt; font-weight: bold;">import $ from 'jquery'; </span><span style="font-size: 12pt; font-weight: bold;">去实现呢？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.common.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><b>const webpack = require(&quot;webpack&quot;);</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    <b>new webpack.ProvidePlugin({</b></font></div><div><font style="font-size: 12pt;"><b>      $: 'jquery',</b></font></div><div><font style="font-size: 12pt;"><b>      _join: ['lodash', 'join']</b></font></div><div><font style="font-size: 12pt;"><b>    })</b></font></div><div><font style="font-size: 12pt;">  ]</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">webpack.ProvidePlugin 会默认完成 </span> <span style="font-size: 12pt;">import $ from 'jquery'; 不用自己写，</span><span style="font-size: 12pt;">适用于</span><span style="font-size: 12pt;">比较老的第三方模块时适用</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">_join: ['lodash', 'join'] 表示使用 lodash 库里的 join 方法</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">让每个模块的 this 指向 window</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">每个模块的 this 都指向自身，是一个 Object，它与 window 不相等</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install imports-loader -D</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.common.js</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">module.exports = {</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.js$/,</font></div><div><font style="font-size: 12pt;">        exclude: /node_modules/,</font></div><div><font style="font-size: 12pt;">        use: [{</font></div><div><font style="font-size: 12pt;">          loader: &quot;babel-loader&quot;,</font></div><div><font style="font-size: 12pt;">        }, <b>{</b></font></div><div><font style="font-size: 12pt;"><b>          loader: &quot;imports-loader?this=&gt;window&quot;</b></font></div><div><font style="font-size: 12pt;"><b>        }</b></font><span style="font-size: 12pt;">]</span></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">报错：</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">'import' and 'export' may only appear at the top level</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">因为 imports-loader 会对模块这样做：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">/* src/index.js */</font></div><div><font style="font-size: 12pt;">(function () {</font></div><div><font style="font-size: 12pt;">  // my module</font></div><div><font style="font-size: 12pt;">}.call(window));</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">所以必须使用 CommonJS 代替 ESModule</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">扩展：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">ES Module</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 第一组</font></div><div><font style="font-size: 12pt;">export default function crc32() { // 输出</font></div><div><font style="font-size: 12pt;">  // ...</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;">import crc32 from 'crc32'; // 输入</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// 第二组</font></div><div><font style="font-size: 12pt;">export function crc32() { // 输出</font></div><div><font style="font-size: 12pt;">  // ...</font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;">import {crc32} from 'crc32'; // 输入</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">第一组是使用export default时，对应的import语句不需要使用大括号；第二组是不使用export default时，对应的import语句需要使用大括号。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">第十八节 </span><span style="font-size: 12pt; font-weight: bold;">环境变量的使用方法</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">webpack.common.js </span><span style="font-size: 12pt;">通过全局环境变量</span><span style="font-size: 12pt;"> 打包不同环境的代码</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.dev.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const webpack = require(&quot;webpack&quot;);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>const devConfig</b> = {</font></div><div><font style="font-size: 12pt;">  mode: &quot;development&quot;,</font></div><div><font style="font-size: 12pt;">  devtool: &quot;cheap-module-eval-source-map&quot;,</font></div><div><font style="font-size: 12pt;">  devServer: {</font></div><div><font style="font-size: 12pt;">    contentBase: &quot;./dist&quot;,</font></div><div><font style="font-size: 12pt;">    port: 8081,</font></div><div><font style="font-size: 12pt;">    open: true,</font></div><div><font style="font-size: 12pt;">    hot: true,</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [new webpack.HotModuleReplacementPlugin()],</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    filename: &quot;[name].js&quot;,</font></div><div><font style="font-size: 12pt;">    chunkFilename: &quot;[name].js&quot;,</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>module.exports = devConfig;</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.prod.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const OptimizeCSSAssetsPlugin = require(&quot;optimize-css-assets-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>const prodConfig =</b> {</font></div><div><font style="font-size: 12pt;">  mode: &quot;production&quot;,</font></div><div><font style="font-size: 12pt;">  // devtool: &quot;cheap-module-source-map&quot;,</font></div><div><font style="font-size: 12pt;">  optimization: {</font></div><div><font style="font-size: 12pt;">    minimizer: [new OptimizeCSSAssetsPlugin({})],</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    filename: &quot;[name].[contenthash].js&quot;,</font></div><div><font style="font-size: 12pt;">    chunkFilename: &quot;[name].[contenthash].js&quot;</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;"><b><br/></b></font></div><div><font style="font-size: 12pt;"><b>module.exports =  prodConfig;</b></font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.common.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const path = require(&quot;path&quot;);</font></div><div><font style="font-size: 12pt;">const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const { CleanWebpackPlugin } = require(&quot;clean-webpack-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);</font></div><div><font style="font-size: 12pt;">const webpack = require(&quot;webpack&quot;);</font></div><div><font style="font-size: 12pt;"><b>const merge = require(&quot;webpack-merge&quot;);</b></font></div><div><font style="font-size: 12pt;"><b>const devConfig = require(&quot;./webpack.dev.js&quot;);</b></font></div><div><font style="font-size: 12pt;"><b>const prodConfig = require(&quot;./webpack.prod.js&quot;);</b></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>const commonConfig</b> = {</font></div><div><font style="font-size: 12pt;">  entry: {</font></div><div><font style="font-size: 12pt;">    index: &quot;./src/index.js&quot;,</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  output: {</font></div><div><font style="font-size: 12pt;">    path: path.resolve(__dirname, &quot;../dist&quot;),</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  module: {</font></div><div><font style="font-size: 12pt;">    rules: [</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.css$/,</font></div><div><font style="font-size: 12pt;">        use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;],</font></div><div><font style="font-size: 12pt;">      },</font></div><div><font style="font-size: 12pt;">      {</font></div><div><font style="font-size: 12pt;">        test: /\.js$/,</font></div><div><font style="font-size: 12pt;">        exclude: /node_modules/,</font></div><div><font style="font-size: 12pt;">        use: [</font></div><div><font style="font-size: 12pt;">          {</font></div><div><font style="font-size: 12pt;">            loader: &quot;babel-loader&quot;,</font></div><div><font style="font-size: 12pt;">          },</font></div><div><font style="font-size: 12pt;">          {</font></div><div><font style="font-size: 12pt;">            loader: &quot;imports-loader?this=&gt;window&quot;</font></div><div><font style="font-size: 12pt;">          }</font></div><div><font style="font-size: 12pt;">        ]</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    ]</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  plugins: [</font></div><div><font style="font-size: 12pt;">    new HtmlWebpackPlugin({</font></div><div><font style="font-size: 12pt;">      template: &quot;./src/index.html&quot;,</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new CleanWebpackPlugin(),</font></div><div><font style="font-size: 12pt;">    new MiniCssExtractPlugin({</font></div><div><font style="font-size: 12pt;">      filename: &quot;[name].css&quot;,</font></div><div><font style="font-size: 12pt;">      chunkFilename: &quot;[name].chunk.css&quot;,</font></div><div><font style="font-size: 12pt;">    }),</font></div><div><font style="font-size: 12pt;">    new webpack.ProvidePlugin({</font></div><div><font style="font-size: 12pt;">      $: &quot;jquery&quot;,</font></div><div><font style="font-size: 12pt;">    })</font></div><div><font style="font-size: 12pt;">  ],</font></div><div><font style="font-size: 12pt;">  optimization: {</font></div><div><font style="font-size: 12pt;">    usedExports: true,</font></div><div><font style="font-size: 12pt;">    splitChunks: {</font></div><div><font style="font-size: 12pt;">      chunks: &quot;all&quot;,</font></div><div><font style="font-size: 12pt;">      cacheGroups: {</font></div><div><font style="font-size: 12pt;">        vendors: {</font></div><div><font style="font-size: 12pt;">          test: /[\\/]node_modules[\\/]/,</font></div><div><font style="font-size: 12pt;">          priority: -10,</font></div><div><font style="font-size: 12pt;">          name: &quot;vendors&quot;,</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">  },</font></div><div><font style="font-size: 12pt;">  performance: false,</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><b>module.exports = (env) =&gt; {</b></font></div><div><font style="font-size: 12pt;"><b>  if (env &amp;&amp; env.production) {</b></font></div><div><font style="font-size: 12pt;"><b>    return merge(commonConfig, prodConfig)</b></font></div><div><font style="font-size: 12pt;"><b>  }</b></font></div><div><font style="font-size: 12pt;"><b>  else {</b></font></div><div><font style="font-size: 12pt;"><b>    return merge(commonConfig, devConfig)</b></font></div><div><font style="font-size: 12pt;"><b>  }</b></font></div><div><font style="font-size: 12pt;"><b>}</b></font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">env 表示全局环境变量，如果</span><span style="font-size: 12pt;">全局环境变量存在而且传来一个production属性，说明现在是线上环境，如果什么都不传，则是开发环境</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">  &quot;scripts&quot;: {</font></div><div><font style="font-size: 12pt;">    &quot;dev-build&quot;: &quot;webpack --config ./build/webpack.common.js&quot;,</font></div><div><font style="font-size: 12pt;">    &quot;dev&quot;: &quot;webpack-dev-server --config ./build/webpack.common.js&quot;,</font></div><div><font style="font-size: 12pt;">    <b>&quot;build&quot;: &quot;webpack --env.production --config ./build/webpack.common.js&quot;</b></font></div><div><font style="font-size: 12pt;">  }</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run build</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">模块化规范</span></div><div><br/></div><div><span style="font-size: 12pt;">● ES Moudule 模块引入方式（export 和 import）</span></div><div><br/></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">CommonJS 模块引入规范（Node.js）</span></div><div><br/></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">CMD</span></div><div><br/></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">AMD</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">ES5的“</span><span style="font-size: 12pt; font-weight: bold;">模块化</span><span style="font-size: 12pt; font-weight: bold;">”</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">a.js</span></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [84].jpg" type="image/jpeg" data-filename="3.jpg" width="398"/><br/></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">b.js</span></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [85].jpg" type="image/jpeg" data-filename="3.jpg" width="535"/><br/></div><div><br/></div><div><span style="font-size: 12pt;">&quot;./&quot;：代表目前所在的目录</span></div><div><br/></div><div><span style="font-size: 12pt;">&quot; . ./&quot;代表上一层目录</span></div><div><br/></div><div><span style="font-size: 12pt;">&quot;/&quot;：代表根目录</span></div><div><br/></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [86].jpg" type="image/jpeg" data-filename="3.jpg" width="840"/><br/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">ES6的模块化</span></div><div><br/></div><div><span style="font-size: 12pt;">export有两种模块导出方式：命名式导出（名称导出）和默认导出（定义式导出）</span></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [87].jpg" type="image/jpeg" data-filename="3.jpg" width="573"/><br/></div><div><span style="font-size: 12pt;"><br/></span></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [88].jpg" type="image/jpeg" data-filename="3.jpg" width="1164"/><br/></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [89].jpg" type="image/jpeg" data-filename="3.jpg" width="1108"/><br/></div><div><br/></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [90].jpg" type="image/jpeg" data-filename="3.jpg" width="1146"/><br/></div><div><br/></div><div><br/></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack 配置 Vue</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [91].jpg" type="image/jpeg" data-filename="3.jpg" width="1020"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">cd 到对应项目目录</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">npm install vue --save // node_modules会有vue模块、node_modules会export default Vue</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">main.js </span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import Vue fome 'vue'</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">1. runtime-only -&gt; 代码中，不可以有任何的template</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">2. runtime-compiler -&gt; 代码中，可以有template，因为有compiler，可以用于编译</span><span style="font-size: 12pt;">template</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">webpack.config.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [92].jpg" type="image/jpeg" data-filename="3.jpg" width="1139"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [93].jpg" type="image/jpeg" data-filename="3.jpg" width="810"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">esm 表示 ESModule</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">创建 Vue 时 el 和 template 的 关系 </span></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [94].jpg" type="image/jpeg" data-filename="3.jpg" width="1179"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">el 挂载元素最终会被 template的模板字符串替换掉</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [95].jpg" type="image/jpeg" data-filename="3.jpg" width="1182"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Vue 的终极使用方案</span></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [96].jpg" type="image/jpeg" data-filename="3.jpg" width="1103"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [97].jpg" type="image/jpeg" data-filename="3.jpg" width="406"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">const APP 抽离为 .vue 文件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [98].jpg" type="image/jpeg" data-filename="3.jpg" width="519"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [99].jpg" type="image/jpeg" data-filename="3.jpg" width="399"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [100].jpg" type="image/jpeg" data-filename="3.jpg" width="1191"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [101].jpg" type="image/jpeg" data-filename="3.jpg" width="1137"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">原因：Vue-loader 从14版本开始需要额外安装插件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">安装 13 的版本</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [102].jpg" type="image/jpeg" data-filename="3.jpg" width="706"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [103].jpg" type="image/jpeg" data-filename="3.jpg" width="980"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">省略文件扩展名</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [104].jpg" type="image/jpeg" data-filename="3.jpg" width="810"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [105].jpg" type="image/jpeg" data-filename="3.jpg" width="569"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [106].jpg" type="image/jpeg" data-filename="3.jpg" width="1137"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><br/></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Vue CLI介绍与安装</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [107].jpg" type="image/jpeg" data-filename="3.jpg" width="1199"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div>传统的脚手架指的是建筑学的一种结构：在搭建楼房、建筑物时，临时搭建出来的一个框架。</div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">脚手架：</span><span style="font-size: 12pt;">项目最开始时，脚手架工具会生成好一些基本代码，一般是遵循MVC结构，</span><span style="font-size: 12pt;">帮你搭建好架子</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [108].jpg" type="image/jpeg" data-filename="3.jpg" width="941"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [109].jpg" type="image/jpeg" data-filename="3.jpg" width="1186"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [110].jpg" type="image/jpeg" data-filename="3.jpg" width="867"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [111].jpg" type="image/jpeg" data-filename="3.jpg" width="994"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [112].jpg" type="image/jpeg" data-filename="3.jpg" width="1058"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">runtime-compiler 与 </span><span style="font-size: 12pt; font-weight: bold;">runtime-only 区别</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [113].jpg" type="image/jpeg" data-filename="3.jpg" width="931"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [114].jpg" type="image/jpeg" data-filename="3.jpg" width="607"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [115].jpg" type="image/jpeg" data-filename="3.jpg" width="1178"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在项目中一般使用：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [116].jpg" type="image/jpeg" data-filename="3.jpg" width="1180"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [117].jpg" type="image/jpeg" data-filename="3.jpg" width="1234"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">runtime-compiler（v1）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">template-&gt;ast-&gt;render-&gt;vdom-&gt;UI</span></div><div><br/></div><div><span style="font-size: 12pt;">runtime-only（v2）（1.性能更高 2.代码量更少）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">render-&gt;vdom-&gt;UI</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">那么.vue文件中的template是由谁处理的了？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">答：由vue-template-compiler</span><span style="font-size: 12pt;">处理</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">render函数的使用</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [118].jpg" type="image/jpeg" data-filename="3.jpg" width="865"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [119].jpg" type="image/jpeg" data-filename="3.jpg" width="604"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">与下面代码效果相同：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">new vue({</font></div><div><font style="font-size: 12pt;">  el: '#app',</font></div><div><font style="font-size: 12pt;">  template: `&lt;cpn/&gt;`,</font></div><div><font style="font-size: 12pt;">  components: {</font></div><div><font style="font-size: 12pt;">    cpn</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Vue CLI2 目录</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [120].jpg" type="image/jpeg" data-filename="3.jpg" width="687"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">config文件夹和build文件夹都是脚手架的webpack配置，要先从</span><span style="font-size: 12pt;">package.json开始读，要先找 build命令 或 dev命令 开始读</span></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [121].jpg" type="image/jpeg" data-filename="3.jpg" width="1187"/><span style="font-size: 12pt;">   </span></div><div><br/></div><div><span style="font-size: 12pt;">node表示直接执行build.js文件</span></div><div><br/></div><div><img src="2- Webpack 与 Vue CLI_files/3 [122].jpg" type="image/jpeg" data-filename="3.jpg" width="673"/><br/></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [123].jpg" type="image/jpeg" data-filename="3.jpg" width="665"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [124].jpg" type="image/jpeg" data-filename="3.jpg" width="1191"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">rm() 表示第二次打包会删除之前的dist文件夹，再执行webpack()配置</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">npm run build 执行流程</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [125].jpg" type="image/jpeg" data-filename="3.jpg" width="884"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [126].jpg" type="image/jpeg" data-filename="3.jpg" width="807"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [127].jpg" type="image/jpeg" data-filename="3.jpg" width="807"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [128].jpg" type="image/jpeg" data-filename="3.jpg" width="1156"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">npm run dev</span> <span style="font-size: 12pt; font-weight: bold;">执行流程</span><span style="font-size: 12pt; font-weight: bold;">同理</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [129].jpg" type="image/jpeg" data-filename="3.jpg" width="906"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [130].jpg" type="image/jpeg" data-filename="3.jpg" width="1152"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">config文件夹</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● index.js               定义的是build需要的基础变量</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">node_modules文件夹 </span>  </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">package.json     npm install 后安装的依赖包</span></div><div><span style="font-size: 12pt;"> </span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">staic</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">文件夹</span>           </span> <span style="font-size: 12pt;">静态资源打包后会原封不动复制到dist文件夹</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">src文件夹下</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">assets文件夹的图片 会根据大小重命名转换成base64字符串</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">.babelrc 文件 ES6转ES5需要读取的配置文件</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">index.html 打包时会复制一份根目录下</span><span style="font-size: 12pt;">index.html到build文件夹</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [131].jpg" type="image/jpeg" data-filename="3.jpg" width="368"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [132].jpg" type="image/jpeg" data-filename="3.jpg" width="811"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">拉取w.x模板</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">npm install -g @vue/cli-init</span></div><div><span style="font-size: 12pt;"># `vue init` 的运行效果将会跟 `vue-cli@2.x` 相同</span></div><div><span style="font-size: 12pt;">vue init webpack my-project</span></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Vue CLI3</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">Vue CLI 分为独立的几个部分，我们需要对其进行一定的了解：</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">● CLI：</span><span style="font-size: 12pt;">即 @vue/cli，它是一个需要全局安装的 npm 包，向我们提供了 vue 命令，我们可以通过使用它来满足我们快速创建 Vue 项目的需求。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">●</span><span style="font-size: 12pt; font-weight: bold;"> CLI 服务：</span><span style="font-size: 12pt;">即 @vue/cli-service ，它是一个开发环境依赖，是一个局部安装在 @vue/cli 创建的项目中的 npm 包。</span></div><div><br/></div><div><span style="font-size: 12pt;">                   它安装了一个名为 vue-cli-service 的命令，我们可以在创建项目后的 packsge.json 文件中找到对应的 script 命令。</span></div><div><br/></div><div><span style="font-size: 12pt;">                   通过 npm 调用这些 script 命令可以达到配置服务器或打包的目的。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">●</span><span style="font-size: 12pt; font-weight: bold;"> CLI 插件：</span><span style="font-size: 12pt;">它的作用是向我们创建的项目中提供可选功能的 npm 包，可以更好的帮助我们完成对项目的管理。</span></div><div><br/></div><div><span style="font-size: 12pt;">                   同样，我们可以在 package.json 文件当中找到对应的 dependencies，这里标注了我们所安装的功能插件的信息。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [133].jpg" type="image/jpeg" data-filename="3.jpg" width="981"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [134].jpg" type="image/jpeg" data-filename="3.jpg" width="743"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Manually</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">选择配置</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">按空格 选中/取消 </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">A</span><span style="font-size: 12pt;"> 键全选，I 键全反选</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Y 确认</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Where do you prefer placing config for Babel, PostCSS, ESlint, etc.?</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">选择 Babel、PostCSS、ESLint 等配置文件存放位置，</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这里选择 In dedicated</span> <span style="font-size: 12pt;">In dedicated config files</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Save this as a preset for future projects?</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">要不要把当前的这一系列选项配置保存起来，方便下一次创建项目时复用。我选择n</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [135].jpg" type="image/jpeg" data-filename="3.jpg" width="915"/><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">C:\Users\ben\.vuerc</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">.vuerc 文件 用VSCode打开可以查看之前的VueCLI presets配置</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">rc是 run command的意思</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [136].jpg" type="image/jpeg" data-filename="3.jpg" width="345"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm run serve</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [137].jpg" type="image/jpeg" data-filename="3.jpg" width="1047"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Vue CLI3 配置文件的查看和修改</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">终端输入：</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">vue ui</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [138].jpg" type="image/jpeg" data-filename="3.jpg" width="745"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [139].jpg" type="image/jpeg" data-filename="3.jpg" width="1330"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [140].jpg" type="image/jpeg" data-filename="3.jpg" width="1351"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [141].jpg" type="image/jpeg" data-filename="3.jpg" width="908"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">package.json无法查看真实版本，查看包的真实版本的方法有：</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">1、&quot;_from&quot;: &quot;vue^@2.5.17&quot; 表示模糊的版本</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">      &quot;_id&quot;: &quot;vue@2.5.21&quot;表示真实的版本</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">2、node_modules - vue - dist - vue.js 也可以查看</span><span style="font-size: 12pt;">真实的版本</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">添加其他依赖：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">例如Vue-Router</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [142].jpg" type="image/jpeg" data-filename="3.jpg" width="1354"/><br/></span></div><div><span style="font-size: 12pt;">修改配置</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [143].jpg" type="image/jpeg" data-filename="3.jpg" width="1350"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">node_modules查看Vue CLI3隐藏的webpack配置</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [144].jpg" type="image/jpeg" data-filename="3.jpg" width="1092"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [145].jpg" type="image/jpeg" data-filename="3.jpg" width="1112"/><br/></span></div><div><font style="font-size: 12pt;"><br/></font></div></div><div><span style="font-size: 12pt;">如果想修改默认配置，必须在项目目录下添加一个vue.config.js，Vue CLI3会将</span><span style="font-size: 12pt;">vue.config.js与脚手架的webpack默认配置合并（一般不</span><span style="font-size: 12pt;">在node_modules里修改</span><span style="font-size: 12pt;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="2- Webpack 与 Vue CLI_files/3 [146].jpg" type="image/jpeg" data-filename="3.jpg" width="745"/><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><br/></div></span>
</div></body></html> 