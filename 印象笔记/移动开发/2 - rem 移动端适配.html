<html>
<head>
  <title>2 - rem 移动端适配</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606060 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="4058"/>
<h1>2 - rem 移动端适配</h1>

<div>
<span><div><b style="font-size: 12pt; color: unset; font-family: unset;">引入 meta</b><br/></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&quot;&gt;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><b>js</b></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;!-- rem移动端适配 --&gt;</font></div><div><font style="font-size: 12pt;">&lt;script&gt;</font></div><div><font style="font-size: 12pt;">  ;</font></div><div><font style="font-size: 12pt;">  (function (designWidth, maxWidth) {</font></div><div><font style="font-size: 12pt;">    var doc = document,</font></div><div><font style="font-size: 12pt;">      win = window;</font></div><div><font style="font-size: 12pt;">    var docEl = doc.documentElement;</font></div><div><font style="font-size: 12pt;">    var tid;</font></div><div><font style="font-size: 12pt;">    var rootItem, rootStyle;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    function refreshRem() {</font></div><div><font style="font-size: 12pt;">      var width = docEl.getBoundingClientRect().width;</font></div><div><font style="font-size: 12pt;">      if (!maxWidth) {</font></div><div><font style="font-size: 12pt;">        maxWidth = 540;</font></div><div><font style="font-size: 12pt;">      };</font></div><div><font style="font-size: 12pt;">      if (width &gt; maxWidth) {</font></div><div><font style="font-size: 12pt;">        width = maxWidth;</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">      //与淘宝做法不同，直接采用简单的rem换算方法1rem=100px</font></div><div><font style="font-size: 12pt;">      var rem = width * 100 / designWidth;</font></div><div><font style="font-size: 12pt;">      //兼容UC开始</font></div><div><font style="font-size: 12pt;">      rootStyle = &quot;html{font-size:&quot; + rem + 'px !important}';</font></div><div><font style="font-size: 12pt;">      rootItem = document.getElementById('rootsize') || document.createElement(&quot;style&quot;);</font></div><div><font style="font-size: 12pt;">      if (!document.getElementById('rootsize')) {</font></div><div><font style="font-size: 12pt;">        document.getElementsByTagName(&quot;head&quot;)[0].appendChild(rootItem);</font></div><div><font style="font-size: 12pt;">        rootItem.id = 'rootsize';</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">      if (rootItem.styleSheet) {</font></div><div><font style="font-size: 12pt;">        rootItem.styleSheet.disabled || (rootItem.styleSheet.cssText = rootStyle)</font></div><div><font style="font-size: 12pt;">      } else {</font></div><div><font style="font-size: 12pt;">        try {</font></div><div><font style="font-size: 12pt;">          rootItem.innerHTML = rootStyle</font></div><div><font style="font-size: 12pt;">        } catch (f) {</font></div><div><font style="font-size: 12pt;">          rootItem.innerText = rootStyle</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">      //兼容UC结束</font></div><div><font style="font-size: 12pt;">      docEl.style.fontSize = rem + &quot;px&quot;;</font></div><div><font style="font-size: 12pt;">    };</font></div><div><font style="font-size: 12pt;">    refreshRem();</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    win.addEventListener(&quot;resize&quot;, function () {</font></div><div><font style="font-size: 12pt;">      clearTimeout(tid); //防止执行两次</font></div><div><font style="font-size: 12pt;">      tid = setTimeout(refreshRem, 300);</font></div><div><font style="font-size: 12pt;">    }, false);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    win.addEventListener(&quot;pageshow&quot;, function (e) {</font></div><div><font style="font-size: 12pt;">      if (e.persisted) { // 浏览器后退的时候重新计算</font></div><div><font style="font-size: 12pt;">        clearTimeout(tid);</font></div><div><font style="font-size: 12pt;">        tid = setTimeout(refreshRem, 300);</font></div><div><font style="font-size: 12pt;">      }</font></div><div><font style="font-size: 12pt;">    }, false);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    if (doc.readyState === &quot;complete&quot;) {</font></div><div><font style="font-size: 12pt;">      doc.body.style.fontSize = &quot;16px&quot;;</font></div><div><font style="font-size: 12pt;">    } else {</font></div><div><font style="font-size: 12pt;">      doc.addEventListener(&quot;DOMContentLoaded&quot;, function (e) {</font></div><div><font style="font-size: 12pt;">        doc.body.style.fontSize = &quot;16px&quot;;</font></div><div><font style="font-size: 12pt;">      }, false);</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">  })(375, 750);</font></div><div><font style="font-size: 12pt;">&lt;/script&gt;</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div></span>
</div></body></html> 