<html>
<head>
  <title>9- 项目的联调、测试与发布</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606060 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3609"/>
<h1>9- 项目的联调、测试与发布</h1>

<div>
<span><div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">项目的联调、测试与发布</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">联调</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">之前开发的数据都是mock模拟的假数据，不是后端返回的真实数据</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">前后端联调：前端代码编写完毕，后端接口也写好时，前端就需要把模拟的数据干掉，使用后端的数据进行调试</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">在config文件夹的index.js里修改：</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3.jpg" type="image/jpeg" data-filename="3.jpg" width="536"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">修改proxyable配置项 的target地址为 内网的</span><span style="font-size: 12pt;">IP地址 </span><span style="font-size: 12pt;">/外网的域名 后端服务器</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">实现 前端向/api地址的请求 代理转发给 任何一台后端服务器（不需要Fiddler或Charles等抓包代理工具了）</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">然后重启项目</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">测试</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">启动命令行，输入命令，获取当前机器的 IP地址</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">ipconfig (windows) / ifconfig（Mac）</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [1].jpg" type="image/jpeg" data-filename="3.jpg" width="533"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">webPack devserver 不支持 使用IP地址 访问</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">在package.json中修改：</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [2].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">在同一个局域网下通过 IP地址 +  npm run dev 的端口 8080/8081 即可访问项目</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">城市列表页的Bug</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">拖动字母表时拖动的是页面屏幕</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">Alphabet.vue</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [3].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">低版本的安卓手机访问项目可能出现白屏</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">原因1：手机浏览器不支持Promise</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">安装 </span><span style="font-size: 12pt; font-weight: bold;">babel-polyfill</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">npm install babel-polyfill --save</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">重启项目</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">原因2：依然白屏的话，是Webpack的devserver 问题 ，打包上线就好了</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Vue项目的打包上线</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">第一种</span><span style="font-size: 12pt; font-weight: bold;">打包上线</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第一步</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">cd 到项目</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">npm run build</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第二步</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">项目会多出一个dist文件夹</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [4].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">把dist文件夹的内容 index.html 和 static 放到 后台的根路径即可</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [5].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第二种</span></font><span style="font-size: 12pt; font-weight: bold;">打包上线</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">如果后端需要在 /project 路径下显示首页  </span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">首先，config 文件夹下的 index.js 修改如下：</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [6].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第二步</span></font></div><div><br/></div><div><span style="font-size: 12pt;">cd 到项目</span></div><div><br/></div><div><span style="font-size: 12pt;">npm run build</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第三步</span></span></div><div><br/></div><div><span style="font-size: 12pt;">项目会多出一个dist文件夹</span></div><div><br/></div><div><img src="9- 项目的联调、测试与发布_files/3 [7].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">dist文件夹重命名为project </span></span></div><div><br/></div><div><img src="9- 项目的联调、测试与发布_files/3 [8].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">把project文件夹 放到 后台的根路径即可</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [9].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Vue的异步组件</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">打开打包上线后的static文件夹</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [10].jpg" type="image/jpeg" data-filename="3.jpg" width="378"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">.map文件是sourcemap文件，用于开发时作调试</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [11].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">js文件夹下有用的也只是除了.map文件外的三个js文件</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">mainifest.js 是webPack打包生成的配置文件</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">vendor.js 是各页面组件公用的代码</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">app.js 是</span><span style="font-size: 12pt;">各页面的业务逻辑代码</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">打开后端路径，页面会加载三个js文件</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">进入首页，app.js会执行所有页面的业务逻辑代码，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当 app.js &gt; 1MB，时是必须优化的</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">我们希望，访问首页只加载首页的业务逻辑代码，不需要加载列表页和详情页的</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">业务逻辑</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">代码，这就是异步加载（按需加载）</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [12].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">router 文件夹下的 index.js 修改如下即可：</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [13].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [14].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当 app.js &lt; 1MB时使用异步组件会得不偿失，因为每进入下一个页面就会发一个HTTP请求</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">其他组件也可以使用异步组件</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [15].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">访问首页会加载三个js文件，project2.js加载首页，project1加载首页的Header</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="9- 项目的联调、测试与发布_files/3 [16].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">后续学习指南</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">学习 Vue 的 自定义指令 和 插件等边缘知识点</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">学习 Vue-Router 的 命名路由 重定向别名 路由守卫</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">学习 Vuex 的 项目结构 和 其他插件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">学习 服务器端渲染 （工作一年后） =&gt; </span><span style="font-size: 12pt;">学习 Vue源码</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">学习 Webpack 和 Babel</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div></div><div><br/></div></span>
</div></body></html> 