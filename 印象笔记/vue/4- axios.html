<html>
<head>
  <title>4- axios</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606060 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="4970"/>
<h1>4- axios</h1>

<div>
<span><div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3.jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [1].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [2].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [3].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">axios 库的基本使用</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><a href="http://www.axios-js.com/zh-cn/docs/#axios-url-config" style="font-size: 12pt;">http://www.axios-js.com/zh-cn/docs/#axios-url-config</a></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">默认情况下，axios 为 GET请求</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [4].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">config 是一个对象，</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import axios from 'axios'</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">axios({</font></div><div><font style="font-size: 12pt;">  url: '123.207.32.32:8000'</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">URL传进去，请求之后怎么拿到数据呢？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">以前 JSONP 的做法</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">axios({</font></div><div><font style="font-size: 12pt;">  url: '123.207.32.32:8000',</font></div><div><font style="font-size: 12pt;">  success: function() {}</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">现在的做法（axios 支持 promise）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import axios from 'axios'</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">axios({</font></div><div><font style="font-size: 12pt;">  url: '123.207.32.32:8000'</font></div><div><font style="font-size: 12pt;">}).then(res =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(res)</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">默认情况下是 GET 请求，但是可以在 config 中修改请求方式</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import axios from 'axios'</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">axios({</font></div><div><font style="font-size: 12pt;">  url: '123.207.32.32:8000',</font></div><div><font style="font-size: 12pt;">  method: 'get'</font></div><div><font style="font-size: 12pt;">}).then(res =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(res)</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">接口支持 JSONP 时，后端会这样传：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [5].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import axios from 'axios'</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">axios({</font></div><div><font style="font-size: 12pt;">  url: '123.207.32.32:8000/home/data?type=sell&amp;page=3',</font></div><div><font style="font-size: 12pt;">  method: 'get'</font></div><div><font style="font-size: 12pt;">}).then(res =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(res)</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">可以写成带参数的，axios最后会自动拼接 URL，所以两块代码效果是一样的，params 专门针对 GET 请求参数的拼接：</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import axios from 'axios'</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">axios({</font></div><div><font style="font-size: 12pt;">  url: '123.207.32.32:8000/home/data',</font></div><div><font style="font-size: 12pt;">  method: 'get',</font></div><div><font style="font-size: 12pt;">  params: {</font></div><div><font style="font-size: 12pt;">    type: 'sell',</font></div><div><font style="font-size: 12pt;">    page: 1</font></div><div><font style="font-size: 12pt;">  }</font></div><div><font style="font-size: 12pt;">}).then(res =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(res)</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [6].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">axios 发送并发请求（一般发送两个请求，等两个请求都到达之后）</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">jQuery 和 Promise 方式 </span><span style="font-size: 12pt; font-weight: bold;">发送并发请求</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 请求一:</font></div><div><font style="font-size: 12pt;">// let isResult1 = false</font></div><div><font style="font-size: 12pt;">// let isResult2 = false</font></div><div><font style="font-size: 12pt;">// $ajax({</font></div><div><font style="font-size: 12pt;">//   url: '',</font></div><div><font style="font-size: 12pt;">//   success: function () {</font></div><div><font style="font-size: 12pt;">//     console.log('结果1');</font></div><div><font style="font-size: 12pt;">//     isResult1 = true</font></div><div><font style="font-size: 12pt;">//     handleResult()</font></div><div><font style="font-size: 12pt;">//   }</font></div><div><font style="font-size: 12pt;">// })</font></div><div><font style="font-size: 12pt;">// // 请求二:</font></div><div><font style="font-size: 12pt;">// $ajax({</font></div><div><font style="font-size: 12pt;">//   url: '',</font></div><div><font style="font-size: 12pt;">//   success: function () {</font></div><div><font style="font-size: 12pt;">//     console.log('结果2');</font></div><div><font style="font-size: 12pt;">//     isResult2 = true</font></div><div><font style="font-size: 12pt;">//     handleResult()</font></div><div><font style="font-size: 12pt;">//   }</font></div><div><font style="font-size: 12pt;">// })</font></div><div><font style="font-size: 12pt;">//</font></div><div><font style="font-size: 12pt;">// function handleResult() {</font></div><div><font style="font-size: 12pt;">//   if (isResult1 &amp;&amp; isResult2) {</font></div><div><font style="font-size: 12pt;">//     //</font></div><div><font style="font-size: 12pt;">//   }</font></div><div><font style="font-size: 12pt;">// }</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">Promise.all([</font></div><div><font style="font-size: 12pt;">    // new Promise((resolve, reject) =&gt; {</font></div><div><font style="font-size: 12pt;">    //   $.ajax({</font></div><div><font style="font-size: 12pt;">    //     url: 'url1',</font></div><div><font style="font-size: 12pt;">    //     success: function (data) {</font></div><div><font style="font-size: 12pt;">    //       resolve(data)</font></div><div><font style="font-size: 12pt;">    //     }</font></div><div><font style="font-size: 12pt;">    //   })</font></div><div><font style="font-size: 12pt;">    // }),</font></div><div><font style="font-size: 12pt;">    // new Promise((resolve, reject) =&gt; {</font></div><div><font style="font-size: 12pt;">    //   $.ajax({</font></div><div><font style="font-size: 12pt;">    //     url: 'url2',</font></div><div><font style="font-size: 12pt;">    //     success: function (data) {</font></div><div><font style="font-size: 12pt;">    //       resolve(data)</font></div><div><font style="font-size: 12pt;">    //     }</font></div><div><font style="font-size: 12pt;">    //   })</font></div><div><font style="font-size: 12pt;">    // })</font></div><div><font style="font-size: 12pt;">  new Promise((resolve, reject) =&gt; {</font></div><div><font style="font-size: 12pt;">    setTimeout(() =&gt; {</font></div><div><font style="font-size: 12pt;">      resolve({name: 'why', age: 18})</font></div><div><font style="font-size: 12pt;">    }, 2000)</font></div><div><font style="font-size: 12pt;">  }),</font></div><div><font style="font-size: 12pt;">  new Promise((resolve, reject) =&gt; {</font></div><div><font style="font-size: 12pt;">    setTimeout(() =&gt; {</font></div><div><font style="font-size: 12pt;">      resolve({name: 'kobe', age: 19})</font></div><div><font style="font-size: 12pt;">    }, 1000)</font></div><div><font style="font-size: 12pt;">  })</font></div><div><font style="font-size: 12pt;">]).then(results =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(results);</font></div><div><font style="font-size: 12pt;">})</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">axios.spread() 表示在</span><span style="font-size: 12pt; font-weight: bold;">两个请求执行完成后，才执行 axios.spread() 中的函数：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [7].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">注意：axios.all()、axios.spread()</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">是 axios 的静态方法，不是 axios 实例的方法！</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">公共的全局配置</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">多个请求有些配置是重复的，所以需要使用全局配置抽取出来</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [8].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">常见的配置选项</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">请求的查询字符串参数 和 响应的请求体</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">params 对应 GET 请求</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">data 对应 POST 请求</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [9].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">axios 的实例</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [10].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Ngnix 反向代理</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [11].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">反向代理服务器 哪个服务器请求量小，就把请求发送给哪个服务器</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">所以服务器的接口地址有可能改变</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">使用全局配置请求设置 URL 等配置就不合理了：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><img src="4- axios_files/3 [12].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这时就需要创建 axios 实例了（每个实例都可以有自己不同的配置，而不是全局相同的配置）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [13].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [14].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">对 axios 进行</span><span style="font-size: 12pt; font-weight: bold;">模块封装</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [15].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [16].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">上面开发思路虽然可以，但是不建议上面那样在每个组件中依赖同一个库（依赖性太强），因为一旦那个库不再维护了或者有bug，就要从一个个组件找出来修改</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">所以需要对 axios 进行封装</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">只要引用了一个第三方的东西，千万不要在每个组件里都对它有所依赖！</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [17].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">1、回调函数版</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [18].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">回调函数版使用方式</span></div><div><br/></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [19].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">回调函数与面向切片编程很像，如：function，function（命名或匿名都一样） 对应 success，function(res) 对应  success(res)。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">2、Promise版</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [20].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Promise</span><span style="font-size: 12pt;">简化版：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [21].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">Promise简化版使用方式</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [22].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">假如 axios 不再维护：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [23].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [24].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">ruquest.js</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">import axios from 'axios'</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">export function request(config) {</font></div><div><font style="font-size: 12pt;">  // 1、创建 axios 实例</font></div><div><font style="font-size: 12pt;">  const instance = axios.create({</font></div><div><font style="font-size: 12pt;">    baseURL: &quot;http://123.207.32.32:8000&quot;,</font></div><div><font style="font-size: 12pt;">    timeout: 5000</font></div><div><font style="font-size: 12pt;">  });</font></div><div><font style="font-size: 12pt;">  // axios 拦截器</font></div><div><font style="font-size: 12pt;">  // 2、请求拦截</font></div><div><font style="font-size: 12pt;">  instance.interceptors.request.use(config =&gt; {</font></div><div><font style="font-size: 12pt;">    return config         // 拦截请求（并处理）后一定要把请求数据返回，才能将请求发送到服务器，否则 axios 内部发生请求就没有 config ，请求不了</font></div><div><font style="font-size: 12pt;">  }, err =&gt; {</font></div><div><font style="font-size: 12pt;">    console.log(&quot;error&quot;); // 请求错误，如网络断开时请求发送不出去</font></div><div><font style="font-size: 12pt;">  })</font></div><div><font style="font-size: 12pt;">  // 3、响应拦截</font></div><div><font style="font-size: 12pt;">  instance.interceptors.response.use(res =&gt; {</font></div><div><font style="font-size: 12pt;">    return res.data       // 处理数据后返回响应结果的数据，在其他地方才能拿到</font></div><div><font style="font-size: 12pt;">  }, err =&gt; {</font></div><div><font style="font-size: 12pt;">    console.log('error')</font></div><div><font style="font-size: 12pt;">  })</font></div><div><font style="font-size: 12pt;">  // 4、 发送真正的网络请求（ Get 请求），返回 Promise，可以 .then</font></div><div><font style="font-size: 12pt;">  return instance(config)</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">请求拦截没有返回会出错：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [25].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">axios 拦截器的使用</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [26].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">第一种情况的例子：添加 请求的 headers </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">第二种情况的例子：</span><span style="font-size: 12pt;">请求拦截里显示</span><span style="font-size: 12pt;"> loding 图标，响应拦截里隐藏它</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">第三种情况的例子：登录时必须携带 token 令牌，如果携带，就发送请求，如果没有携带，就跳转到一个地方，让他重新登录</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="4- axios_files/3 [27].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div></div><div><br/></div></span>
</div></body></html> 