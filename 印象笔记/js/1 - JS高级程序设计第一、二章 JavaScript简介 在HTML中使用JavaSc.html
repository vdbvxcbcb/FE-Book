<html>
<head>
  <title>1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaScript</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606060 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5176"/>
<h1>1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaScript</h1>

<div>
<span><div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">JavaScript 简介</span></font></div><div><br/></div><div><span style="font-size: 12pt;">黑色一级、二标题 蓝色 三级标题 红色重要内容、紫色次要内容</span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">为什么语言很重要？</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在计算机诞生之初，没有编程语言。程序看起来像是这样的：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3.jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这是一个将数字从1到10加在一起并打印出结果的程序：1 + 2 + … + 10 = 55。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">它可以运行在一台简单的虚拟机器上。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">要对早期的计算机进行编程，必须在正确的位置设置大型开关阵列，或者在纸带上打孔并将它们送入计算机。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">你可以想象编写这种程序是多么乏味和容易出错。即使编写简单的程序也需要很多聪明才智和规则。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">编写复杂的程序几乎是不可思议的。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">下面是 JavaScript 中的相同程序：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [1].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">最后，如果我们正好有方便的 range 和 sum 操作可用，可以分别创建一个范围内的数字集合并计算数字集合的总和，例如下面的这个程序：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [2].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这个故事的寓意是，同一个程序的表达方式可长可短，可读性有好有坏。</span></div><div><br/></div><div><span style="font-size: 12pt;">程序的第一个版本非常晦涩难懂，而最后一个版本几乎是一句直白的话：记录（log）从1到10的数字范围（range）内的总和（sum）。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">一种好的编程语言可以帮助程序员使用计算机必须在更高级别执行的操作。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">它有助于省略细节，提供方便的构件（例如 while 和 console.log），允许你定义自己的构件（例如 sum 和 range），并使这些构件易于组合。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">什么是 JavaScript？</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">广义的定义</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">JavaScript (简称JS) 是一种</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">轻量级（</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">动态类型，</span></span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">语法规则不是很严格）的</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">基于</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">原型和</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">对象、事件驱动</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">的解释性</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">脚本</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">语言（编程语言）。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">通常用于客户端（client-side），</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">创建动态交互网页。</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">不过，也常通过像Node.js这样的包，用于服务器端（server-side）。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">JavaScript 使开发者能通过 DOM 来操纵网页内容、或透过 AJAX 与 IndexedDB 来操作数据；还可以用它在 canvas 上面绘图、通过各种 API 与运行浏览器的各种设备交互。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">J</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">S 是一种脚本语言，只能通过 Web 浏览器解释和执行来完成一些操作，不能像普通意义上的程序那样独立运行。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">它是标准 Web 技术蛋糕的第三层。</span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [3].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">JavaScript与名为Java的编程语言几乎无关。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">采用相似名称是出自营销考虑，而不是合理的判断。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">当 JavaScript 出现时，Java 语言正在大规模推广并且越来越受欢迎。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">有人认为尝试搭乘这一成功语言的顺风车是一个好主意。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">现在我们已经无法摆脱这个名字了。</span></div><div><br/></div><div><font style="font-size: 12pt;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">script</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> （</span><span style="font-size: 12pt; font-weight: bold;">脚本</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">）</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">就像</span><span style="font-size: 12pt;">演戏时用到的</span><span style="font-size: 12pt;">剧本一样</span><span style="font-size: 12pt;">，脚本其实就是一系列指令——演员看了指令就知道自己该表演什么，说什么台词；计算机看了指令就知道自己该做什么事情。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">有人会说 JavaScript 有许多糟糕之处。其中很多都是确实存在的。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">有一个真正的问题：JavaScript在它允许的内容上过于自由。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这种设计背后的初衷是，它将使初学者更容易使用JavaScript进行编程。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">实际上，因为系统不会向你指出问题，所以更难以在程序中发现问题。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">不过，这种灵活性也有其优点。它为许多技术留下了空间，这些技术在更严格的语言中是不可能实现的。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Web浏览器不是唯一使用JavaScript的平台。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">一些数据库（如MongoDB和CouchDB）也使用JavaScript作为脚本和查询语言。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">用于桌面和服务器编程的几个平台为在浏览器之外编写JavaScript提供了环境，其中最值得注意的是Node.js项目。</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">最初数据验证：</span></span></div><div><br/></div><div><span style="font-size: 12pt;">想把表单验证交给浏览器而不是服务器，如果总是需要服务器端验证，90年代网速慢，验证时会跳转到空白页，用户需要等待而不能做任何操作。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">现在</span><span style="font-size: 12pt; font-weight: bold;">逐步发展到成为一门功能全面的编程语言，其使用范围已经超越浏览器</span><span style="font-size: 12pt; font-weight: bold;">：</span></div><div><br/></div><div><span style="font-size: 12pt;">1. 网页特效</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">2. 服务器端开发（</span><span style="font-size: 12pt;">Node.js</span><span style="font-size: 12pt;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">3. 命令行工具（</span><span style="font-size: 12pt;">Node.js</span><span style="font-size: 12pt;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">4.</span> <span style="font-size: 15px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(26, 26, 26); font-family: -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">跨平台的</span><span style="font-size: 12pt;">桌面程序（</span><span style="font-size: 12pt;">Electron</span><span style="font-size: 12pt;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">5. App（</span><span style="font-size: 12pt;">Cordova</span><span style="font-size: 12pt;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">6. 控制硬件-物联网（</span><span style="font-size: 12pt;">Ruff</span><span style="font-size: 12pt;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">7. 游戏开发（</span><span style="font-size: 12pt;">cocos2d-js</span><span style="font-size: 12pt;">）</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">扩展历史：</span></span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [4].jpg" type="image/jpeg" data-filename="3.jpg"/><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3.png" type="image/png" data-filename="3.png" width="286"/></div><div><br/></div><div><span style="font-size: 12pt;">现在的Firefox（火狐）就是曾经的</span><span style="font-size: 12pt;">Netscape（网景）。</span></div><div><br/></div><div><span style="font-size: 12pt;">JS诞生于1995年，是Netscape公司与Sun公司合作开发的，</span><span style="font-size: 12pt;">最开始的名字是LiveScript，</span><span style="font-size: 12pt;">为了商业推广（蹭热度），所以取名为JavaScript。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Java与JavaScript的区别：Java是服务器端编程语言，</span><span style="font-size: 12pt;">JavaScript是客户端编程语言</span><span style="font-size: 12pt;">。</span></div><div><br/></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [5].jpg" type="image/jpeg" data-filename="3.jpg" width="247"/></div><div><br/></div><div><span style="font-size: 12pt;">JS 之父是当时 </span><span style="font-size: 12pt;">Netscape 公司的</span><span style="font-size: 12pt;">布兰登·艾奇。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">它的优秀之处并非原创，它的原创之处并不优秀。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">它</span><span style="font-size: 12pt;">借鉴了 C 语言、Java 语言、Self 语言和 Scheme 语言，是</span><span style="font-size: 12pt;">两种语言风格的混合产物 ——（</span><span style="font-size: 12pt;">简化的</span><span style="font-size: 12pt;">）函数式编程 +（</span><span style="font-size: 12pt;">简化的</span><span style="font-size: 12pt;">）面向对象编程。</span></div><div><br/></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">计算机的组成：</span></div><div><br/></div><div><span style="font-size: 12pt;">软件（应用软件在系统软件的支持下运行，系统软件需要硬件支持）</span></div><div><br/></div><div><span style="font-size: 12pt;">● 应用软件：浏览器（</span><span style="font-size: 12pt;">Chrome / IE / Firefox</span><span style="font-size: 12pt;">）、QQ、Sublime、Word</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● 系统软件：Windows、Linux、mac OSX</span></div><div><br/></div><div><span style="font-size: 12pt;">硬件</span></div><div><br/></div><div><span style="font-size: 12pt;">● 三大件：CPU、内存、硬盘 —— 主板</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● 输入设备：鼠标、键盘、摄像头等</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● 输出设备：显示器、打印机、投影仪等</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">内存：临时存储用，断电不保存</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">硬盘：ctrl+s，持久保存</span></span></div><div><br/></div><div><span style="font-size: 12pt;">内存是计算机中重要的部件之一，它是与CPU进行沟通的桥梁。计算机中所有程序的运行都是在内存中进行的，因此内存的性能对计算机的影响非常大。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">内存也被称为 内存储器 或 主存储器，其作用是用于暂时存放CPU中的运算数据，以及和硬盘等外部存储器交换的数据。下面是CPU的组成和工作原理：</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [1].png" type="image/png" data-filename="3.png" width="610"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">存储器是用来存储程序和数据的部件，对于计算机来说，有了存储器，才有记忆功能，才能保证正常工作。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">存储器的种类很多，按其用途可分为主存储器和辅助存储器，主存储器又称内存储器（简称内存）。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">我们在电脑上输入文字、字符的时候，它就会被存入内存中，只有当你选择保存文件的时候，内存中的数据才会被存入硬盘。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">内存是CPU能够直接寻址的存储空间，特点是存取速率特别快，临时存放数据，不能永久保存数据。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">外存是计算机的存储器的一种，主要用来存放暂时不用的程序和数据。特定是容量大、价格低，但是存取速度慢。外存和内存之间尝尝频繁的交换信息。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">什么是内存地址？</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">内存地址是用于软硬件等不同层级中的数据概念，用来访问内存中的数据。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">主板</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/1496916239525.png" type="image/png" data-filename="1496916239525.png" width="372"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在机器的表面之下，程序在运转。 它毫不费力就可以扩大和缩小。 在和谐的关系中，电子散开并重新聚合。</span><span style="font-size: 12pt;">显示器上的形态只是水面上的涟漪。本质在下面是看不见的。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">—— Master Yuan-Ma，《The Book of Programming》</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [6].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">计算机世界里只有数据。 你可以读取数据，修改数据，创建新数据 - 但不能提及不是数据的东西。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">比特（二进制位）是任何一种二值化的东西，通常被描述为 0 和 1 。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在计算机内部，它们采取诸如高或低电荷、强或弱信号、光盘表面上的亮点或暗点等形式。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">任何一条离散信息都可以简化为 0 和 1 的序列，从而以比特表示。</span></div><div><br/></div><div><span style="font-size: 12pt;">例如，我们可以用二进制位表示数字 13 。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">它的工作方式与十进制数相同，但不是有 10 个不同的数码，而是只有2 个不同的数码，每个二进制位的权重从右到左依次增加2倍。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">以下是构成数字 13 的二进制位，其下方显示的为数字权重：</span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [7].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div><span style="font-size: 12pt;">所以这是二进制数 00001101 。它的非零数码分别代表 8 、4 和 1，加在一起是 13 。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">想象一下比特海 —— 由比特组成的海洋。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3.gif" type="image/gif" data-filename="3.gif"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">典型的现代计算机在其易失性数据存储（工作内存）中具有超过300亿比特。非易失性存储（硬盘或同等产品）往往还要高几个数量级。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">为了能够使用这么多的位而不会丢失，我们必须将它们分成代表信息片段的块。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">在 JavaScript 环境中，这些块称为值。虽然所有的值都是由二进制位组成的，但它们扮演着不同的角色。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">每个值都有一个确定其角色的类型。有些值是数字，有些值是文本，有些值是函数，等等。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">要创建值，你只需调用（invoke）其名称即可。</span><span style="font-size: 12pt; color: unset; font-family: unset;">这很方便。你无须为你的值收集原料或为其付费。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">你只需要呼叫一个值，就能拥有它。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">当然，它们并非是真的凭空创造出来的。每个值都必须存储在某个地方，如果你想同时使用大量的值，则可能会耗尽内存。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">幸运的是，只有当你同时需要它们时，这才是个问题。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">一旦你不再使用一个值，它就会消失，留下它的比特循环利用充当下一代值的原料。</span></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">JavaScript </span><span style="font-size: 12pt; font-weight: bold;">的组成</span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [8].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/QQ图片20170810172512.png" type="image/png" data-filename="QQ图片20170810172512.png" width="426"/></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">ECMAScript —— </span><span style="font-size: 12pt; font-weight: bold;">JavaScript语言核心</span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [9].jpg" type="image/jpeg" data-filename="3.jpg" width="373"/></div><div><br/></div><div><span style="font-size: 12pt;">ECMA 是 </span><span style="font-size: 12pt;">Ecma 国际（前身为欧洲计算机制造商协会）</span><span style="font-size: 12pt;">，因为 </span><span style="font-size: 12pt;">网景的 JavaScript 和 </span><span style="font-size: 12pt;">微软的 JScript 使开发者需要大量考虑浏览器兼容性，所以 </span><span style="font-size: 12pt;">ECMA 推出了 </span><span style="font-size: 12pt;">ECMAScript 。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/4.png" type="image/png" data-filename="4.png"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">1997年，为解决存在不同厂商各自 JavaScript 版本的问题。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">欧洲计算机制造商协会ECMA负责标准化一种通用、跨平台、供应商中立的脚本语言的语法和语义，最终完成了ECMA-262——一种名为ECMAScript的新脚本语言标准。</span></div><div><br/></div><div><span style="font-size: 12pt;">到了2008年，五大主流Web浏览器（IE、Firefox、Safari、Chrome和Opera）全部做到了与 ECMA-262 兼容。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">JavaScript有好几个版本。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">ECMAScript 第3版是 JavaScript 在 2000 年到 2010 年逐渐占据主导地位时得到广泛支持的版本。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在此期间，ECMA 正在雄心勃勃地开发第 4 版，此版本计划对该语言进行一些彻底的改进和扩展。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">以这种激进的方式改变一种活生生的、广泛使用的语言，在现实中非常困难，所以 ECMA 在2008 年放弃开发第 4 版，这导致改动远不那么激进的第5版。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">第 5 版于 2009 年发布，只进行了一些无争议的改进。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">然后在 2015 年发布了第 6 版，这是一个重大更新，其中包括原计划加到第 4 版中的一些想法。从那时起，我们每年都有新的小更新。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">语言不断发展这一事实意味着浏览器必须不断跟进，如果你使用的是较旧的浏览器，则可能无法支持所有功能。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">语言设计人员谨慎地不做任何可能破坏现有程序的更改，因此新浏览器仍然可以运行旧程序。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">JavaScript 与 </span><span style="font-size: 12pt; font-weight: bold;">ECMAScript 的关系：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">在实践中，ECMAScript 和 JavaScript 这两个术语可以互换使用，它们是同一种语言的两个名称。</span></span></div><div><br/></div><div><span style="font-size: 12pt;">JavaScript 是 1995 年创造的，它在 1997 年提交给 Ecma 国际，因此才有了 ECMAScript。</span></div><div><br/></div><div><span style="font-size: 12pt;">ECMAScript 是基于 JavaScript 的，而 JavaScript 也是基于 ECMAScript 的，两者密不可分。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">ECMAScript </span><span style="font-size: 12pt; font-weight: bold;">是一套脚本语言的标准，</span><span style="font-size: 12pt; font-weight: bold;">提供了脚本语言需要遵守的规则、细节和规范。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">JavaScript </span><span style="font-size: 12pt; font-weight: bold;">基本上实现了 ECMA-262 的标准，但是也有一些不同</span><span style="font-size: 12pt; font-weight: bold;">。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">换句话说，JavaScript 是 ECMAScript 的方言。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">简单地说，ECMAScript 是标准，而 JavaScript 是实现，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">ECMAScript </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">与具体实现无关。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">ECMA-262 定义的 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">ECMAScript 与 Web浏览器没有依赖关系。</span></div><div><br/></div><div><span style="font-size: 12pt;">ECMAScript</span><span style="font-size: 12pt;">规定</span><span style="font-size: 12pt;">JavaScript</span><span style="font-size: 12pt;">语言的组成部分：</span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [10].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">DOM和BOM</span></span></span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">DOM和BOM是浏</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">览器提供的一套操作浏览器功能和页面元素的API，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">是两个工具，</span> <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(255, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">是宿主环境提供的语言扩展</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">。</span></div><div><br/></div><div><span style="font-size: 12pt;">DOM是</span><span style="font-size: 12pt;">一套操作页面元素的API，它</span><span style="font-size: 12pt;">把HTML文档看成树，它可以生长出网页的树枝、树叶。</span></div><div><br/></div><div><span style="font-size: 12pt;">BOM是</span><span style="font-size: 12pt;">一套操作浏览器功能的API，控制浏览器窗口，比如：弹出框、跳转链接等。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">BOM 和 DOM 并不是唯一的浏览器 API。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">JavaScript 引擎（</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">执行 Javascript 代码的虚拟机</span></span><span style="font-size: 12pt; font-weight: bold;">）</span></div><div><br/></div><div><span style="font-size: 12pt;">同义词：</span><span style="font-size: 12pt;">JavaScript</span><span style="font-size: 12pt;">解释器</span><span style="font-size: 12pt;">，</span><span style="font-size: 12pt;">JavaScript解析</span><span style="font-size: 12pt;">器，</span><span style="font-size: 12pt;">JavaScript 实现</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览器中会有 JavaScript 引擎，比如 Chrome 的 V8</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（用 C++ 编写）</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，Firefox 的 SpiderMonkey，Edge 的 Chakra。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">编译器是将源代码编译为另外一种代码（比如机器码，或者字节码）</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，往往是在「执行」之前完成，</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">「产出」是</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">可执行或需要再编译或者解释的「另一种代码」。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">因为如果源代码还不能直接被执行，那么就需要再编译或解释一遍，再交由计算机硬件执行。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">解释器是</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">把源代码一行一行地</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">解析（</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">读懂</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">然后执行，发生在运行时，</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">「产出」</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">是「代码运行结果」。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">有些解释器</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">会集成编译器，缓存编译结果，用来提高执行效率，</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">比如 V8，为了提高 JavaScript 的运行性能，它会在运行之前将 JavaScript 编译为本地的机器码然后再去执行。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">再比如，firebug 的 console（火狐浏览器的开发者工具） 也是一个 JavaScript 解释器。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">JavaScript 引擎处理 JavaScript 代码，类似于人对语言的处理，</span><span style="font-size: 12pt;">一行一行翻译给CPU去执行</span><span style="font-size: 12pt;">。</span></div><div><br/></div><div><span style="font-size: 12pt;">如果拿我们日常行为中的“走”、“跑”、“跳”来举例的话， JavaScript 引擎是真正能够理解这些动作是何意义的根本机制。</span></div><div><br/></div><div><span style="font-size: 12pt;">所以，JavaScript 引擎是</span><span style="font-size: 12pt;">能够“读懂” JavaScript 代码，并准确地给出代码运行结果的一段程序。</span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [2].png" type="image/png" data-filename="3.png" width="352"/></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">JavaScript 运行时</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">解释器通常工作在运行时，运行时是</span><span style="font-size: 12pt;">JavaScript 代码运行所在的环境，被 JavaScript 引擎所解释。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">运行时提供了 JavaScript 可以运行和操作的宿主对象。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">同义词：宿主环境</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [3].png" type="image/png" data-filename="3.png" width="420"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">JavaScript 运行时是在脚本语言定义中所提到的“一直存在的实体或系统”。代码通过 JavaScript 引擎传递，一旦被解析和被理解之后，实体或系统将会执行解释行为。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">例如，一条狗走路，一个人跑步，视频游戏中的角色跳跃（在上图中是搞破坏）。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">对于客户端来说，</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">JavaScript 运行时是 web 浏览器，其中</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">提供了语言的扩展如</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">window或</span></span> <span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">document</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">宿主对象可供操作，</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">DOM和BOM</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">是 Web API ，即</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览器</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">所提供的对象。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">对于服务器端来说，JavaScript 运行时是 Node.js 。服务器相关的宿主对象，如文件系统、处理和请求都在 Node.js 中提供。</span></span></span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Web浏览器只是</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">ECMAScript实现可能的宿主环境之一，其他宿主环境包括 Node（一种服务器端JavaScript平台）和 Adobe Flash.</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">有趣的一点是：不同的 JavaScript 运行时可以分享同样的 JavaScript 引擎。例如 V8 ，是既为 Google Chrome 也为 Node.js 所用的 JavaScript 引擎，它有着两个截然不同的环境。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">它到底可以做什么？</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">JavaScript 语言的核心包含一些普遍的编程特性，可以让你可以做到如下的事情（更改名字）：</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">HTML：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;p&gt;玩家1：小明&lt;/p&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">CSS：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">p {</span></div><div><span style="font-size: 12pt;">  font-family: sans-serif, '黑体';</span></div><div><span style="font-size: 12pt;">  letter-spacing: 1px;</span></div><div><span style="font-size: 12pt;">  text-transform: uppercase;</span></div><div><span style="font-size: 12pt;">  text-align: center;</span></div><div><span style="font-size: 12pt;">  border: 2px solid rgba(0, 0, 200, 0.6);</span></div><div><span style="font-size: 12pt;">  background: rgba(0, 0, 200, 0.3);</span></div><div><span style="font-size: 12pt;">  color: rgba(0, 0, 200, 0.6);</span></div><div><span style="font-size: 12pt;">  box-shadow: 1px 1px 2px rgba(0, 0, 200, 0.4);</span></div><div><span style="font-size: 12pt;">  border-radius: 10px;</span></div><div><span style="font-size: 12pt;">  padding: 3px 10px;</span></div><div><span style="font-size: 12pt;">  display: inline-block;</span></div><div><span style="font-size: 12pt;">  cursor: pointer;</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Javascript：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">const para = document.querySelector('p');</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">para.addEventListener('click', updateName);</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">function updateName() {</span></div><div><span style="font-size: 12pt;">  let name = prompt('输入一个新的名字：');</span></div><div><span style="font-size: 12pt;">  para.textContent = '玩家1：' + name;</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><span style="font-size: 12pt;">效果图：</span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [11].jpg" type="image/jpeg" data-filename="3.jpg"/><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [12].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">API</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">JavaScript 语言核心之上所构建的功能</span><span style="font-size: 12pt;">更令人兴奋.</span></div><div><br/></div><div><span style="font-size: 12pt;">应用程序编程接口（Application Programming Interfaces（API））将为你的代码提供额外的超能力。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">API 是已经建立好的一套代码组件，可以让开发者实现原本很难甚至无法实现的程序。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">就像现成的家具套件之于家居建设，用一些已经切好的木板组装一个书柜，显然比自己设计，寻找合适的木头，裁切至合适的尺寸和形状，再组装成书柜要简单得多。</span></div><div><br/></div><div><span style="font-size: 12pt;">API 通常分为两类：</span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [13].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">浏览器 API</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览器API内置于浏览器中，能够</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">公开显示计算机周围环境的数据，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">或者做实用的复杂工作</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">例如：</span></div><div><br/></div><div><span style="font-size: 12pt;">●</span> <span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">文档对象模型 API（DOM（Document Object Model）API）</span><span style="font-size: 12pt;">： </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">能通过创建、移除和修改 HTML，</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">为页面动态应用新的CSS样式等手段来操作 HTML 和 CSS。</span><span style="font-size: 12pt;">比如</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">当某个页面出现了一个弹窗，或者显示了一些新内容（像上文更改名字 demo 中看到那样），这就是 DOM 在运行。</span></div><div><br/></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">地理位置 API（Geolocation API）</span><span style="font-size: 12pt;">： 获取地理信息。</span><span style="font-size: 12pt;">这就是为什么谷歌地图可以找到你的位置，而且标示在地图上。</span></div><div><br/></div><div><span style="font-size: 12pt;">●</span> <span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">图像API</span><span style="font-size: 12pt;">：</span><span style="font-size: 12pt;">画布（Canvas） 和 WebGL API 可以创建生动的 2D 和 3D 图像。人们正运用这些 web 技术制作令人惊叹的作品。</span></div><div><br/></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">影音类 API</span><span style="font-size: 12pt;">：</span><span style="font-size: 12pt;">HTMLMediaElement 和 WebRTC</span> <span style="font-size: 12pt;">影音类 API</span><span style="font-size: 12pt;">等让你可以利用多媒体做一些非常有趣的事，比如在网页中直接播放音乐和影片，或用自己的网络摄像头获取录像，然后在其他人的电脑上展示。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">第三方 API</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">第三方 API 并没有默认嵌入浏览器中，一般要从网上取得它们的代码和信息</span><span style="font-size: 12pt; color: rgb(118, 0, 216);">。</span><span style="font-size: 12pt;">比如：</span></div><div><br/></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">T</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">wi</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">tter API 和 新浪微博 API</span> <span style="font-size: 12pt;">可以在网站上展示最新推文之类。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">谷歌地图 API 和 高德地图 API</span> <span style="font-size: 12pt;">可以在网站嵌入定制的地图等等。</span></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">JavaScript 在页面上做了什么？</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览器在读取一个网页时，代码（HTML, CSS 和 JavaScript）将在一个运行环境（浏览器标签页）中得到执行。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览器就像一间工厂，将原材料（代码）加工为一件产品（网页）。</span></span></div><div><br/></div><div><img src="1 - JS高级程序设计第一、二章 JavaScript简介 在HTML中使用JavaSc_files/3 [14].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">在 HTML 和 CSS 集合组装成一个网页后，浏览器的 JavaScript 引擎将执行 JavaScript 代码。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这保证了当 JavaScript 开始运行之前，网页的结构和样式已经就位，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">如果 JavaScript 在 HTML 和 CSS 就位之前加载运行，就会引发错误。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">这样很好，因为通过 DOM API（见上文）动态修改 HTML 和 CSS 来更新 UI 正是 JavaScript 最普遍的用处所在。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">浏览器安全</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">每个浏览器标签页</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">用专业术语称为“运行环境”</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span><span style="font-size: 12pt;">就是其自身用来运行代码的独立容器</span><span style="font-size: 12pt;">。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">大多数情况下，每个标签页中的代码完全独立运行，而且一个标签页中的代码不能直接影响另一个标签页（或者另一个网站）中的代码。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">这是一个好的安全措施，如果不这样，黑客就可以从其他网站盗取信息，等等。</span></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">JavaScript 运行顺序</span></div><div><br/></div><div><span style="font-size: 12pt;">当浏览器执行到一段 JavaScript 代码时，通常会按从上往下的顺序执行这段代码。这意味着你需要注意代码的顺序。</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">const para = document.querySelector('p');</span></div><div><br/></div><div><span style="font-size: 12pt;">para.addEventListener('click', updateName);</span></div><div><br/></div><div><span style="font-size: 12pt;">function updateName() {</span></div><div><span style="font-size: 12pt;">  let name = prompt('输入一个新的名字：');</span></div><div><span style="font-size: 12pt;">  para.textContent = '玩家1：' + name;</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><span style="font-size: 12pt;">如果改为：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">para.addEventListener('click', updateName);</span></div><div><br/></div><div><span style="font-size: 12pt;">const para = document.querySelector('p');</span></div><div><br/></div><div><span style="font-size: 12pt;">function updateName() {</span></div><div><span style="font-size: 12pt;">  let name = prompt('输入一个新的名字：');</span></div><div><span style="font-size: 12pt;">  para.textContent = '玩家1：' + name;</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览器开发者控制台将返回一个错误： TypeError: para is undefined。</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这意味着 para 对象尚未定义，所以我们不能为它增添一个事件监听器。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这是一个很常见的错误，在引用对象之前必须确保该对象已经存在</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">。</span></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">解释代码 vs 编译代码</span></div><div><br/></div><div><span style="font-size: 12pt;">解释（interpret）和 编译(compile)。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">解释型语言中，代码自上而下运行</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，且实时返回运行结果。</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">代码在执行前，无需由浏览器将其转化为其他形式。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">编</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">译型语言代码运行之前需要先转化（编译）成另一种形式。</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">比如 C/C++ 先被编译成汇编语言，然后才能由计算机运行。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">JavaScript 是轻量级解释型语言，解释型语言只需要解释器，错误只能到解释器执行代码时才能发现。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Java与C/C++等编译型语言需要编译器，用途更广泛，错误在代码编译阶段就能发现错误。</span></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">服务器端代码 vs 客户端代码</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">客户端代码是在用户的电脑上运行的代码</span><span style="font-size: 12pt; color: rgb(255, 0, 0);">，在</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览一个网页时，它的客户端代码就会被下载，然后由浏览器来运行并展示</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold; text-decoration: underline;">。</span><span style="font-size: 12pt;">这就是客户端 JavaScript。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">服务器端代码在服务器上运行，浏览器将结果下载并展示出来</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">流行的服务器端 web 语言包括：PHP、Python、Ruby、</span><span style="font-size: 12pt;">ASP.NET</span> <span style="font-size: 12pt;">以及 JavaScript。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">JavaScript 也可用作服务器端语言，比如现在流行的 Node.js 环境。</span></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">动态代码 vs 静态代码</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">&quot;动态”</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">一词既能描述客户端 JavaScript，又能描述服务器端语言。是指通过按需生成新内容来更新 web 页面 / 应用，使得不同环境下显示不同内容。</span></div><div><br/></div><div><span style="font-size: 12pt;">例如，</span></div><div><br/></div><div><span style="font-size: 12pt;">服务器端代码会在服务器上动态生成新内容，例如从数据库中提取信息。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">而客户端 JavaScript 则在客户端浏览器中动态生成新内容，比如说创建一个新的 HTML 表格，用从服务器请求到的数据填充，</span><span style="font-size: 12pt;">在网页中向用户展示这个表格</span><span style="font-size: 12pt;">。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">数据库——&gt;服务器——&gt;客户端——&gt;网页</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">没有动态更新内容（没有数据库）的网页叫做“静态”页面，所显示的内容不会改变。</span></span></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">怎样向页面添加 JavaScript?</span></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">行内JavaScript</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function createParagraph() {</span></div><div><span style="font-size: 12pt;">  const para = document.createElement('p');</span></div><div><span style="font-size: 12pt;">  para.textContent = '你点击了这个按钮！';</span></div><div><span style="font-size: 12pt;">  document.body.appendChild(para);</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">在HTML中添加</span></font></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;button onclick=&quot;createParagraph()&quot;&gt;点我呀&lt;/button&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">请不要这样做！ 这将使 JavaScript 污染到 HTML，而且效率低下。对于每个需要应用 JavaScript 的按钮，你都得手动添加 onclick=&quot;createParagraph()&quot; 属性。</span></span></div><div><br/></div><div><span style="font-size: 12pt;">可以使用纯 JavaScript 结构来通过一个指令选取所有按钮。下文的这段代码即实现了这一目的：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">const buttons = document.querySelectorAll('button');</span></div><div><span style="font-size: 12pt;">for(let i = 0; i &lt; buttons.length ; i++) {</span></div><div><span style="font-size: 12pt;">  buttons[i].addEventListener('click', createParagraph);</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><span style="font-size: 12pt;">看上去比 onclick 属性要长一些，但是这样写会对页面上所有按钮生效，无论多少个按钮添加或删除，完全无需修改 JavaScript 代码。</span></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">内部 JavaScript</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">在&lt;/head&gt;前添加&lt;script&gt;&lt;/script&gt;</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;script&gt;</span></div><div><span style="font-size: 12pt;">  // 在此编写 JavaScript 代码</span></div><div><span style="font-size: 12pt;">&lt;/script&gt;</span></div></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">外部 JavaScript</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">新建</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">一个名为 script.js的文档，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">扩展名为 .js。</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">在&lt;/body&gt;标签之前中添加</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;body&gt;</span></div><div><span style="font-size: 12pt;">  &lt;p&gt;12345&lt;/p&gt;</span></div><div><span style="font-size: 12pt;">  <b>&lt;script src=&quot;script.js&quot; async&gt;</b></span><span style="font-size: 12pt;"><b>&lt;/script&gt;</b></span></div><div><span style="font-size: 12pt;"><b>&lt;/body&gt;</b></span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">为什么&lt;script&gt;&lt;/script&gt;标签放在&lt;/body&gt;之前？</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">因为脚本下载或者执行的期间会阻止</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">HTML DOM 解析和 CSS 渲染</span></span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">浏览器在下载JS的时候，会阻止一切其他活动</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">内部 JavaScript</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">会阻塞所有内容的呈现，而</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">外部 JavaScript</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">只会阻塞后面内容的显示</span></div><div><br/></div><div><span style="font-size: 12pt;">在 script.js 文件中，编写代码：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function createParagraph() {</span></div><div><span style="font-size: 12pt;">  let para = document.createElement('p');</span></div><div><span style="font-size: 12pt;">  para.textContent = '你点击了这个按钮！';</span></div><div><span style="font-size: 12pt;">  document.body.appendChild(para);</span></div><div><span style="font-size: 12pt;">}</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">const buttons = document.querySelectorAll('button');</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">for(let i = 0; i &lt; buttons.length ; i++) {</span></div><div><span style="font-size: 12pt;">  buttons[i].addEventListener('click', createParagraph);</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">脚本调用策略</span></div><div><br/></div><div><span style="font-size: 12pt;">要让脚本调用的时机符合预期，需要解决一系列的问题。这里看似简单，实际大有文章。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">最常见的问题就是：</span><span style="font-size: 12pt;">HTML 元素是按其在页面中出现的次序调用的，如果用 JavaScript 来管理页面上的元素（更精确的说法是使用 文档对象模型 DOM），若 JavaScript 加载于欲操作的 HTML 元素之前，则代码将出错。</span></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">方案一</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">&quot;内部</span><span style="font-size: 12pt;">JavaScript</span><span style="font-size: 12pt;">”和 &quot;外部</span><span style="font-size: 12pt;">JavaScript&quot;</span><span style="font-size: 12pt;">示例中，JavaScript 在&lt;head&gt;处调用或在HTML 文档&lt;body&gt;之前</span><span style="font-size: 12pt;">解析</span><span style="font-size: 12pt;">。这样做是有隐患的，需要使用一些结构来避免错误发生</span><span style="font-size: 12pt;">：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">document.addEventListener(&quot;DOMContentLoaded&quot;, function() {</span></div><div><span style="font-size: 12pt;">  . . .});</span></div></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这是一个事件监听器，它监听浏览器的 &quot;DOMContentLoaded&quot; 事件，即 HTML 文档</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">&lt;body&gt;</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">加载、解析后，事件才触发调用 &quot; . . .&quot; 处的代码，从而避免了错误发生</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">（事件 的概念稍后学习）。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">最佳方案</span></div><div><br/></div><div><span style="font-size: 12pt;">&quot;外部</span><span style="font-size: 12pt;">JavaScript</span><span style="font-size: 12pt;">”示例中使用了 JavaScript 的一项现代技术来解决这一问题。</span></div><div><br/></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(255, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">async “异步”属性</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">告知浏览器在遇到 &lt;script&gt; 元素时不要中断后续 HTML 内容的加载，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">脚本和 HTML 将一并加载，代码将顺利运行。</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;script src=&quot;script.js&quot; async&gt;&lt;/script&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt;">上述情况下，脚本和 HTML 将一并加载，代码将顺利运行。</span></div><div><br/></div><div><span style="font-size: 12pt;">解决此问题的旧方法是：把脚本元素放在文档体的底端（&lt;/body&gt; 标签之前，与之相邻），这样脚本就可以在 HTML 解析完毕后加载了。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">&lt;script&gt;&lt;/script&gt;标签放在&lt;/body&gt;之前</span></span><span style="font-size: 12pt; font-weight: bold;">和第一种方案的问题是：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">只有在所有 HTML DOM 加载完成后才开始脚本的加载/解析过程。对于有大量 JavaScript 代码的大型网站，可能会带来显著的性能损耗。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这也是 async 属性诞生的初衷。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">注：“外部</span><span style="font-size: 12pt; font-weight: bold;">JavaScript</span><span style="font-size: 12pt; font-weight: bold;">”示例中 async 属性可以解决调用顺序问题，无需使用 DOMContentLoaded 事件。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">注：</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">async 只能用于</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">“外部JavaScript”</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，不适用于“内部</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">JavaScript</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">”示例。</span></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">async 和 defer</span></div><div><br/></div><div><span style="font-size: 12pt;">脚本阻塞页面渲染问题实际有两种解决方案 —— async 和 defer。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">async（异步属性）</span></div><div><br/></div><div><span style="font-size: 12pt;">浏览器遇到 async 脚本时不会阻塞页面渲染，而是直接下载然后运行。</span><span style="font-size: 12pt;">当脚本不依赖于本页面的其它任何脚本时，async 是最理想的选择。</span></div><div><br/></div><div><span style="font-size: 12pt;">比如，页面要加载以下三个脚本：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;script async src=&quot;js/vendor/jquery.js&quot;&gt;&lt;/script&gt;</span></div><div><br/></div><div><span style="font-size: 12pt;">&lt;script async src=&quot;js/script2.js&quot;&gt;&lt;/script&gt;</span></div><div><br/></div><div><span style="font-size: 12pt;">&lt;script async src=&quot;js/script3.js&quot;&gt;&lt;/script&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">三者的调用顺序是不确定的</span><span style="font-size: 12pt; color: rgb(255, 0, 0);">。</span><span style="font-size: 12pt;">jquery.js 可能在 script2 和 script3 之前或之后调用，后两个脚本中依赖 jquery 的函数将产生错误，因为脚本运行时 jquery 尚未加载。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">defer（延迟属性）</span></div><div><br/></div><div><span style="font-size: 12pt;">解决这一问题可使用 defer 属性，脚本将按照在页面中出现的顺序加载和运行：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;script defer src=&quot;js/vendor/jquery.js&quot;&gt;&lt;/script&gt;</span></div><div><br/></div><div><span style="font-size: 12pt;">&lt;script defer src=&quot;js/script2.js&quot;&gt;&lt;/script&gt;</span></div><div><br/></div><div><span style="font-size: 12pt;">&lt;script defer src=&quot;js/script3.js&quot;&gt;&lt;/script&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">添加 defer 属性的脚本将按照在页面中出现的顺序加载</span></span><span style="font-size: 12pt;">，因此第二个示例可确保 jquery.js必定加载于 script2.js 和 script3.js 之前，同时 script2.js 必定加载于 script3.js之前。</span></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">脚本调用策略小结：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> 如果脚本无需等待页面解析，且不依赖其他脚本独立运行，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">调用顺序不确定，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">那么使用 async。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> 如果脚本需要等待解析，且依赖于其它脚本的加载，调用这些脚本时使用 defer，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">按所需顺</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">序将</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">defer</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">置于</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">相应的</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">&lt;script&gt; 中。</span></div><div><br/></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">注释</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">●</span><span style="font-size: 12pt;"> 在双斜杠后添加单行注释，比如：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">// 我是一条注释</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">●</span><span style="font-size: 12pt;"> 在 /* 和 */ 之间添加多行注释，比如：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">/*</span></div><div><span style="font-size: 12pt;">  我也是</span></div><div><span style="font-size: 12pt;">  一条注释</span></div><div><span style="font-size: 12pt;">*/</span></div></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 