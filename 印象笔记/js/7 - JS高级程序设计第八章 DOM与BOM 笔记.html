<html>
<head>
  <title>7 - JS高级程序设计第八章 DOM与BOM 笔记</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/606060 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3272"/>
<h1>7 - JS高级程序设计第八章 DOM与BOM 笔记</h1>

<div>
<span><div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">JS DOM </span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">黑色一级、二标题 蓝色三级标题 红色重要内容、紫色次要内容 </span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">API</span></span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">（应用程序编程接口）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">API</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">是一些预先定义的函数，目的是提供应用程序与开发人员基于某软件或硬件得以访问一组例程的能力，而又无需访问源码，或理解内部工作机制的细节。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">简单来说：</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">API 是已经建立好的一套代码组件</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，可以</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">为代码提供额外的超能力，</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">让开发者实现原本很难甚至无法实现的程序</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">。就像家居中现成的家具零件，用一些已经切好的木板组装一个书柜，显然比需要自己设计，</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">再</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">寻找合适的木材，将它裁切至合适的尺寸和形状，才能组装成书柜要简单得多。</span></span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">现实世界中的例子：想想一个</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">房子的电力供应，如果房子里使用一个设备，你只要把电源插头插入插座即可，而不是想把它连接到进户的电线上 - 这样做非常低效，而且如果你不是电工，这么做将非常艰险</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">。</span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3.jpg" type="image/jpeg" data-filename="3.jpg" width="374"/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第一种解释</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">你写了一个库，里面有很多函数，如果别人要使用你这个库，但是并不知道每个函数内部是怎么实现的。使用的人需要看你的文档或者注释才知道这个函数的入口参数和返回值或者这个函数是用来做什么的。对于用户来说 ，你的这些函数就是API。</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">研发人员A开发了软件A，研发人员B正在研发软件B。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">有一天，研发人员B想要调用软件A的部分功能来用，但是他又不想从头看一遍软件A的源码和功能实现过程，怎么办呢？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">研发人员A想了一个好主意：我把软件A里你需要的功能打包好，写成一个函数；你按照我说的流程，把这个函数放在软件B里，就能直接用我的功能了！</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">其中，API就是研发人员A说的那个函数。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [1].jpg" type="image/jpeg" data-filename="3.jpg" width="438"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第二种解释</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">厨房是数据库（</span><span style="font-size: 12pt;"><span style="font-size: 12pt;">数据库是一种针对数据管理需求的特定的计算机系统</span></span><span style="font-size: 12pt;">），</span><span style="font-size: 12pt;"><span style="font-size: 12pt;">你的输入就是一道道菜品的名字（或者是ID，不知道你们见过菜品上面有编号，服务员只记编号的？），输出的结果是端过来的一道道菜。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">有了输入和输出，服务员就可以提供了点餐的功能，服务员就是API，顾客就是调用者，服务员就是服务的提供者。</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [2].jpg" type="image/jpeg" data-filename="3.jpg" width="403"/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">API就是你的服务员，他在应用程序、数据库和设备之间像个接收请求的信差一样来回传送数据，形成连接。</span></span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [3].jpg" type="image/jpeg" data-filename="3.jpg" width="401"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">API 通常分为两类（对前端来说）：</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [4].jpg" type="image/jpeg" data-filename="3.jpg" width="497"/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">常见浏览器API</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(54, 101, 238); font-weight: bold;">操作文档的API</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">DOM（文档对象模型）是针对XML但经过扩展用于HTML的API，是一种适用于多种环境和多种程序设计语言的通用型API ，它</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt;">允许操作HTML和CSS。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(54, 101, 238); font-weight: bold;">从服务器获取数据的API</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">更新网页的一小部分，</span><span style="font-size: 12pt;">不需要从服务器重新加载整个页面</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">可能的API包括XMLHttpRequest和Fetch API。</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt;">Ajax技术。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(54, 101, 238); font-weight: bold;">客户端存储API</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">创建一个应用程序来保存页面加载之间的状态，甚至让设备在处于脱机状态时可用，那么在客户端存储数据会非常有用。例如使用Web Storage API的简单的名称 - 值存储以及使用IndexedDB API更复杂的表格数据存储。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(54, 101, 238); font-weight: bold;">绘制和操作图形的API</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">创建2D和3D场景的Canvas和WebGL。例如，将图像导入到画布上，然后使用Canvas API对其应用滤镜（如棕褐色滤镜或灰度滤镜），或使用WebGL创建具有光照和纹理的复杂3D场景。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(54, 101, 238); font-weight: bold;">音频和视频API</span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">例如HTMLMediaElement，Web Audio API和WebRTC，</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt;">显示字幕字幕和您的视频，从网络摄像机抓取视频。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(54, 101, 238); font-weight: bold;">设备API</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">访问设备位置数据的地理定位API，</span></span><span style="font-size: 12pt;">其他示例还包括通过系统通知（参见Notifications API）或振动硬件（参见Vibration API）告诉用户Web应用程序有用的更新可用。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">第三方 API</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">第三方 API 并没有默认嵌入浏览器中，一般要从网上取得它们的代码和信息。比如：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● Twitter API 和 新浪微博 API 可以在网站上展示最新推文之类。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● 谷歌地图 API 和 高德地图 API 可以在网站嵌入定制的地图等等。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">API的作用：</span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">- 对于软件提供商来说，留出API，让别的应用程序来调用，形成生态，软件才能发挥最大的价值，才能更有生命力。（同时别人也看不见代码，不伤害商业机密。）</span></span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">- 对于应用开发者来说，有了开放的API，就可以直接调用多家公司做好的功能来做自己的应用，不需要所有的事情都自己操刀，节省精力。</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">API又分为开放式API和私有API</span><span style="font-size: 12pt; font-weight: bold;">。</span></span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">API通常是以Http的形式提供</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，它隐藏的含义就是，只要你符合我定义的标准，你就可以来使用我。</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">前端调用后端数据的一个通道，就是我们俗说的接口，通过这个通道，可以访问到后端的数据（通常是JSON数据），但是又无需调用源代码。</span></span></span></div><div><br/></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">API的应用</span><span style="font-size: 12pt; font-weight: bold;">：</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">在网页嵌入分享到微博，使用QQ登录等社交媒体公司的插件功能</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">没有API，社交媒体公司就要共享源代码才能使用功能了，这会造成泄漏商业秘密</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [5].jpg" type="image/jpeg" data-filename="3.jpg" width="464"/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">旅游网站访问航空公司的数据库</span></span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [6].jpg" type="image/jpeg" data-filename="3.jpg" width="472"/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">游戏引擎的图形API</span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">DirecX、OpenGL、Vulkan</span></span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [7].jpg" type="image/jpeg" data-filename="3.jpg" width="310"/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">系统界面</span></span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [8].jpg" type="image/jpeg" data-filename="3.jpg" width="360"/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">三明治：程序 =&gt; API（交互） =&gt; 硬件（没有API，程序员就要给底层硬件配置编写不同的代码了）</span></span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [9].jpg" type="image/jpeg" data-filename="3.jpg" width="296"/></div><div><br/></div><div><span style="font-size: 12pt;">它是软件（应用）中的一系列特性和规则</span><span style="font-size: 12pt;">（如 方法、属性、事件 和 URL）</span><span style="font-size: 12pt;">，这些特性和规则允许</span><span style="font-size: 12pt;">与</span><span style="font-size: 12pt;">用户的 web 浏览器中的组件、用户电脑上的其他软硬件、或者第三方站点和服务等交互。</span></div><div><br/></div><div><span style="font-size: 12pt;">API是一组已经得到有关各方认同的基本约定，就像现实中的国际时区、化学元素周期表、摩尔斯码。</span><span style="font-size: 12pt;">虽然语法会随编程语言变化，但API这些约定总是保持不变的。</span></div><div><br/></div><div><span style="font-size: 12pt;">所以，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">API就是计算机中不同组件发生交互的地方，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">API协议就是两个不同组件完成交互所遵循的规则。</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">使用API的原因：软件编程领域存在很多不同的语言，很多任务是相似的。</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">什么是DOM（文档对象模型）？</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">DOM 是一项 W3C 标准，</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">一个浏</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">览器的API，文档树、节点树、对象树、家谱树</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">W3C DOM 标准被分为 3 个不同的部分：</span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">  ● </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Core DOM - 所有文档类型的标准模型</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">  ● </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">XML DOM - XML 文档的标准模型</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">  ● HTML DOM - HTML 文档的标准模型</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">文档：DOM中的“D”—— </span><span style="font-size: 12pt;">把网页文档转换为一个文档对象。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">对象：</span><span style="font-size: 12pt;">DOM中的“O”—— </span><span style="font-size: 12pt;">宿主对象。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">模型：DOM中的“M”，代表着“Model&quot;(模型)，也可以说它代表着“Map&quot;(地图)。模</span><span style="font-size: 12pt;">型也好，地图也罢，它们的含义都是某种事物的表现形式。就像一个模型火车代表着一列真正的</span><span style="font-size: 12pt;">火车、一张城市街道图代表着一个实际存在的城市那样，DOM代表着加载到浏览器窗口的当前</span><span style="font-size: 12pt;">网页。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">简而言之，</span><span style="font-size: 12pt;">DOM是一套对文档内容进行抽象和概念化的方法。例如，“</span><span style="font-size: 12pt;">现实</span><span style="font-size: 12pt;">世界对象模型”中用“汽车”、“树”、“房子”等名词来表示客观事物，“左边第三栋房子”描述抽象概念，人们对这些名词和概念有着同样的认识才能准确表达含义并得到对方的理解。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [10].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">html根元素代表整个文档，</span><span style="font-size: 12pt;">文档是由节点构成的集合。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [11].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">DOM把整个页面映射为一个多层的节点结构，开发人员可以轻松自如地删除、添加、替换或修改任何节点。</span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这些节点由它们与其它 DOM 节点的关系来定义：有的元素是某些子节点的父节点，这些子节点有兄弟节点。</span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">更具体地说，</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">DOM把文档表示为一棵家谱树，</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">家谱树本身也是一种模型。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">家谱树的典型用法是表示一个人类家族的谱系，并使用parent</span></span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">(父)、child(子)、sibling(兄弟)等记号来表明家族成员之间的关系。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">HTML DOM 模型被构造为对象的树。（文档是节点树，页面加载文档元素被浏览器构造成对象的树，每个元素节点都是一个HTML Element对象）。</span></span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/1497154623955.png" type="image/png" data-filename="1497154623955.png" width="519"/></div><div><br/></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">文档：一个网页可以称为文档</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 节点：网页中的所有内容都是节点（标签、属性、文本、注释等）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;">●</span><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 12pt;">元素：网页中的标签</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;">●</span><span style="font-size: 12pt;"> 属性：标签的属性</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">标记语言中的每个元素，属性，一段文本或注释都是一个 DOM 节点。</span></span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">节点分为：</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">元素节点（除了&lt;html&gt;根元素的元素）、属性节点（例如title=&quot;apple&quot;）、文本节点（包含在元素节点内部的文本）、注释节点</span><span style="font-size: 12pt; color: rgb(255, 0, 0);">。</span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [12].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">DOM的作用:操作页面的元素。</span></span></div><div><font color="#7600D8" style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold; text-decoration: underline;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [13].jpg" type="image/jpeg" data-filename="3.jpg"/></span></span></div><div><font color="#7600D8" style="font-size: 12pt;"><br/></font></div><div><font color="#FF0000" style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">W3C对DOM的定义是：“一个与系统平台和编程语言无关的接口，程序和脚本可以通过这个接口动态地访问和修改文档的内容、结构和样式。”</span></span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">多亏了W3C推出的<span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">标准化DOM可以让</span></span></span><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">任何一种</span></span></span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">程序设计语言对使用</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">任何一种</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">标记语言编写的</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">任何一份</span><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">文档进行操控</span></span>，不同浏览器完成同样的任务时做法才非常一致。</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">DOM并不只是针对JavaScript的，另外有几种语言发布了只针对自己的DOM标准，例如SVG。</span></span></span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">通过DOM，JavaScript 获得了足够的能力来创建动态的 HTML：</span></span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">● JavaScript 能够改变页面中的所有 HTML 元素</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> JavaScript 能够改变页面中的所有 HTML 属性</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">JavaScript 能够改变页面中的所有 CSS 样式</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> JavaScript 能够对页面中的所有事件做出反应</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">文档属性/方法：已经被废弃的(仍然可用,但未来会被删除)或者已经过时的(已经被删除,不能再用了)</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">ECMAScript中的对象和DOM、BOM对象是一个概念</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">比如 html 中的段落 p 映射为 JavaScript 对象是 HTMLParagraphElement，</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">HTMLParagraphElement 的继承关系：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#000000" style="font-size: 12pt;">HTMLParagraphElement</font></div><div><font color="#000000" style="font-size: 12pt;"> - HTMLElement</font></div><div><font color="#000000" style="font-size: 12pt;">  - Element</font></div><div><font color="#000000" style="font-size: 12pt;">   - Node</font></div><div><font color="#000000" style="font-size: 12pt;">    - EventTarget</font></div><div><font style="font-size: 12pt;"><font color="#000000">     - Object </font> <font color="#FF0000"> </font></font> <span style="color: rgb(255, 0, 0); font-size: 12pt;"> </span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">所有的 DOM 和 BOM 没有任何特殊之处，都是一个 Object 的子类。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var div = document.createElement('div'); // 创建一个 div dom</font></div><div><font style="font-size: 12pt;">div.foo = 123;                          // 给 div 添加属性</font></div><div><font style="font-size: 12pt;">div.sayHello = function (str) {</font></div><div><font style="font-size: 12pt;">    console.log('hello' + str);    </font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">通常而言，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">DOM</span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Object </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">是使用 C++ 开发的。</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">在JS引擎（V8）内部，DOM</span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Object </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">映射为 C++ Object，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">每个 html 标签都对应一个 DOM Object：</span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [14].jpg" type="image/jpeg" data-filename="3.jpg" width="530"/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">浏览器与JS引擎的关系（</span><span style="font-size: 12pt; font-weight: bold;">以 Chrome 和 V8 举例</span><span style="font-size: 12pt; font-weight: bold;">）</span><span style="font-size: 12pt; font-weight: bold;">：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [15].jpg" type="image/jpeg" data-filename="3.jpg" width="451"/></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">ECMAScript 规范中，Web IDL 定义了 DOM 和 JS Object 的对应关系：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [16].jpg" type="image/jpeg" data-filename="3.jpg" width="438"/></div><div><br/></div><div><span style="font-size: 12pt;">通过 V8 Binding，在 V8 引擎内会有一个和 DO</span><span style="font-size: 12pt;">M 对象对应的 JS 对象，我们称之为Wrapper objects(包装对象)。</span></div><div><br/></div><div><span style="font-size: 12pt;">V8 Binding 会把原生 DOM 对象映射为包装的 JS 对象，所以</span><span style="font-size: 12pt;">操作 DOM 和操作 JS 对象是一样的</span><span style="font-size: 12pt;">。</span></div><div><br/></div><div><span style="font-size: 12pt;">包装对象和原生对象的关系可能是 1 对 1，也可能是 n 对 1，但是不会是 1 对 n：</span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [17].jpg" type="image/jpeg" data-filename="3.jpg" width="388"/></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [18].jpg" type="image/jpeg" data-filename="3.jpg" width="410"/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">例子：</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">div = document.createElement('div');</font></div><div><font style="font-size: 12pt;">div.innerHTML = '&lt;p&gt;&lt;span&gt;foo&lt;/span&gt;&lt;/p&gt;';</font></div><div><font style="font-size: 12pt;">div.firstChild;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [19].jpg" type="image/jpeg" data-filename="3.jpg" width="414"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var div = document.createElement('div'); // 创建一个 div dom</font></div><div><font style="font-size: 12pt;">div.foo = 123;                           // 给 div 添加属性</font></div><div><font style="font-size: 12pt;">var p = document.createElement('p');     // 创建一个 p dom</font></div><div><font style="font-size: 12pt;">p.appendChild(div);                      // 把 div 添加为 p 的子节点</font></div><div><font style="font-size: 12pt;">div = null;                              // 把 div 设置为空</font></div><div><font style="font-size: 12pt;">console.log(p.firstChild.foo);           // 输出 123</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">可能我们会觉得最终输出的是 null、或者 undefined、或者抛异常。</span><span style="font-size: 12pt;">其实这行代码会输出 123。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">为什么操作 DOM 是最耗性能的呢？</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">不一定</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">js 普通对象：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">let o = {a: 2};</font></div><div><font style="font-size: 12pt;">console.time('js');</font></div><div><font style="font-size: 12pt;">for(let i=0; i&lt;=1e4; i++)</font></div><div><font style="font-size: 12pt;">      o.a = i;</font></div><div><font style="font-size: 12pt;">console.timeEnd('js');</font></div><div><font style="font-size: 12pt;">// 耗时: 0.31396484375ms</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">document 对象：</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">console.time('dom');</font></div><div><font style="font-size: 12pt;">for(let i=0; i&lt;=1e4; i++)</font></div><div><font style="font-size: 12pt;">     document.a = i;</font></div><div><font style="font-size: 12pt;">console.timeEnd('dom');</font></div><div><font style="font-size: 12pt;">// 耗时: 0.302978515625ms</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">DOM 为什么慢</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">我们把上面的测试代码改一下，把 document.a 改成 document.title：</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">console.time('dom');</font></div><div><font style="font-size: 12pt;">for(let i=0; i&lt;=1e4; i++)</font></div><div><font style="font-size: 12pt;">    document.title = i;</font></div><div><font style="font-size: 12pt;">console.timeEnd('dom');</font></div><div><font style="font-size: 12pt;">// 耗时: 128.337646484375ms</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">JS 对象的属性(properties)映射到了 DOM 对象的特性(attributes)上，</span><span style="font-size: 12pt;">当我们修改 document.a 时，只是修改了普通的 JS 对象</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">但是在我们修改 document.ti</span><span style="font-size: 12pt;">tle 的时候，同时也修改</span><span style="font-size: 12pt;">了 DOM 对象的 attributes。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">性能消耗在 JS 对象和 DOM 对象的转换和同步，</span><span style="font-size: 12pt;">也就是 V8XXX::toNative() 和 ::toV</span><span style="font-size: 12pt;">8() 的调用。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">CSS</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">浏览器除了具有 JS 引擎外，还有排版引擎，如果 JS 在操作 DOM 时修改了 CSS，那么性能就会再一次降低</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [20].jpg" type="image/jpeg" data-filename="3.jpg" width="580"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">即使我们不修改 DOM 对象的 CSS，仅仅是读取样式值，也有可能会引起 relayout。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">虽然 DOM 的性能有可能比普通对象还快,但是在 99% 的场景下 DOM 对象是慢的。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [21].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">JavaScript通过Document类型表示整个文档。浏览器中，</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">document对象是</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">HTMLDocument（继承自</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">Document类型</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">）的一个实例，也</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">是window对象的一个属性，因此可以将document对象作为一个全局对象来访问。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">总共有12种节点</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">类型，这些类型都继承自一个基类型（</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">Document类型</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">）。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><h4 style="box-sizing: border-box; margin: 0px 0px 20px; font-size: 18px;"><span style="font-size: 18px;">获取元素节点</span></h4><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">document.getElementById(id)                 // 返回一个匹配指定id的元素节点 Element。（掌握）</font></div><div><font style="font-size: 12pt;">document.getElementsByTagName(tagName)      // 返回一个动态的包含所有指定标签名的元素 HTMLCollection。（掌握）</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">document.getElementsByClassName(className)  // 返回一个包含了所有指定类名的元素 HTMLCollection。（IE9+）</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">document.querySelector(selectors)           // 接受一个CSS选择器作为参数，返回第一个匹配该选择器的元素节点 Element。（IE8+）</font></div><div><font style="font-size: 12pt;">document.querySelectorAll(selectors)        // 接受一个CSS选择器作为参数，返回所有匹配该选择器的元素节点 NodeList。(IE8+)</font></div><div><br/></div><div><span style="font-size: 12pt;">document.getElementsByName(name)            // 用于选择拥有name属性的HTML元素（在不同的浏览器其中工作方式不同，不推荐！）</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">getElementById</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">() 只有在作为 document 的方法时才能起作用，而在DOM中的其他元素下无法生效。</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">getElementsByClassName()的兼容处理</span></font></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [22].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 在父元素parent下选取类名为class的元素，返回一个数组</font></div><div><span style="font-size: 12pt;">function getClass (parent, class) {</span></div><div><span style="font-size: 12pt;">    var ele = parent.getElementsByTagName('*');</span></div><div><span style="font-size: 12pt;">    var result = [];</span></div><div><span style="font-size: 12pt;">    for (var i = 0; i &lt; ele.length; i++) {</span></div><div><span style="font-size: 12pt;">       if (</span><span style="font-size: 12pt;">ele</span><span style="font-size: 12pt;">[i].className === class) {</span></div><div><span style="font-size: 12pt;">           result.push(ele[i]);</span></div><div><span style="font-size: 12pt;">       }</span></div><div><span style="font-size: 12pt;">    }</span></div><div><span style="font-size: 12pt;">   return result;    </span></div><div><span style="font-size: 12pt;">}</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">HTMLCollection包括getElementsByTagName()、getElementsByClassName()等方法的返回值</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">HTMLCollection是</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">HTML</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">Element元素节点的集合。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">NodeList是Node节点的集合，</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">Node节点一共有12种</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">节点类型</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">，</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">HTML</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">Element</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">元素节点只是其中一种。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">HTMLCollection</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">与NodeList都是DOM节点的集合，两者都属于Collections范畴，两者的区别在于：</span></span></span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">● </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">方法：HTMLCollection比NodeList多了一个namedItem方法，其他方法保持一致</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">● </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">包含节点类型不同：NodeList可以包含任何节点类型，HTMLCollection只包含元素节点（ElementNode）</span></div><div><br/></div><div><span style="font-size: 12pt;">HTML DOM 中的 <span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">HTMLCollection 是即时更新的（live），当HTML文档结构发生改变时，它会自动更新：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">所谓的</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">即时更新</span><span style="font-size: 12pt; color: rgb(118, 0, 216);"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">就是我们在修改li的同时，会反映到lis上来，这与数组是不同的，例如我们把第一个li插入到ul的底部，那么lis也会发生相应的变化</span>：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;ul id=&quot;nodelist&quot;&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li class=&quot;lic&quot;&gt;index0&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li class=&quot;lic&quot;&gt;index1&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li class=&quot;lic&quot;&gt;index2&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li class=&quot;lic&quot;&gt;index3&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li class=&quot;lic&quot;&gt;index4&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">&lt;/ul&gt;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var ul = document.getElementById('nodelist');</font></div><div><font style="font-size: 12pt;">var lis = ul.getElementsByTagName('li');</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [23].jpg" type="image/jpeg" data-filename="3.jpg" width="384"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [24].jpg" type="image/jpeg" data-filename="3.jpg" width="383"/></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">类数组对象</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var array = ['name', 'age', 'sex'];</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var arrayLike = {0: 'name', 1: 'age', 2: 'sex', length: 3};</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">//读</font></div><div><font style="font-size: 12pt;">console.log(array[0]); // name</font></div><div><font style="font-size: 12pt;">console.log(arrayLike[0]); // name</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// 写</font></div><div><font style="font-size: 12pt;">array[0] = 'new name';</font></div><div><font style="font-size: 12pt;">arrayLike[0] = 'new name';</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// 长度</font></div><div><font style="font-size: 12pt;">console.log(array.length); // 3</font></div><div><font style="font-size: 12pt;">console.log(arrayLike.length); // 3</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">// 遍历</font></div><div><font style="font-size: 12pt;">for(var i = 0, len = array.length; i &lt; len; i++) {</font></div><div><font style="font-size: 12pt;">   ……</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;">for(var i = 0, len = arrayLike.length; i &lt; len; i++) {</font></div><div><font style="font-size: 12pt;">    ……</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">NodeList（静态和动态）、HTMLCollection（动态）、NamedNodeMap</span><span style="font-size: 12pt;">（动态）</span><span style="font-size: 12pt;">都是</span><span style="font-size: 12pt;">类数组对象</span><span style="font-size: 12pt;">，拥</span><span style="font-size: 12pt;">有length属性和</span><span style="font-size: 12pt;">索引属性</span><span style="font-size: 12pt;">。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">但是不可以调用数组方法：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">arrayLike.push('4'); // 报错：arrayLike.push is not a function</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">动态指的是DOM结构发生变化能够自动的反映到所保存的对象中，而静态是当DOM</span><span style="font-size: 12pt;">结构</span><span style="font-size: 12pt;">发生变化时，之前保存的类数组并没有发生变化。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">函数的arguments 对象也是一个类数组对象。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">类数组对象转化为数组</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var arrayLike = {0: 'name', 1: 'age', 2: 'sex', length: 3 };</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">1、 slice</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">Array.prototype.slice.call(arrayLike); // [&quot;name&quot;, &quot;age&quot;, &quot;sex&quot;]</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">2、splice</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">Array.prototype.splice.call(arrayLike, 0); // [&quot;name&quot;, &quot;age&quot;, &quot;sex&quot;]</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">3、ES6 Array.from</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">Array.from(arrayLike); // [&quot;name&quot;, &quot;age&quot;, &quot;sex&quot;]</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">4、 apply</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;"><font>Array.prototype.concat.apply([], arrayLike) </font>// [&quot;name&quot;, &quot;age&quot;, &quot;sex&quot;]</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">参考：</span> <span style="font-size: 12pt;"><a href="https://juejin.im/post/590fd5de44d904007bed2e0c" style="font-size: 12pt;">https://juejin.im/post/590fd5de44d904007bed2e0c</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">事件</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">观察事件和方法，可以发现十分的相似。</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">事件从根本上来说是方法，只不过是由浏览器来调用而已！</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">注册事件</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">● 事件源：触发(被)事件的元素</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 事件名称：如click 点击事件</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 事件处理程序（函数）：事件触发后要执行的代码(函数形式)</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">事件处理函数可以看做DOM元素（对象）的方法，也就是将一个函数赋值给一个属性</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">常用注册事件 onclick onmouseover onmouseout onfocus onblur</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var box = document.getElementById('box');</font></div><div><font style="font-size: 12pt;">// 注册事件</font></div><div><font style="font-size: 12pt;">box.onclick = function() {</font></div><div><font style="font-size: 12pt;">  console.log('代码会在box被点击后执行');  </font></div><div><font style="font-size: 12pt;">};</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">onmouseover 和 onmousemove的区别：</span></span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">1、“物体A在物体B的上面” 和 “物体A在物体B的上面移动”。</span></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">2、onmouseover只触发一次（只要鼠标移动到元素上面就触发）；onmousemove会不断触发（只要鼠标在元素上面并且移动了鼠标就触发）。</span></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">3、onmousemove 事件 没有移出对象</span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当鼠标移动很快时，可能不会触发这两个事件。</span></span></span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">onmouseover  事件 鼠标进入 div 元素时触发，在子元素上也会触发（冒泡）。</font></div><div><font style="font-size: 12pt;">onmousemove  事件 鼠标在 div 元素移动时触发，在这个div上移动一直触发（冒泡）。</font></div><div><font style="font-size: 12pt;">onmouseenter 事件 鼠标进入 div 元素时触发（不冒泡）。</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">基本用法</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var box = document.getElementById('box');</font></div><div><font style="font-size: 12pt;"><font>// </font>与对象的方法相似</font></div><div><font style="font-size: 12pt;">box.onclick = function() {</font></div><div><font style="font-size: 12pt;">    console.log('box被点击后执行');  </font></div><div><font style="font-size: 12pt;"><font>}</font>;</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">属性操作</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">document元素属性</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">body</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">forms</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">非表单元素的属性</span></span></span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">元素节点的属性一般与标签的属性对应：</span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">id</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">className（class是关键字，所以属性叫</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">className</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">src</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">href</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">title</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">表单元素属性</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">下列两个属性返回的都是字符串：</span></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> value</span> 用于大部分表单元素的内容获取(option除外) </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> type</span> 可以获取input标签的类型(输入框或复选框等)</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">下列三个属性返回的是布尔值（当</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">标签属性只有一个值时，DOM元素对象使用Boolean类型作为属性值</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">）：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> disabled</span> 禁用属性</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> checked</span> 复选框选中属性</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> selected</span> 下拉菜单选中属性</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">innerHTML 和 innerText 属性</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">区别</span></span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">innerHTML 返回元素的换行、空格、标签和文本内容 （会先去字符串中寻找标签）</span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">innerText    只返回文本</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">内容（只设置文本内容时推荐使用，效率比</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">innerHTML高</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;">innerHTML返回标签是使用HTML转义符实现的：</span></span></span></div><div><font style="font-size: 11pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">HTML转义符</font></div><div><font style="font-size: 12pt;">&quot;        &amp;quot;</font></div><div><font style="font-size: 12pt;">'        &amp;apos;</font></div><div><font style="font-size: 12pt;">&amp;        &amp;amp;</font></div><div><font style="font-size: 12pt;">&lt;        &amp;lt;   // less than  小于</font></div><div><font style="font-size: 12pt;">&gt;        &amp;gt;   // greater than  大于</font></div><div><font style="font-size: 12pt;">空格     &amp;nbsp;</font></div><div><font style="font-size: 12pt;">©        &amp;copy;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">innerText的兼容性处理</span></span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [25].jpg" type="image/jpeg" data-filename="3.jpg" width="551"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">textContent属性</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">自定义属性操作</span></span></div><div><br/></div><div><span style="font-size: 12pt;">HTML 也可以添加非标准属性，即自定义属性</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;input id=&quot;name&quot; value=&quot;Mike&quot; foo=&quot;bar&quot; /&gt;</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">DOM 对象提供了操作HTML特性的 API（用于访问非标准属性）：</span></span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">● </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">hasAttribute(name)                     </span> <span style="font-size: 12pt;">判断某个</span><span style="font-size: 12pt;">标签行内特性</span><span style="font-size: 12pt;">是否存在。</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> getAttribute(</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">name</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">)</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;"> </span></span> <span style="font-size: 12pt; color: rgb(118, 0, 216);">       </span> <span style="font-size: 12pt;">             获取标签行内</span><span style="font-size: 12pt;">特性</span><span style="font-size: 12pt;">。返回字符串。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span></span></span><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> setAttribute(name, value)</span></span>            设置标签行内</span><span style="font-size: 12pt;">特性</span><span style="font-size: 12pt;">，任何不是string的value将会转换成string。返回undefined。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> removeAttribute(</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">name</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">) </span></span> <span style="font-size: 12pt; color: rgb(118, 0, 216);">   </span> <span style="font-size: 12pt;">          移除标签行内</span><span style="font-size: 12pt;">特性</span><span style="font-size: 12pt;">。</span><span style="font-size: 12pt;">返回undefined。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">第一个参数都是</span><span style="font-size: 12pt;">特性</span><span style="font-size: 12pt;">名字符串，而且</span><span style="font-size: 12pt;">不区分大小写</span></div><div><br/></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> 与element属性的区别：上述三个方法用于获取任意的行内属性。</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;div id=&quot;box&quot; age=&quot;18&quot; personId=&quot;1&quot;&gt;张三&lt;/div&gt;</span></div><div><span style="font-size: 12pt;">&lt;script&gt;</span></div><div><span style="font-size: 12pt;">var box = document.getElementById('box');</span></div><div><br/></div><div><span style="font-size: 12pt;">// 自有（标准）的属性</span></div><div><span style="font-size: 12pt;">// console.log(box.id);</span></div><div><br/></div><div><span style="font-size: 12pt;">// 自定义属性 -- 不能使用下面的方式获取到box元素对应的div标签的的自定义属性</span></div><div><span style="font-size: 12pt;">// console.log(box.age);</span></div><div><span style="font-size: 12pt;">// console.log(box.personId);</span></div><div><br/></div><div><span style="font-size: 12pt;">// 获取自定义属性的值 getAttribute()</span></div><div><span style="font-size: 12pt;">// console.log(box.getAttribute('age'));</span></div><div><span style="font-size: 12pt;">// console.log(box.getAttribute('personId'));</span></div><div><br/></div><div><span style="font-size: 12pt;">// 设置自定义属性</span></div><div><span style="font-size: 12pt;">// box.setAttribute('sex', 'male');</span></div><div><span style="font-size: 12pt;">// box.setAttribute('class', 'test');</span></div><div><br/></div><div><span style="font-size: 12pt;">// 移除属性</span></div><div><span style="font-size: 12pt;">box.removeAttribute('age');</span></div><div><span style="font-size: 12pt;">box.removeAttribute('id');</span></div><div><span style="font-size: 12pt;">&lt;/script&gt;</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">attribute 和 property 的区别</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">一句话总结：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">写在HTML标签的属性就是HTML特性，不管属性标准或非标准（自定义），</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">只是这些特性映射成属性时才有区别：checked、slected、disabled、value 和 dataset。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">DOM property属性</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">当浏览器解析完 HTML 后，生成的 DOM 是一个继承自 Object 的常规 JavaScript 对象，因此我们可以像操作任何 JS 对象那样来操作 DOM 对象。</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">const el = document.getElementById('name');</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">el.foo = 'bar';</span></div><div><span style="font-size: 12pt;">el.user = { name: 'jjc', age: '18'}</span></div></div><div><br/></div><div><span style="font-size: 12pt;">也可以为其添加方法。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">HTML attribute特性</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">1、attribute特性 由HTML定义，所有出现在HTML标签内的描述节点都是 attribute特性。</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;div id=&quot;test&quot; class=&quot;button&quot; custom-attr=&quot;1&quot;&gt;&lt;/div&gt;</span></div><div><br/></div><div><span style="font-size: 12pt;">document.getElementById('test').attributes;</span></div><div><span style="font-size: 12pt;">// return: [custom-attr=&quot;hello&quot;, class=&quot;button&quot;,   id=&quot;test&quot;]</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">2、attribute特性 的类型总是 字符串 或 null。</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">document.getElementById('test').getAttribute('custom-attr');</span></div><div><br/></div><div><span style="font-size: 12pt;">$('#test').attr('custom-attr');</span></div></div><div><br/></div><div><span style="font-size: 12pt;">总是返回字符串类型的&quot;1&quot;。</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;div data-id=&quot;33&quot;&gt;&lt;/div&gt;</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">ele.dataset.id // string 33</span></div></div><div><br/></div><div><span style="font-size: 12pt;">获取HTML5定义的data属性时，获取的值也是字符串。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">3、非自定义的 attribute特性 与 property 有 1 : 1 的映射关系（</span><span style="font-size: 12pt; font-weight: bold;">当浏览器解析网页时，将 HTML 特性映射为了 DOM 属性</span><span style="font-size: 12pt; font-weight: bold;">），比如：id，class，title等。</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">HTML</span> <span style="font-size: 12pt; font-weight: bold;">的 attribute</span><span style="font-size: 12pt; font-weight: bold;">特性 映射为 DOM 属性 时，只映射标准属性，访问非标准属性将得到 undefined。</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;div id=&quot;test&quot; class=&quot;button&quot; foo=&quot;1&quot;&gt;&lt;/div&gt;</span></div><div><br/></div><div><span style="font-size: 12pt;">document.getElementById('test').id;        // return string: &quot;test&quot;</span></div><div><span style="font-size: 12pt;">document.getElementById('test').className; // return string: &quot;button&quot;</span></div><div><span style="font-size: 12pt;">document.getElementById('test').foo;       // return undefined        因为foo是一个自定义的attr特性</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">4、</span><span style="font-size: 12pt; font-weight: bold;">非自定义的 property（attribute）改变的时候，其对应的 attribute（property）在多数情况下也会改变。</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;div id=&quot;test&quot; class=&quot;button&quot;&gt;&lt;/div&gt;</span></div><div><br/></div><div><span style="font-size: 12pt;">var div = document.getElementById('test');</span></div><div><span style="font-size: 12pt;">div.className = 'red-input';</span></div><div><span style="font-size: 12pt;">div.getAttribute('class'); // return string: &quot;red-input&quot;</span></div><div><br/></div><div><span style="font-size: 12pt;">div.setAttribute('class','green-input');</span></div><div><span style="font-size: 12pt;">div.className; // return string: &quot;green-input&quot;</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">5、当对应的 property 改变时，attribute特性 value的值仍然是默认值，并不会随之改变</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;input id=&quot;search&quot; value=&quot;foo&quot; /&gt;</span></div><div><br/></div><div><span style="font-size: 12pt;">var input = document.getElementById('search');</span></div><div><span style="font-size: 12pt;">input.value = 'foo2';</span></div><div><br/></div><div><span style="font-size: 12pt;">input.getAttribute('value'); // return string: &quot;foo&quot;</span></div></div><div><br/></div><div><span style="font-size: 12pt;">所以 HTML 的 attribute 特性 和 DOM 的 property 属性 在这种情况下是不一样的。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">HTML 的 attribute 是不会变的，值一直是开始设置的值，而 DOM 的 property 是可变的：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function get1() {</span></div><div><span style="font-size: 12pt;">    var value = document.getElementById(&quot;input&quot;).getAttribute('value');</span></div><div><span style="font-size: 12pt;">    console.log('attr:'+value);</span></div><div><span style="font-size: 12pt;">    // 打印的值不变</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function get2() {</span></div><div><span style="font-size: 12pt;">    var prop = document.getElementById(&quot;input&quot;).value;</span></div><div><span style="font-size: 12pt;">    console.log('prop:'+prop);</span></div><div><span style="font-size: 12pt;">    // 打印的值会随着 input 框中的值改变而改变，我们操作的以及传给后台的其实就是 property，而不是 attribute</span></div><div><span style="font-size: 12pt;">}</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">6、</span><span style="font-size: 12pt; font-weight: bold;">当我们使用 data- 开头的自定义特性时，会映射到 DOM 的 dataset 属性。中划线格式会变成驼峰格式：</span></div><div><br/></div><div><span style="font-size: 12pt;">当我们使用 data- 开头的特性时，会映射到 DOM 的 dataset 属性。中划线格式会变成驼峰格式：</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">el.setAttribute('data-my-name', 'jjc');</span></div><div><span style="font-size: 12pt;">el.dataset.myName === 'jjc'</span></div><div><br/></div><div><span style="font-size: 12pt;">el.setAttribute('data-my-AGE', 18);</span></div><div><span style="font-size: 12pt;">el.dataset.myAge === '18'</span></div></div><div><br/></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">JS中推荐使用property属性，因为</span><span style="font-size: 12pt; font-weight: bold;">property</span><span style="font-size: 12pt; font-weight: bold;">属性相对attribute更快，更简便</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">7、如果我们为特性设置非字符串的值，则引擎会将此值转换为字符串。属性是具有类型的：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">el.getAttribute('checked') === '' // 特性是字符串</font></div><div><font style="font-size: 12pt;">el.checked === false              // 属性是 boolean 类型的值</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">el.getAttribute('style') === 'color:blue' // 特性是字符串</font></div><div><font style="font-size: 12pt;">typeof el.style === 'object'              // 属性是 CSSStyleDeclaration 对象</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">尤其是有些类型本该是布尔类型的attribute特性。比如：&quot;checked&quot;, &quot;disabled&quot;, &quot;selected&quot;。</span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">而浏览器会自动将这些值转变成布尔值（而不是字符串）传给property属性。</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">&lt;input id=&quot;test&quot; class=&quot;blue&quot; type=&quot;radio&quot; /&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">好实践</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">// get id</span></div><div><span style="font-size: 12pt;">document.getElementById('test').id;</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">// set class</span></div><div><span style="font-size: 12pt;">document.getElementById('test').className = 'red';</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// get and set radio control status</font></div><div><font style="font-size: 12pt;">document.getElementById('test').checked;       // boolean</font></div><div><font style="font-size: 12pt;">document.getElementById('test').checked = true;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">$('#test').prop('checked');                   // boolean</font></div><div><font style="font-size: 12pt;">$('#test').prop('checked', true);</font></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">坏实践</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">// get id</span></div><div><span style="font-size: 12pt;">document.getElementById('test').getAttribute('id');</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">// set class</span></div><div><span style="font-size: 12pt;">document.getElementById('test').setAttribute('class', 'red');</span></div><div><span style="font-size: 12pt;">document.getElementById('test').getAttribute('checked'); //  返回字符串类型 'checked'</span></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/5.png" type="image/png" data-filename="5.png" width="695"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">类名操作</span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">修改元素对象的className属性相当于直接修改标签的类名（通常用于切换样式）</span></span></span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var box = document.getElementById('box');</font></div><div><font style="font-size: 12pt;">box.className = 'show';</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">样式操作</span></span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">有单位一定要加单位（例如px）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">操作样式的时候，使用类名样式还是使用style？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当设置多个样式属性的时候使用类样式方便</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当设置样式属性比较少的时候使用style比较方便</span></span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;style&gt;</font></div><div><font style="font-size: 12pt;">.cls {</font></div><div><font style="font-size: 12pt;">    width: 100px;</font></div><div><font style="font-size: 12pt;">    height: 100px;</font></div><div><font style="font-size: 12pt;">    background-color: red;</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;">&lt;/style&gt;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;input type=&quot;button&quot; id=&quot;btn&quot; value=&quot; 点我 &quot;&gt;</font></div><div><font style="font-size: 12pt;">&lt;div id=&quot;box&quot;&gt;&lt;/div&gt;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">&lt;script&gt;</font></div><div><font style="font-size: 12pt;">function $ (id) {</font></div><div><font style="font-size: 12pt;">    return document.getElementById(id);</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;">// 1、类名样式操作</font></div><div><font style="font-size: 12pt;">// $('btn').onclick = function () {</font></div><div><font style="font-size: 12pt;">//     $('txt').className = 'cls';</font></div><div><font style="font-size: 12pt;">// }</font></div><div><font style="font-size: 12pt;">// 2、style样式操作</font></div><div><font style="font-size: 12pt;">// $('btn').onclick = function () {</font></div><div><font style="font-size: 12pt;">//     $('box').style.width = '100px';</font></div><div><font style="font-size: 12pt;">//     $('box').style.height = '100px';</font></div><div><font style="font-size: 12pt;">//    $('box').style.backgroundColor = 'red';</font></div><div><font style="font-size: 12pt;">// }</font></div><div><font style="font-size: 12pt;">&lt;/script&gt;</font></div></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">注意，有时因为样式优先级，类名控制样式会无效：</span></font></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;input type=&quot;button&quot; value=&quot; 点我 &quot; id=&quot;btn&quot;&gt;</font></div><div><font style="font-size: 12pt;">&lt;br&gt;</font></div><div><font style="font-size: 12pt;">&lt;div id=&quot;box&quot;&gt;&lt;/div&gt;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">function $(id) {</font></div><div><font style="font-size: 12pt;">    return document.getElementById(id);</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;">var btn = $('btn');</font></div><div><font style="font-size: 12pt;">btn.onclick = function () {</font></div><div><font style="font-size: 12pt;">     var box = $('box');</font></div><div><font style="font-size: 12pt;">    // box.className = 'cls';</font></div><div><font style="font-size: 12pt;">    box.style.width = '200px';</font></div><div><font style="font-size: 12pt;">    box.style.height = '200px';</font></div><div><font style="font-size: 12pt;">    box.style.position = 'absolute';</font></div><div><font style="font-size: 12pt;">    box.style.top = '200px';</font></div><div><font style="font-size: 12pt;">    box.style.left = '200px';</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">节点属性</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">nodeType 节点的类型：</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">1 元素节点</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;">2 属性节点</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> </span><span style="font-size: 12pt;">3 文本节点</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">元素节点的nodeType属性值是1，</span><span style="font-size: 12pt;">属性节点</span><span style="font-size: 12pt;">的nodeType属性值是2，</span><span style="font-size: 12pt;">文本节点的nodeType属性值是3。   </span><span style="font-size: 12pt;">注释节点的</span><span style="font-size: 12pt;">nodeType属性值是8</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><b style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold; color: rgb(255, 0, 0);">nodeName 节点的名称(标签名称) </span></b></div><div><b style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></b></div><div><b style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold; color: rgb(118, 0, 216);">需要大写</span></span></b></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">nodeValue 节点值：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216);">●</span><span style="font-size: 12pt; color: rgb(118, 0, 216);"> </span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">元素节点的nodeValue始终是null</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></font></div><div><span style="font-size: 12pt; font-weight: bold;">使用构造函数创建相同属性的对象</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">function Node(options) {</span></div><div><span style="font-size: 12pt;">   </span> <span style="font-size: 12pt;">// 因为获取的对象没有该属性时，传的值会是undefined，所以需要判断</span><span style="font-size: 12pt;">options对象有没有className</span></div><div><span style="font-size: 12pt;">    // if (options.className) {</span></div><div><span style="font-size: 12pt;">    //     this.className = options.className;</span></div><div><span style="font-size: 12pt;">    // }</span></div><div><span style="font-size: 12pt;">    // else {</span></div><div><span style="font-size: 12pt;">    //     this.className = '';</span></div><div><span style="font-size: 12pt;">    // }</span></div><div><span style="font-size: 12pt;">    // this.className = options.className ? options.className : '';</span></div><div><span style="font-size: 12pt;">    // || 运算符，当两边为其他类型时，如果第一个运算数转换成布尔类型是 true，则返回第一个运算数，否则返回第二个运算数</span></div><div><span style="font-size: 12pt;">    this.className = options.className || '';</span></div><div><span style="font-size: 12pt;">}</span></div><div><span style="font-size: 12pt;">var obj = new Node({}); // 需要传非常多的属性（或参数）时使用对象传参</span></div></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">模拟DOM结构（文档树、对象树）</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3.png" type="image/png" data-filename="3.png" width="336"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">function Node(option) {</font></div><div><font style="font-size: 12pt;">    this.id = option.id || '';</font></div><div><font style="font-size: 12pt;">    this.nodeName = option.nodeName || '';</font></div><div><font style="font-size: 12pt;">    this.nodeValue = option.nodeValue || '';</font></div><div><font style="font-size: 12pt;">    this.nodeType = option.nodeType || 1;</font></div><div><font style="font-size: 12pt;">    this.children = option.children || [];</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var html = new Node({</font></div><div><font style="font-size: 12pt;">    nodeName: 'html'</font></div><div><font style="font-size: 12pt;">});</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var head = new Node({</font></div><div><font style="font-size: 12pt;">    nodeName: 'head'</font></div><div><font style="font-size: 12pt;">});</font></div><div><font style="font-size: 12pt;">var body = new Node({</font></div><div><font style="font-size: 12pt;">    nodeName: 'body'</font></div><div><font style="font-size: 12pt;">})</font></div><div><font style="font-size: 12pt;">html.children.push(head);</font></div><div><font style="font-size: 12pt;">html.children.push(body);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">var div = new Node({</font></div><div><font style="font-size: 12pt;">    nodeName: 'div',</font></div><div><font style="font-size: 12pt;">    nodeValue: 'haha',</font></div><div><font style="font-size: 12pt;">});</font></div><div><font style="font-size: 12pt;">var p = new Node({</font></div><div><font style="font-size: 12pt;">    nodeName: 'p',</font></div><div><font style="font-size: 12pt;">    nodeValue: '段落'</font></div><div><font style="font-size: 12pt;">})</font></div><div><font style="font-size: 12pt;">body.children.push(div);</font></div><div><font style="font-size: 12pt;">body.children.push(p);</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">节点层次属性</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 (2).png" type="image/png" data-filename="3 (2).png"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">parentNode</span>（只有一个父节点）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">● </span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">parentElement</span>（只有一个父元素）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0);">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0);"> </span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">childNodes</span>（很多个子节点</span><span style="font-size: 12pt;">）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">children</span>（很多个子元素）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">nextSibling / previousSibling</span>（下一个兄弟节点</span><span style="font-size: 12pt;">）        </span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">nextElementSibling / previousElementSibling</span></span><span style="font-size: 12pt;">（有兼容性问题）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">firstChild / lastChild</span> （第一个子节点</span><span style="font-size: 12pt;">）                         <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">firstElementChild / last</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Element</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Child </span> （有兼容性问题）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">可用 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">parentElement</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">.</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">children[0] / parentElement</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">.children[</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">parentElement</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">.children.length - 1] </span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">替</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">代</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">parentElement</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">.</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">first</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Element</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Child /</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">parentElement</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">.</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">last</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Element</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Child</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">注意</span></span></span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">childNodes，</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">nextSibling / previousSibling，</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">firstChild / lastChild  都</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">包括换行的空白文本节点</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="text-align: justify;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">除了IE6-8，浏览器会在源代码中标签内部有空白符的地方插入一个文本节点到文档中</span></span></div><div style="text-align: justify;"><br/></div><div style="text-align: justify;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [26].jpg" type="image/jpeg" data-filename="3.jpg"/></div><div style="text-align: justify;"><br/></div><div style="text-align: justify;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [27].jpg" type="image/jpeg" data-filename="3.jpg" width="264"/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">javascript伪协议</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;a href = &quot;javascrpt:void(0)&quot;&gt;首页&lt;/a&gt;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">javascrpt:就是</span><span style="font-size: 12pt;">javascript协议，它告诉浏览器执行</span><span style="font-size: 12pt;">javascrpt代码，</span><span style="font-size: 12pt;">void(0)相当于undefined，什么都不做，这样就不用跳转了。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">如果是</span><span style="font-size: 12pt;">javascrpt:0点击之后</span><span style="font-size: 12pt;">网页</span><span style="font-size: 12pt;">可能会替换成字符a（FF浏览器）。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">不推荐这种做法，推荐为&lt;a&gt;标签绑定点击事件，使用return false;取消href属性的执行！</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">创建元素的三种方式</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">1、</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">document.write()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">不可以和事件一起使用。（很少使用，例子：客服功能）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0);"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [28].jpg" type="image/jpeg" data-filename="3.jpg" width="634"/></span></span></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">2、</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">innerHTML（简单结构用）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [29].jpg" type="image/jpeg" data-filename="3.jpg" width="407"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [30].jpg" type="image/jpeg" data-filename="3.jpg" width="406"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">优化1</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [31].jpg" type="image/jpeg" data-filename="3.jpg" width="401"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">优化2（数组）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [32].jpg" type="image/jpeg" data-filename="3.jpg" width="398"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">性能问题：每次设置</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">innerHTML都会增加一个元素修改浏览器在内存中维护的DOM树，DOM树一旦修改，浏览器都会重绘。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">innerHTML方法由于会对字符串进行解析，需要避免重绘、在循环内多次使用。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">可以借助字符串或数组的方式进行替换（因为字符串的值不可变，所以最佳方式是数组），再设置给innerHTML。</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">优化后与document.createElement性能相近。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">3、</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">document.createElement() （复杂结构用）</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">常用推荐</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var div = document.createElement('div');</font></div><div><font style="font-size: 12pt;">document.body.appendChild(div);</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">节点操作方法</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">appendChild()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">parentNode</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">.appendChild() </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">将一个节点添加到指定父节点的子节点列表末尾。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">insertBefore()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">parentNode</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">.</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">insertBefore(</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">newNode,  referenceNode</span></span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">) </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">在参考节点之前插入一个拥有指定父节点的子节点。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">removeChild()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">parentNode</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">.removeChild(node) </span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">不需要指明父节点的写法：</span></span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">node.parentNode.removeChild(node)</span></span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">replaceChild()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">replace</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">dNode = parentNode.replaceChild(newChild, oldChild); // </span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">newChild 用来替换 oldChild 的新节点。</span></span></div><div><font color="#7600D8" style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">用指定的节点替换当前节点的一个子节点，并返回被替换掉的节点</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">insertAfter</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">function insertAfter(newNode, referenceNode) {</font></div><div><font style="font-size: 12pt;">     referenceNode.parentNode.insertBefore(newNode,  referenceNode.nextSibling);</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(255, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">insertBefore() 和 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">replaceChild()  的共性是：</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">parentNode</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">使用第一个参数作为newNode。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">事件详解</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">注册/移除事件的三种方式</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var box = document.getElementById('box');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><font>// （</font>DOM0级<font>）注册事件1 无法给同一个对象同一个事件多次注册事件处理函数，会被覆盖掉。 只有事件冒泡阶段</font></font></div><div><font style="font-size: 12pt;">box.onclick = function () {</font></div><div><font style="font-size: 12pt;">    console.log('点击后执行');</font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;">// 移除事件1</font></div><div><font style="font-size: 12pt;">box.onclick = null;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font><font><font style="font-size: 12pt;"><font>//</font> （DOM2级）注册事件<font>2 addEventListener()有兼容性问题（IE9+）</font></font></font></font></div><div><font style="font-size: 12pt;"><font>//</font> 第三个参数是useCapture，默认值为 false。<font>当useCapture(设为true) 时，冒泡阶段不会调用事件处理函数</font></font></div><div><font style="font-size: 12pt;">box.addEventListener('click', eventCode, false);</font></div><div><font style="font-size: 12pt;">// 移除事件2</font></div><div><font style="font-size: 12pt;">box.removeEventListener('click', eventCode, false);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><font><font><font>//</font> 注册事件3 <font>IE6 - IE8特有，第一个参数要加上on（</font></font>attach：附加）。 </font>只有事件冒泡阶段</font></div><div><font style="font-size: 12pt;">box.attachEvent('onclick', eventCode);</font></div><div><font style="font-size: 12pt;"><font>// 移除事件3（</font>detach：分离）</font></div><div><font style="font-size: 12pt;">box.detachEvent('onclick', eventCode);</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">function eventCode() {</font></div><div><font style="font-size: 12pt;">  console.log('点击后执行');</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">事件的三个阶段（事件处理只能处理捕获阶段或冒泡阶段，二选一）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">DOM0级事件</span><span style="font-size: 12pt; font-weight: bold;">（</span><span style="font-size: 12pt; font-weight: bold;">例如：</span><span style="font-size: 12pt; font-weight: bold;">HTML行内事件处理函数，</span><span style="font-size: 12pt; font-weight: bold;">onclick</span><span style="font-size: 12pt; font-weight: bold;">）</span><span style="font-size: 12pt; font-weight: bold;">：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">HTML 行内事件处理函数需要在 </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">html 的 onclick 特性中，特性的值是</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;"> JavaScript 代码，</span></span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">在触发该事件的时候，执行特性值的内容。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">onclick 特性 其实会编译为一个 function 函数（方法），所以函数里面如果要执行函数，里面的</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">函数</span></span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">必须要</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">加上括号</span></span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;"> ()，所以会出现</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#000000" style="font-size: 12pt;">&lt;body onload=&quot;doSomething()&quot;&gt;</font></div><div><font color="#000000"><br/></font></div><div><font color="#000000" style="font-size: 12pt;">&lt;script type=&quot;text/javascript&quot;&gt;</font></div><div><font color="#000000" style="font-size: 12pt;">  function doSomething(){</font></div><div><font color="#000000" style="font-size: 12pt;">    console.log('test');</font></div><div><font color="#000000" style="font-size: 12pt;">  }</font></div><div><font color="#000000" style="font-size: 12pt;">&lt;/script&gt;</font></div></div><div style="font-size: 12pt;"><br/></div><div style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">如果不加括号相当于</span></div><div style="font-size: 12pt;"><br/></div><div style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216);"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/861164-20160202184325647-1081321371.png" type="image/png" data-filename="861164-20160202184325647-1081321371.png"/></span></div><div style="font-size: 12pt;"><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">window.onload = doSomething();</font></div><div><font style="font-size: 12pt;">function doSomething(){</font></div><div><font style="font-size: 12pt;">  console.log('test');</font></div><div><font style="font-size: 12pt;">}</font></div></div><div style="font-size: 12pt;"><br/></div><div style="font-size: 12pt;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">window.onload 是个属性，只是指向 doSomething 函数体，待将来触发了 onload事件，doSomething才会被加到任务队列等待执行。</span></span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;">如果</span> <span style="font-size: 12pt;">doSomething 没有 ()，</span><span style="font-size: 12pt;">如约输出&quot;test&quot;没问题，</span><span style="font-size: 12pt;">不管return 什么，</span><span style="font-size: 12pt;">window.onload 都是</span><span style="font-size: 12pt;">指向 doSomething，并执行里面的内容</span><span style="font-size: 12pt;">。</span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [1].png" type="image/png" data-filename="3.png"/></span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;">如果 </span><span style="font-size: 12pt;">doSomething 后面有()，</span><span style="font-size: 12pt;">如约输出&quot;test&quot;没问题，查看 window.onload 还是 null ，直到运行完函数，最后查看 window.onload 依旧是 null ，</span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">其实就是调用函数并执行然后返回值赋值变量，</span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;">由于 doSomething 没有返回明显的值，所以window.onload 最后才会是null。</span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;">（</span><span style="font-size: 12pt;">注：经测试 return 1; return &quot;str&quot;; 都不能为 window.onload 赋值，只有 return 引用类型 window.onload 才不会是 null）。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="font-size: 12pt;"><span style="font-size: 12pt;">参考：</span><a href="https://www.cnblogs.com/venoral/p/5178336.html" style="font-size: 12pt;">https://www.cnblogs.com/venoral/p/5178336.html</a><span style="font-size: 12pt;"> </span></div><div style="font-size: 12pt;"><br/></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">但是 </span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">HTML 与 JS 强耦合，当一旦需要修改函数名就得修改两个地方。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(118, 0, 216); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">onclick 等类型事件</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">无法同时绑定多个事件处理函数，会被最后一个</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">事件处理函数覆盖。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">只能触发事件冒泡阶段不能触发事件捕获阶段。</span></span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">DOM2级事件（</span><span style="font-size: 12pt; font-weight: bold;">addEventListener与removeEventListener</span><span style="font-size: 12pt; font-weight: bold;">）：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">可以为一个DOM元素的同一个事件绑定多个事件处理函数，谁先绑定谁先执行。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">第三个参数指定在捕获阶段执行还是在冒泡阶段执行，默认在冒泡阶段执行。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">1. 捕获阶段</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">事件对象从Window传播到目标的父对象。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [33].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">捕获阶段不涉及事件目标。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">2. 目标阶段</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">事件对象到达事件对象的事件目标。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">在事件处理中，目标阶段被看成冒泡阶段的一部分。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">目标阶段的事件会触发该元素（即事件目标）上的所有监听器，不管这个监听器在注册时useCapture 参数值是true还是false。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">3. 冒泡阶段</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">事件对象从目标的</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">父对象传播</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">到Window。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [34].jpg" type="image/jpeg" data-filename="3.jpg" width="209"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">事件流是页面中接受事件的顺序。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">事件捕获和事件冒泡分别是 网景（Netscape）和 IE 对 DOM 事件产生顺序的描述。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">网景 认为 DOM 接收的事件应该最先是 window，然后到 document，接着一层一层往下，最后才到具体的元素接收到事件，即 事件捕获 。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">IE 则认为 DOM 事件应该是具体元素先接收到，然后再一层一层往上，接着到 document，最后才到 window，即 事件冒泡 。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">最后 W3C 对这两种方案进行了统一：将 DOM 事件分为两个阶段，事件捕获和事件冒泡阶段。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">当一个元素被点击，首先是事件捕获阶段，window 最先接收事件，然后一层一层往下捕获，最后由具体元素接收；</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">之后再由具体元素再一层一层往上冒泡，到 window 接收事件。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">事件对象通过DOM事件流</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">在DOM树中进行传播：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [35].jpg" type="image/jpeg" data-filename="3.jpg" width="625"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">事件冒泡：子元素的事件（即使子元素没有注册事件）会</span><span style="font-size: 12pt;">像泡泡一样一层一层往祖先元素传递</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [36].jpg" type="image/jpeg" data-filename="3.jpg"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [37].jpg" type="image/jpeg" data-filename="3.jpg" width="498"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3.gif" type="image/gif" data-filename="3.gif" width="800"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">onmouseover 和 onmouseenter 区别</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">两者都是移入的时候触发，但是 onmouseover 会触发多次，而 onmouseenter 只在进去的时候才触发。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">即使子元素 li 没有注册（绑定）mouseover事件，当鼠标移入 </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">li </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">时，li 仍然会触发 ul 上mouseover事件：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [38].jpg" type="image/jpeg" data-filename="3.jpg" width="612"/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">mouseenter   mouseleave     不会触发事件冒泡</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">mouseover     mouseout        会触发事件冒泡</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [1].gif" type="image/gif" data-filename="3.gif"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当鼠标进入左右两边的ul时，mouseover和mouseenter事件都触发了。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">但是当移入两边ul的子元素li的时候，触发了左边ul上的mouseover事件，而右边ul的mouseenter事件没有被触发。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">以上现象本质上是因为 mouseover 事件支持冒泡，而 mouseenter 事件不支持冒泡！</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">扩展</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">并不是所有的事件都有冒泡，例如：</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● onblur</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> onfocus</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> onmouseenter</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> onmouseleave</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">如何让事件先冒泡后捕获？</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">addEventListener 第三个参数为 </span><span style="font-size: 12pt;">useCapture ，默认为 false ，即默认冒泡。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">若要实现先冒泡后捕获，给一个元素绑定两个 addEventListener，其中一个第三个参数设置为 false（即冒泡），另一个第三个参数设置为 true（即捕获），</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">调整它们的代码顺序，将设置为 false 的监听事件放在设置为 true 的监听事件前面即可。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">事件委托（事件冒泡的应用）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当注册事件过多时，不但</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">添加和删除事件监听器是一场噩梦，而且事件处理函数会占用内存，降低性能。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">解决方案是使用事件委托：</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">利用</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">事件冒泡，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">只为父元素注册一个事</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">件</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，就相当于为子元素注册同一类型的所有事件，即</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">本该子元素注册的事件交给父元素来注册。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">例子1：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;ul id=&quot;parent&quot;&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li id=&quot;post-1&quot;&gt;item 1&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li id=&quot;post-2&quot;&gt;item 2&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li id=&quot;post-3&quot;&gt;item 3&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li id=&quot;post-4&quot;&gt;item 4&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li id=&quot;post-5&quot;&gt;item 5&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">    &lt;li id=&quot;post-6&quot;&gt;item 6&lt;/li&gt;</font></div><div><font style="font-size: 12pt;">&lt;/ul&gt;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">如何知道单击了哪个子元素（li）？</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">将click</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">事件注册</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">到父元素（ul），</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当点击li时，click事件会冒泡到ul元素，而且会触发事件监听器（事件处理函数），</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">这时我们可以使用事件对象的target属性获得单击节点的引用，设置只有li元素被点击时才触发：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">e.target 获得真正触发事件的对象</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">document.getElementById('parent').addEventListener('click', function (e) {</font></div><div><font style="font-size: 12pt;">    // 如果点击到目标并且目标是li元素时</font></div><div><font style="font-size: 12pt;">    if (e.target &amp;&amp; e.target.nodeName === 'LI') {</font></div><div><font style="font-size: 12pt;">        console.log('li', e.target.id.replace('post -', ''), '被点击了');</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">});</font></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">例子2：</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">将click</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">事件注册</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">到</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">父元素（id为</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">'myDiv'的</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">div</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">），但是我们只为CSS类名为classA的a标签注册点击事件：</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">document.getElementById('myDiv').addEventListener('click', function(e) {</font></div><div><font style="font-size: 12pt;">    if (e.target &amp;&amp; e.target.matches('a.classA')) {</font></div><div><font style="font-size: 12pt;">        console.log('超链接被点击了!');</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">});</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">Element.matches()：如果元素是否被CSS选择器字符串选中，</span><span style="font-size: 12pt;">返回true，否则返回false。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">事件对象</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">事件处理函数中有一个局部变量叫做事件对象，它包含所有与事件相关的信息：</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">e.target                     </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">真正触发事件的对象</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">e.currentTarget        当前执行事件处理函数的对象  常用this替代</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">e.eventPhase            事件的阶段  1捕获 2目标 3冒泡</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/5.jpg" type="image/jpeg" data-filename="5.jpg" width="451"/></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">蓝色为box3，绿色为box2，红色为box1：</span></span></div><div><br/></div><div><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [39].jpg" type="image/jpeg" data-filename="3.jpg"/><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/4.jpg" type="image/jpeg" data-filename="4.jpg"/></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">e.type                        事件的类型   </span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">应用：使用switch语句为不同事件注册同一个函数，减少内存占用</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">box.onclick = fn;</font></div><div><font style="font-size: 12pt;">box.onmouseover = fn;</font></div><div><font style="font-size: 12pt;">box.onmouseout = fn;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">function fn(e) {</font></div><div><font style="font-size: 12pt;">    e = e || window.event;</font></div><div><font style="font-size: 12pt;">    switch (e.type) {</font></div><div><font style="font-size: 12pt;">        case 'click':</font></div><div><font style="font-size: 12pt;">            console.log('点击box');</font></div><div><font style="font-size: 12pt;">            break;</font></div><div><font style="font-size: 12pt;">       case 'mouseover':</font></div><div><font style="font-size: 12pt;">            console.log('鼠标经过box');</font></div><div><font style="font-size: 12pt;">            break;</font></div><div><font style="font-size: 12pt;">       case 'mouseout':</font></div><div><font style="font-size: 12pt;">            console.log('鼠标离开box');</font></div><div><font style="font-size: 12pt;">            break;</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">e.preventDefault()     阻止事件的默认行为</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">e.stopPropagation()  停止事件冒泡的传播</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">e.clientX / e.clientY   鼠标在可视区的位置</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（地址栏以下）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">e.pageX / e.pageY     鼠标在页面的位置（加上滚动条）    IE9+</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">document.body.scrollLeft （横向滚动条滚动的距离）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">document.body.scrollTop（纵向滚动条滚动的距离）  </span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">pageY = clientY + </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">scrollTop</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">其他浏览器</span></span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">（兼容）</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;"> </span></span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">document.documentElement（根元素）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">document.documentElement</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">.scrollLeft</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">document.documentElement</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">.</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">scrollTop</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● clientHeight：表示可视区域的高度，不包含 border 和滚动条</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> offsetHeight：表示可视区域的高度，包含了 border 和滚动条</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> scrollHeight：表示了所有区域的高度，包含了因为滚动被隐藏的部分</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> clientTop：表示边框 border 的厚度，在未指定的情况下一般为 0</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">●</span><span style="font-size: 12pt;"> scrollTop：滚动后被隐藏的高度，获取对象相对于由 offsetParent 属性指定的父坐标（CSS 定位的元素或 body 元素）距离顶端的高度。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">获取鼠标在盒子中的位置</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">鼠标在盒子中的位置（黑色） = 鼠标在页面上的位置（红色） - 盒子在页面上的位置 （绿色）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [40].jpg" type="image/jpeg" data-filename="3.jpg" width="497"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;div id=&quot;box&quot;&gt;</font></div><div><font style="font-size: 12pt;">var div = document.getElementById('box');</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">div.onmousemove = function (e) {</font></div><div><font style="font-size: 12pt;">      var x = e.pageX - this.offsetLeft;</font></div><div><font style="font-size: 12pt;">      var y = e.pageY - this.offsetTop;</font></div><div><font style="font-size: 12pt;">      console.log(x, y);</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><a href="https://microzz.com/2017/04/06/jsdom/" style="font-size: 12pt;">原生JS中DOM节点相关API合集</a></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">什么是浏览器对象模型？（BOM）</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">BOM</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">提供了独立于内容而与浏览器窗口进行交互的对象。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [2].png" type="image/png" data-filename="3.png" width="492"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">换个角度讲，BOM包含了DOM，浏览器给予访问的是BOM对象，从BOM对象再访问到DOM对象，从而javascript可以操作浏览器以及浏览器读取到的文档。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">BOM缺乏正式标准。</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">在浏览器中，window对象有双重角色，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">它既是通过JavaScript访问浏览器窗口的一个接口，又是ECMAScript规定的Global对象。</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">BOM的顶级对象window</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">window是浏览器的顶级对象</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">当调用window下的属性和方法时，可以省略window </span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">注意：window特殊的属性 window.name window.top（</span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">变量命名最好不要与window属性重复</span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">所有全局变量、全局函数都是</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">window的属性和方法。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">document、console也是</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">window的属性。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">对话框（用户体验不好）</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">● alert()</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;"> prompt()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">●</span><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;"> confirm()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">页面加载事件</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">onload</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">不仅window有onload事件，所有元素都有onload事件（例如图片可以延迟加载）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">window.onload = function () {</font></div><div><font style="font-size: 12pt;">    // 当页面所有内容和外部资源加载完成后（包括图像、脚本文件、CSS 文件等）执行</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">onunload</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">onunload（卸载页面）事件中window对象会被冻结，所有对话框都不会使用</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">F5刷新页面会发生：1、卸载页面 2、重新加载页面</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">window.onunload = function () {</font></div><div><font style="font-size: 12pt;">    // 当用户退出页面时执行</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">定时器</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">因为for循环只能瞬间得出结果，不可以间隔执行，所以有了</span><span style="font-size: 12pt;">setTimeout()和</span><span style="font-size: 12pt;">setInterval()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">setTimeout()和</span><span style="font-size: 12pt; font-weight: bold;">setInterval() </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">有</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">两个参数：第一个参数——要执行的函数（如果要用多次使用</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">命名</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">函数，用一次使用匿名函数）；</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">第二个参数——间隔的时间，单位是毫秒。</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;"> </span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">返回值：一个整数，是定时器的标识，凭借全局变量timer存储返回值才能清除定时器。</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">setTimeout()  定时炸弹  隔一段时间执行  只执行一次</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">setInterval()    闹钟        隔一段时间执行  重复执行  </span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(118, 0, 216); font-weight: bold;">第一次执行也要隔一段时间</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">var timer = setInterval(fn, 3000);</font></div><div><font style="font-size: 12pt;">function fn () {</font></div><div><font style="font-size: 12pt;">       console.log('Boom!');</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">clearTimeout() 和 clearInterval()</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">clearInterval(timer);</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">实现 Sleep</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">const sleep = time =&gt; {</font></div><div><font style="font-size: 12pt;">  return new Promise((resolve, reject) =&gt; {</font></div><div><font style="font-size: 12pt;">    setTimeout(() =&gt; {</font></div><div><font style="font-size: 12pt;">      resolve(time);</font></div><div><font style="font-size: 12pt;">    }, time);</font></div><div><font style="font-size: 12pt;">  });</font></div><div><font style="font-size: 12pt;">};</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">sleep(1000).then((res) =&gt; {</font></div><div><font style="font-size: 12pt;">  console.log(res);</font></div><div><font style="font-size: 12pt;">});</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">location对象</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">location对象是window对象下的一个属性，使用的时候可以省略window对象</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">成员</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● 方法： assign() / reload() / replace()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">● </span><span style="font-size: 12pt;">属性：</span> <span style="font-size: 12pt;">href / </span><span style="font-size: 12pt;">hash / host / hostname / search</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">href 和 assign()<span style="font-size: 12pt; font-weight: bold; color: rgb(255, 0, 0);"> （重点）</span></span></font></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">可以让页面跳转到指定网址</span></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 跳转到百度</font></div><div><font style="font-size: 12pt;">btn.onclick = function () {</font></div><div><font style="font-size: 12pt;">    location.href = 'https://www.baidu.com/';</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">btn.onclick = function () {</font></div><div><span style="font-size: 12pt;">    location.assign('https://www.baidu.com/');</span></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">replace()</span></font></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">替换掉地址栏地址，不记录历史，无法后退</span></font></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">btn.onclick = function () {</font></div><div><font style="font-size: 12pt;">    location.replace('https://www.baidu.com/');</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">reload() </span></font></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">该方法只有一个参数</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><font color="#FF0000" style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">参数是true：与快捷键ctrl + F5一样，强制从服务器刷新页面</span></font></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div><font color="#FF0000" style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">参数是false或没传参时：与快捷键F5一样，如果有缓存，从缓存里获取页面</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">btn.onclick = function () {</font></div><div><font style="font-size: 12pt;">    location.reload();</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><font style="font-size: 12pt;"><span style="font-size: 12pt;"><br/></span></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">简单动画</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">offsetLeft 是只读属性，无法设置</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">style.Left</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"> 1、无法带上单位相加，因为会变成字符串，例如'10px10px'，</span><span style="font-size: 12pt;">无法给样式属性设置非法值，</span><span style="font-size: 12pt;">浏览器会过滤掉这个非法值。</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"> 2、如果HTML标签的属性中没有设置style那么</span><span style="font-size: 12pt;">style.Left为空字符串</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;">所以只能</span></div><div><font style="font-size: 12pt;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">box.style.Left = box.offsetLeft + 10 + 'px';</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">URL </span><span style="font-size: 12pt; font-weight: bold;">统一资源定位符 (Uniform Resource Locator, URL)</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; font-weight: bold;">组成（了解）</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">scheme://host:port/path?query#fragment</font></div><div><font style="font-size: 12pt;">http://www.itheima.com:80/a/b/index.html?name=zs&amp;age=18#bottom</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">scheme：通信协议</font></div><div><font style="font-size: 12pt;">    常用的http,ftp,mailto等</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">host：主机</font></div><div><font style="font-size: 12pt;">    服务器(计算机)域名系统 (DNS) 主机名或 IP 地址</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">port：端口号</font></div><div><font style="font-size: 12pt;">    整数，可选，省略时使用方案的默认端口，如http的默认端口为80</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">path：路径</font></div><div><font style="font-size: 12pt;">    由零或多个'/'符号隔开的字符串，一般用来表示主机上的一个目录或文件地址</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">query：查询字符串（常用）</font></div><div><font style="font-size: 12pt;">    可选，用于给动态网页传递参数，可有多个参数，用'&amp;'符号隔开，每个参数的名和值用'='符号隔开。例如：name=zs</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">fragment：信息片断（常用）</font></div><div><font style="font-size: 12pt;">    字符串，锚点</font></div></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">history对象</span></span><span style="font-size: 12pt; font-weight: bold;">（了解）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">forward()</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">btn.onclick = function () {</font></div><div><font style="font-size: 12pt;"><font>    </font>history.forward();</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在会话历史记录中前进到下一页</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">back()</span></span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">btn.onclick = function () {</font></div><div><font style="font-size: 12pt;">    history.back();</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">在会话历史记录中后退到上一页</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">go() </span> </span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">history.go(1);  </font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">前进一页，等价于调用forward()</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">history.go(-1) ;</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">后退一页</span><span style="font-size: 12pt;">，等价于调用back()</span></div><div><span style="font-size: 12pt;"><br/></span></div><hr/><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">navigator对象</span></span><span style="font-size: 12pt; font-weight: bold;">（了解）</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">userAgent</span></div><div><span style="font-size: 12pt;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">navigator.userAgent</font></div></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt;">返回当前操作系统版本和浏览器版本</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><hr/><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">特效</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/1498743216279.png" type="image/png" data-filename="1498743216279.png" width="535"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">offsetParent：距离子元素最近的定位父元素，如果没有则</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">offsetParent是body</span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">offsetLeft和offsetTop（变化的）：元素（</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">border-box区域</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）的左上角距</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">offsetParent</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">的距离，随</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">offsetParent变化而变化</span></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">offsetWidth：元素width + </span></font><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">padding + border</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">offetHeight</span></font><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">：元素height + </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">padding + border</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/3 [41].jpg" type="image/jpeg" data-filename="3.jpg" width="551"/></span></div><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">client</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Width：</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">元素width </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">+ padding</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">不包括border</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">client</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">Height：</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">元素height </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">+ padding </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">不包括border</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">clientLeft：元素border-left</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">clientTop：元素border-top</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/1498743288621.png" type="image/png" data-filename="1498743288621.png" width="558"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">scrollWidth：</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">元素width </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">+ padding</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">不包括滚动条</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">，</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">scrollLeft = </span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">clientWidth</span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">scrollHeight：</span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">元素height </span></span><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">+ padding </span></span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">（</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">不包括滚动条</span><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">）</span> <span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">+未显示部分的height（内容超出元素大小时） </span></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">scrollLeft：</span></font><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">未显示部分</span><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">的left + border-left</span></font></div><div><font color="#FF0000" style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">scrollTop：</span></font><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">未显示部分</span><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0); font-weight: bold;">的top +border-top</span></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">元素的类型</span></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/1497169919418.png" type="image/png" data-filename="1497169919418.png" width="569"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt;"><img src="7 - JS高级程序设计第八章 DOM与BOM 笔记_files/2000.png" type="image/png" data-filename="2000.png"/></span></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div></div><div><br/></div></span>
</div></body></html> 